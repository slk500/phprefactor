<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-03-04 Wed 12:52 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PHPRefactor</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="slk500" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">PHPRefactor</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org59bfe7c">1. Refactorings</a>
<ul>
<li><a href="#org841c99e">1.1. Add Type-Hint</a>
<ul>
<li><a href="#org4b34ce4">1.1.1. If you CAN type-hint, then you MUST type-hint</a></li>
<li><a href="#orga4f43de">1.1.2. If you are type-hinting an array, you MUST document the array type in a docblock</a></li>
</ul>
</li>
<li><a href="#org793756f">1.2. Consolidate Conditional Expression</a>
<ul>
<li><a href="#orgaeec69d">1.2.1. Write a test that pass</a></li>
<li><a href="#orgff48708">1.2.2. Refactor the code</a></li>
<li><a href="#orgf3b93eb">1.2.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#org7857ed7">1.3. Consolidate Duplicate Conditional Fragments</a>
<ul>
<li><a href="#org0df6cc3">1.3.1. Write a test that pass</a></li>
<li><a href="#org3c7ca19">1.3.2. Refactor the code</a></li>
<li><a href="#orgb339978">1.3.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#orgd43e077">1.4. Decompose Conditional</a>
<ul>
<li><a href="#orgc678890">1.4.1. Write a test that pass</a></li>
<li><a href="#org12009d9">1.4.2. Refactor the code</a></li>
<li><a href="#orgda3f6f1">1.4.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#org16ccb5c">1.5. Encapsulate Field</a>
<ul>
<li><a href="#org205a15a">1.5.1. Write a test that pass</a></li>
<li><a href="#org89eea01">1.5.2. Refactor the code</a></li>
<li><a href="#org1da3e33">1.5.3. Run a test</a></li>
</ul>
</li>
<li><a href="#orgf6e3a37">1.6. Extract Class</a>
<ul>
<li><a href="#orgc90e114">1.6.1. Write a test that pass</a></li>
<li><a href="#org134c6df">1.6.2. Refactor the code</a></li>
<li><a href="#org7c2eb2e">1.6.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#org7e9f934">1.7. Extract Function</a>
<ul>
<li><a href="#orgdeaf06a">1.7.1. Write a test that pass</a></li>
<li><a href="#orgf54c73d">1.7.2. Refactor the code</a></li>
<li><a href="#org9e07ec4">1.7.3. Run a test</a></li>
<li><a href="#orgceb93e2">1.7.4. Notes</a></li>
</ul>
</li>
<li><a href="#org33dd72e">1.8. Extract Variable</a>
<ul>
<li><a href="#org2e5f420">1.8.1. Write a test that pass</a></li>
<li><a href="#org03c4c5f">1.8.2. Refactor the code</a></li>
<li><a href="#org9755892">1.8.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#orge3dc0f5">1.9. Inline Class</a></li>
<li><a href="#org25ec580">1.10. <span class="done DONE">DONE</span> Inline Function</a>
<ul>
<li><a href="#orgad87284">1.10.1. Write a test that pass</a></li>
<li><a href="#org6fbb85a">1.10.2. Refactor the code</a></li>
<li><a href="#orgff61f08">1.10.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#orgf640605">1.11. Inline Variable</a>
<ul>
<li><a href="#orgbea3a2c">1.11.1. Refactor the code</a></li>
</ul>
</li>
<li><a href="#orgff4fc84">1.12. Introduce Parameter Object</a>
<ul>
<li><a href="#orgd42947f">1.12.1. Write a test that pass</a></li>
<li><a href="#org242453c">1.12.2. Refactor the code</a></li>
<li><a href="#orgc7b1f99">1.12.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#org5bcdc47">1.13. Optimize Imports</a>
<ul>
<li><a href="#orgc5bcdce">1.13.1. Write a test that pass</a></li>
<li><a href="#orge065d2c">1.13.2. Refactor the code</a></li>
<li><a href="#org640dfab">1.13.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#org0bb53cd">1.14. Move Method</a>
<ul>
<li><a href="#orgf048cb3">1.14.1. Write a test that pass</a></li>
<li><a href="#org2dc12a2">1.14.2. Refactor the code</a></li>
<li><a href="#org3841097">1.14.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#org46988d3">1.15. Parameterize Method</a>
<ul>
<li><a href="#org4b558c2">1.15.1. <span class="todo TODO">TODO</span> Write a test that pass</a></li>
<li><a href="#org907cabc">1.15.2. Refactor the code</a></li>
<li><a href="#org4ad883d">1.15.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#org620cb5e">1.16. Preserve Whole Object</a>
<ul>
<li><a href="#org5a34ce9">1.16.1. Write a test that pass</a></li>
<li><a href="#org45def07">1.16.2. Refactor the code</a></li>
<li><a href="#org3c3ca7c">1.16.3. Pass a test</a></li>
<li><a href="#orgef5fabb">1.16.4. Refactor the code</a></li>
<li><a href="#org29289bd">1.16.5. Pass a test</a></li>
<li><a href="#orgf49aeea">1.16.6. Refactor the code</a></li>
<li><a href="#org404b466">1.16.7. Pass a test</a></li>
</ul>
</li>
<li><a href="#orge95edc7">1.17. Pull Up Method</a>
<ul>
<li><a href="#org67d4f61">1.17.1. Write a test that pass</a></li>
<li><a href="#org1630ac9">1.17.2. Refactor the code</a></li>
<li><a href="#org6f3f654">1.17.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#org765add8">1.18. Remove Assignments to Parameters</a>
<ul>
<li><a href="#orgebd7755">1.18.1. Write a test that pass</a></li>
<li><a href="#orgd9ef2ff">1.18.2. Refactor the code</a></li>
<li><a href="#orge9e726f">1.18.3. Pass a test</a></li>
<li><a href="#orgd731f04">1.18.4. Info</a></li>
</ul>
</li>
<li><a href="#org3cd0fa4">1.19. Remove PHPDoc</a>
<ul>
<li><a href="#org7a0bc44">1.19.1. Write a test that pass</a></li>
<li><a href="#org0bc0086">1.19.2. Refactor the code</a></li>
<li><a href="#org8f574de">1.19.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#orgbfcc167">1.20. Rename Function</a>
<ul>
<li><a href="#org54bb857">1.20.1. Write a test that pass</a></li>
<li><a href="#org81b8b69">1.20.2. Refactor the code</a></li>
<li><a href="#org77e7183">1.20.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#org9788ca6">1.21. Replace Global with Dependency Injection</a>
<ul>
<li><a href="#orgd503996">1.21.1. Write a test that pass</a></li>
<li><a href="#org267f05e">1.21.2. Refactor the code</a></li>
<li><a href="#org28c4254">1.21.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#orgfc1478c">1.22. <span class="done DONE">DONE</span> Replace Magic Number With Symbolic Constant</a>
<ul>
<li><a href="#org1e5a571">1.22.1. Write a test that pass</a></li>
<li><a href="#org41ed73c">1.22.2. Refactor the code</a></li>
<li><a href="#orgcda1c7d">1.22.3. Run a test</a></li>
<li><a href="#org771b113">1.22.4. Helper:</a></li>
</ul>
</li>
<li><a href="#orgde4cd6b">1.23. Replace Parameter with Method</a>
<ul>
<li><a href="#org5ba9b29">1.23.1. Write a test that pass</a></li>
<li><a href="#org1791c02">1.23.2. Refactor the code</a></li>
<li><a href="#org432efdc">1.23.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#org698514b">1.24. Replace Temp with Query</a>
<ul>
<li><a href="#orge996c4b">1.24.1. Write a test that pass</a></li>
<li><a href="#org00542f5">1.24.2. Refactor the code</a></li>
<li><a href="#orgdfa9385">1.24.3. Pass a test</a></li>
<li><a href="#org4d08b06">1.24.4. Info</a></li>
</ul>
</li>
<li><a href="#org55e5526">1.25. Replacing Type Code with Subclasses</a>
<ul>
<li><a href="#org918ed38">1.25.1. Write a test that pass</a></li>
<li><a href="#org3aebe7c">1.25.2. Refactor the code</a></li>
<li><a href="#org8b71ecd">1.25.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#org7a1ff9f">1.26. Separate Query from Modifier</a>
<ul>
<li><a href="#orgb2acdd7">1.26.1. Write a test that pass</a></li>
<li><a href="#org94c12ec">1.26.2. Refactor the code</a></li>
<li><a href="#org5841628">1.26.3. Pass a test</a></li>
</ul>
</li>
<li><a href="#orga30e551">1.27. Split Temporary Variable</a>
<ul>
<li><a href="#org60afdbd">1.27.1. Write a test that pass</a></li>
<li><a href="#org464d6e5">1.27.2. Refactor the code</a></li>
<li><a href="#orgb10b44b">1.27.3. Pass a test</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org64219b6">2. Tutorials</a>
<ul>
<li><a href="#org996774a">2.1. Automated Tests with PHPUnit                      Anna Filina       testing - PHPUnit</a></li>
<li><a href="#orgdbdbe5e">2.2. Catalog of Refactoring to Patterns                Joshua Kerievsky  patterns</a></li>
<li><a href="#orge47b258">2.3. Catalog of Refactorings                           Martin Fowler     refactoring</a></li>
<li><a href="#orgc93e54a">2.4. Clean Code PHP                                    Piotr Plenik      clean code</a></li>
<li><a href="#org3029d5d">2.5. Detecting Code Smells                             Patkós Csaba      refactoring</a></li>
<li><a href="#orgf291b14">2.6. Encapsulation and SOLID                           Mark Seemann      SOLID</a></li>
<li><a href="#org2829c4c">2.7. How to Refactor Like a Boss 1                     Michael Cheng     refactoring</a></li>
<li><a href="#orgdb6f62d">2.8. How to Refactor Like a Boss 2                     Michael Cheng     refactoring</a></li>
<li><a href="#org014c674">2.9. HTTP Smoke Testing                                Peter Heinz       testing - smoke test</a></li>
<li><a href="#org6631316">2.10. Introduction to Testing with PHPUnit              Trevor Sawler     testing - PHPUnit</a></li>
<li><a href="#org3fa867b">2.11. Legacy Coderetreat (Java)                         Adrian Bolboaca   refactoring</a></li>
<li><a href="#org5092755">2.12. List of Static Analysis Tools                                       analysis</a></li>
<li><a href="#orge090d32">2.13. PHP: Testing Legacy Applications                  Chris Hartjes     testing - PHPUnit</a></li>
<li><a href="#orgbedc10d">2.14. Programming Foundations: Test-Driven Development  Simon Allardice   testing - TDD</a></li>
<li><a href="#org96dd7ac">2.15. Refactoring 101                                   Adam Culp         refactoring</a></li>
<li><a href="#org330ddd2">2.16. Refactoring Legacy Code                           Patkós Csaba      refactoring</a></li>
<li><a href="#org4faa2e5">2.17. Refactoring Legacy Code                           Adam Culp         refactoring</a></li>
<li><a href="#org6687842">2.18. Refactoring to Collections                        Adam Wathan       collections</a></li>
<li><a href="#org7116cc6">2.19. Solving the N+1 Problem                           Paul M. Jones     database</a></li>
<li><a href="#orge737730">2.20. Steps Toward Modernizing a Legacy Codebase        Paul M. Jones     refactoring</a></li>
<li><a href="#org57899f3">2.21. Techniques for Refactoring Code                   Patkós Csaba      refactoring</a></li>
<li><a href="#orga4a083f">2.22. Extremely Defensive PHP Programming Marco Pivetta (Ocramius)</a></li>
<li><a href="#orgd05593f">2.23. Doctrine Best Practices Marco Pivetta (Ocramius)</a></li>
<li><a href="#org108a653">2.24. Programming Foundations: Refactoring Code  Simon Allardice  refactoring</a></li>
<li><a href="#org48ea4c8">2.25. PHPUnit: Testing with a Bite</a>
<ul>
<li><a href="#org51f2e36">2.25.1. 3 Types of Tests</a></li>
<li><a href="#org1946fee">2.25.2. How much should I be testing my code?</a></li>
<li><a href="#org1cb7d29">2.25.3. TDD</a></li>
</ul>
</li>
<li><a href="#org588c414">2.26. Behavior-Driven Development</a>
<ul>
<li><a href="#org4833cde">2.26.1. The 5 Ws</a></li>
<li><a href="#org0e939bb">2.26.2. Throw Over the Wall</a></li>
<li><a href="#org671db3b">2.26.3. After BDD Transformation</a></li>
<li><a href="#orge91d1eb">2.26.4. Gherkin Syntax</a></li>
<li><a href="#orgdb3e640">2.26.5. Example</a></li>
<li><a href="#org4d5f989">2.26.6. Test Automation</a></li>
<li><a href="#org5a55f5c">2.26.7. Living Documentation</a></li>
<li><a href="#orgbb97ce1">2.26.8. Further</a></li>
<li><a href="#org15513b0">2.26.9. Notes</a></li>
</ul>
</li>
<li><a href="#org175c4ab">2.27. Test Automation Foundations</a></li>
<li><a href="#org07c05c2">2.28. Clean Application Development Adam Culp</a></li>
<li><a href="#org2def10b">2.29. https://cleancoders.com/videos</a></li>
<li><a href="#org862dba5">2.30. Design Patterns PHP</a></li>
<li><a href="#orgfd37ba1">2.31. Agile is Dead • Pragmatic Dave Thomas</a></li>
<li><a href="#orgf2b936d">2.32. Summary of "Refactoring: Improving the Design of Existing Code" by Martin Fowler</a></li>
<li><a href="#orgd22e21e">2.33. Greg Young - The art of destroying software</a></li>
<li><a href="#org09e7ea9">2.34. Symfony</a>
<ul>
<li><a href="#orge93cdaf">2.34.1. https://github.com/ThomasBerends/symfony-certification-preparation-list</a></li>
<li><a href="#orgb1c99f3">2.34.2. Upgrade to Symfony4 and Flex!</a></li>
</ul>
</li>
<li><a href="#org4d1602c">2.35. DateTime</a></li>
<li><a href="#orgffe75e3">2.36. Behat</a>
<ul>
<li><a href="#org0a2b227">2.36.1. BDD, Behat, Mink and other Wonderful Things</a></li>
<li><a href="#org1f0696a">2.36.2. Tame Behat with the Brand New Symfony Extension</a></li>
<li><a href="#orgc90d66d">2.36.3. Behat from zero to hero - A practical guide to symfony integration and usage</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org0ec0011">3. Books</a>
<ul>
<li><a href="#org1f77ae4">3.1. Andrew Hunt, David Thomas - The Pragmatic Programmer: From Journeyman to Master</a></li>
<li><a href="#org73c35d5">3.2. William J. Brown, Raphael C. Malveau, Hays W. "Skip" McCormick, Thomas J. Mowbray Antipatterns. Refactoring Software, Archtectures and Projects in Crisis	1998</a></li>
<li><a href="#org9094f26">3.3. Refactoring in Large Software Projects 2006</a></li>
<li><a href="#org6a3fcea">3.4. Phillip A. Laplante, Colin J. Neill	Antipatterns: Identification, Refactoring, and Management 2005</a></li>
<li><a href="#orgde1afde">3.5. Fifty Quick Ideas To Improve Your Tests tests</a></li>
<li><a href="#org8e6d7f7">3.6. Growing Object-Oriented Software, Guided by Tests</a></li>
<li><a href="#org2070eb5">3.7. Working Effectively with Unit Tests</a></li>
<li><a href="#orga91ba77">3.8. Scalable Internet Architectures</a></li>
<li><a href="#orgb914ef1">3.9. SQL for Smarties: Advanced SQL Programming	database 2005</a></li>
<li><a href="#orgc769e49">3.10. Anthology  The Thoughtworks Anthology - Essays on Software Technology and Innovation 2008</a></li>
<li><a href="#org32318a1">3.11. Anthology  The ThoughtWorks Anthology 2 - More Essays on Software Technology and Innovation 2012</a></li>
<li><a href="#org50278ea">3.12. Beck, Kent	Extreme Programming Explained: Embrace Change	overall	can be read 1999</a></li>
<li><a href="#orgf6153b1">3.13. Bernstein, David Scott Beyond Legacy Code 2015 Want to read</a></li>
<li><a href="#org05c751f">3.14. Bhargava, Aditya	Grokking Algorithms: An illustrated guide for programmers and other curious people</a></li>
<li><a href="#org43381f1">3.15. Bloch, Joshua	Effective Java	2018</a></li>
<li><a href="#orgcb368bf">3.16. Buenosvinos, Carlos	Domain-Driven Design in PHP 2016</a></li>
<li><a href="#orgd5b5494">3.17. Bugayenko, Yegor	Elegant Objects	2016</a></li>
<li><a href="#org071a25d">3.18. Fowler, Martin	Patterns of Enterprise Application Architecture 2012</a></li>
<li><a href="#org17046f2">3.19. Francesco Trucchia, Jacopo Romei	Pro PHP Refactoring 2010</a></li>
<li><a href="#org2aa9862">3.20. Ganesh, Samarthyam; Tushar, Sharma	Refactoring for Software Design Smells: Managing Technical Debt 2015</a></li>
<li><a href="#orgb6a34d8">3.21. Halladay, Steve Principle-Based Refactoring: Learning Software Design Principles by Applying Refactoring Rules 2012</a></li>
<li><a href="#org1d78549">3.22. Jones, Paul M. Modernizing Legacy Apps In PHP 2014</a></li>
<li><a href="#org3fc61ff">3.23. Junade, Ali	Mastering PHP Design Patterns 2016</a></li>
<li><a href="#orgb15493d">3.24. Karwin, Bill SQL Antipatterns - Avoiding The Pitfalls of Database Programming 2010</a></li>
<li><a href="#org08845f9">3.25. Kerievsky, Joshua	Refactoring to Patterns	2004</a></li>
<li><a href="#orgce0052e">3.26. Rahman, Mizanur	PHP 7 Data Structures and Algorithms 2017</a></li>
<li><a href="#orgec584e4">3.27. Scott J Ambler and Pramod J. Sadalage Refactoring Databases - Evolutionary Database Design 2006</a></li>
<li><a href="#orgc2b94d5">3.28. Stephane Faroult, Pascal L'Hermite	Refactoring SQL Application 2008</a></li>
<li><a href="#org974668d">3.29. Tornhill, Adam	Your Code as a Crime Scene - Use Forensic Techniques to Arrest Defects, Bottlenecks, and Bad Design in Your Programs 2015</a></li>
<li><a href="#orgc611361">3.30. West, David Object Thinking  2004</a></li>
<li><a href="#org68d6221">3.31. Back-end Performance</a></li>
<li><a href="#org0ea557a">3.32. <span class="todo TODO">TODO</span> xUnit Test Patterns - Refactoring Test Code</a></li>
<li><a href="#orgca337de">3.33. Object Design Style Guide Matthias Noback</a></li>
<li><a href="#org30718e0">3.34. Build APIs You Won't Hate</a></li>
<li><a href="#orgb259f1f">3.35. McConnel, Steve "Code Complete 2"</a></li>
<li><a href="#orgb6111b7">3.36. Joe Celko’s Trees and Hierarchies in SQL for Smarties</a></li>
<li><a href="#org86d624f">3.37. Wake, William C.; Refactoring Workbook; 2003</a>
<ul>
<li><a href="#org3a50153">3.37.1. https://xp123.com/articles/refactoring-workbook/</a></li>
</ul>
</li>
<li><a href="#org0022d03">3.38. Feathers, Michael; Working Effectively with Legacy Code; 2005</a></li>
<li><a href="#orgca171c8">3.39. Fowler, Martin; Refactoring: Improving the Design of Existing Code; 2018</a></li>
<li><a href="#orgabff5f9">3.40. Martin, Robert C.; Clean Code: A Handbook of Agile Software Craftsmanship; 2009</a>
<ul>
<li><a href="#org5a49f2a">3.40.1. Naming</a></li>
</ul>
</li>
<li><a href="#org9919138">3.41. Martin, Robert C.; Agile Software Development: Principles, Patterns, and Practices; 2002</a></li>
<li><a href="#orgeeef5f0">3.42. Design It!: From Programmer to Software Architect (The Pragmatic Programmers) 1st Edition by Michael Keelin</a></li>
<li><a href="#org6a24104">3.43. Mastering the SPL Library</a></li>
<li><a href="#org5503ffd">3.44. Zandstra, Matt "PHP Objects, Patterns, and Practice" 2008</a></li>
<li><a href="#orga049114">3.45. <span class="todo TODO">TODO</span> The Psychology of Computer Programming</a></li>
</ul>
</li>
<li><a href="#org3adb07f">4. Smells</a>
<ul>
<li><a href="#orgd9c5cf0">4.1. Booch’s fundamental design principles</a>
<ul>
<li><a href="#orgb609a87">4.1.1. abstraction</a></li>
<li><a href="#org7ebb9d5">4.1.2. encapsulation</a></li>
<li><a href="#orga11025e">4.1.3. modularization</a></li>
<li><a href="#org7c78850">4.1.4. hierarchy</a></li>
</ul>
</li>
<li><a href="#orgf99197a">4.2. Normal</a>
<ul>
<li><a href="#org1d1e796">4.2.1. Alias Duplicates</a></li>
<li><a href="#orgb2fa810">4.2.2. Alternative Classes With Different Interfaces</a></li>
<li><a href="#org2224f3e">4.2.3. Comments</a></li>
<li><a href="#orga79b463">4.2.4. Data Class</a></li>
<li><a href="#orgee7a311">4.2.5. Data Clumps</a></li>
<li><a href="#org88ff691">4.2.6. Divergent Change</a></li>
<li><a href="#orgb92cc76">4.2.7. Duplicated Code</a></li>
<li><a href="#org0b0fb0c">4.2.8. Feature Envy</a></li>
<li><a href="#orgd3b8c47">4.2.9. Global Data</a></li>
<li><a href="#org81f3fde">4.2.10. Insider Trading</a></li>
<li><a href="#org4ebfd6d">4.2.11. Large Class</a></li>
<li><a href="#org112ccb7">4.2.12. Lazy Element</a></li>
<li><a href="#orgcd68db0">4.2.13. Long Function</a></li>
<li><a href="#orgeff67be">4.2.14. Long Parameter List</a></li>
<li><a href="#org06f9b06">4.2.15. Loops</a></li>
<li><a href="#org9832b84">4.2.16. Message Chains</a></li>
<li><a href="#orge085586">4.2.17. Middle Man</a></li>
<li><a href="#orgd00fd5b">4.2.18. Mysterious Name</a></li>
<li><a href="#org29627dc">4.2.19. Primitive Obsession</a></li>
<li><a href="#org9eaf155">4.2.20. Refused Bequest</a></li>
<li><a href="#org1c22683">4.2.21. Repeated Switches</a></li>
<li><a href="#org0dc11ab">4.2.22. Shotgun Surgery</a></li>
<li><a href="#org3a06276">4.2.23. Speculative Generality</a></li>
<li><a href="#org03cb4aa">4.2.24. Temporary Field</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org82ad924">5. Database</a>
<ul>
<li><a href="#org2b8acf7">5.1. config</a>
<ul>
<li><a href="#org24cf1c3">5.1.1. this works</a></li>
</ul>
</li>
<li><a href="#orgec36033">5.2. commmands</a></li>
<li><a href="#org2c71cbd">5.3. Stuctures</a>
<ul>
<li><a href="#orgeea3253">5.3.1. Hierarchical database model</a></li>
</ul>
</li>
<li><a href="#org4fe5d21">5.4. Refactorings</a>
<ul>
<li><a href="#orgd9756b4">5.4.1. Add CRUD Methods</a></li>
<li><a href="#orga096b8b">5.4.2. Add Foreign Key Constraint</a></li>
<li><a href="#org5594884">5.4.3. Add Lookup Table</a></li>
<li><a href="#org9032f37">5.4.4. Add Mirror Table</a></li>
<li><a href="#org47db2ad">5.4.5. Add Parameter</a></li>
<li><a href="#orgc108dc4">5.4.6. Add Read Method</a></li>
<li><a href="#org54ba6fe">5.4.7. Add Trigger For Calculated Column</a></li>
<li><a href="#org468d3de">5.4.8. Apply Standard Codes</a></li>
<li><a href="#org33aad66">5.4.9. Apply Standard Type</a></li>
<li><a href="#orgf644635">5.4.10. Consolidate Conditional Expression</a></li>
<li><a href="#org56dfd5c">5.4.11. Consolidate Key Strategy</a></li>
<li><a href="#org0410862">5.4.12. Decompose Conditional</a></li>
<li><a href="#org85d7ac3">5.4.13. Drop Column</a></li>
<li><a href="#org828d62d">5.4.14. Drop Column Constraint</a></li>
<li><a href="#org6d22b46">5.4.15. Drop Default Value</a></li>
<li><a href="#org837e3f6">5.4.16. Drop Foreign Key Constraint</a></li>
<li><a href="#org400a4ba">5.4.17. Drop Non-Nullable</a></li>
<li><a href="#orge9671a2">5.4.18. Drop Table</a></li>
<li><a href="#orgca7eddd">5.4.19. Drop View</a></li>
<li><a href="#orgb026f24">5.4.20. Encapsulate Table With View</a></li>
<li><a href="#orgf183ab0">5.4.21. Extract Method</a></li>
<li><a href="#orgc8ecbd8">5.4.22. Introduce Calculated Column</a></li>
<li><a href="#org988c0e0">5.4.23. Introduce Calculation Method</a></li>
<li><a href="#orgf3cfb88">5.4.24. Introduce Cascading Delete</a></li>
<li><a href="#orgead3d98">5.4.25. Introduce Column Constraint</a></li>
<li><a href="#orgfc566eb">5.4.26. Introduce Common Format</a></li>
<li><a href="#orgdf12af0">5.4.27. Introduce Default Value</a></li>
<li><a href="#org22ebe82">5.4.28. Introduce Hard Delete</a></li>
<li><a href="#org4ba3e88">5.4.29. Introduce Index</a></li>
<li><a href="#orgfa1c8c8">5.4.30. Introduce New Column</a></li>
<li><a href="#org1520e43">5.4.31. Introduce New Table</a></li>
<li><a href="#orgad9bba1">5.4.32. Introduce Read-Only Table</a></li>
<li><a href="#orgcbe8a45">5.4.33. <span class="done DONE">DONE</span> Introduce Soft Delete</a></li>
<li><a href="#orgfdb5f45">5.4.34. Introduce Surrogate Key</a></li>
<li><a href="#orgb02a25c">5.4.35. Introduce Trigger For History</a></li>
<li><a href="#orga4ca752">5.4.36. Introduce Variable</a></li>
<li><a href="#org812e51e">5.4.37. Introduce View</a></li>
<li><a href="#org9859231">5.4.38. Make Column Non-Nullable</a></li>
<li><a href="#orgf3950b1">5.4.39. Merge Columns</a></li>
<li><a href="#orgf3d8527">5.4.40. Merge Tables</a></li>
<li><a href="#orgca98c4b">5.4.41. Migrate Method From Database</a></li>
<li><a href="#orgcd1144d">5.4.42. Migrate Method To Database</a></li>
<li><a href="#orgb1d9420">5.4.43. Move Column</a></li>
<li><a href="#org7a612a5">5.4.44. Move Data</a></li>
<li><a href="#org0abad4e">5.4.45. Parameterize Method</a></li>
<li><a href="#org9eccfb1">5.4.46. Remove Control Flag</a></li>
<li><a href="#orgfd682b8">5.4.47. Remove Middle Man</a></li>
<li><a href="#orgf341ab4">5.4.48. Remove Parameter</a></li>
<li><a href="#orgb4e46f9">5.4.49. Rename Column</a></li>
<li><a href="#org6767819">5.4.50. Rename Method</a></li>
<li><a href="#org0700529">5.4.51. Rename Table</a></li>
<li><a href="#org553e4c5">5.4.52. Rename View</a></li>
<li><a href="#org2b1e7ac">5.4.53. Reorder Parameters</a></li>
<li><a href="#orgd6a5b01">5.4.54. Replace Column</a></li>
<li><a href="#org0335126">5.4.55. Replace LOB With Table</a></li>
<li><a href="#orgab88853">5.4.56. Replace Literal With Table Lookup</a></li>
<li><a href="#orgf653d76">5.4.57. Replace Method(s) With View</a></li>
<li><a href="#org29396e9">5.4.58. Replace Nested Conditional With Guard Clauses</a></li>
<li><a href="#org1619958">5.4.59. Replace One-To-Many With Associative Table</a></li>
<li><a href="#org9538a8b">5.4.60. Replace Parameter With Explicit Methods</a></li>
<li><a href="#org5735fca">5.4.61. Replace Surrogate Key With Natural Key</a></li>
<li><a href="#org088e8a5">5.4.62. Replace Type Code With Property Flags</a></li>
<li><a href="#orgd66fe1c">5.4.63. Replace View With Method(s)</a></li>
<li><a href="#orgb1ee254">5.4.64. Split Column</a></li>
<li><a href="#org54087aa">5.4.65. Split Table</a></li>
<li><a href="#orge3f3eb5">5.4.66. Split Temporary Variable</a></li>
<li><a href="#org01d1e68">5.4.67. Substitute Algorithm</a></li>
<li><a href="#orgc52e769">5.4.68. Update Data</a></li>
<li><a href="#orgefe5839">5.4.69. Use Official Data Source</a></li>
</ul>
</li>
<li><a href="#orgf96d81e">5.5. NoSQL</a>
<ul>
<li><a href="#orgdb7e004">5.5.1. Understanding NoSQL</a></li>
</ul>
</li>
<li><a href="#org06e62a7">5.6. MySQL vs. PostgreSQL</a></li>
<li><a href="#org8f07236">5.7. Dictionary</a></li>
<li><a href="#org234a8be">5.8. ACID</a>
<ul>
<li><a href="#org8f916b4">5.8.1. Atomicity</a></li>
<li><a href="#org5e938cf">5.8.2. Consistency</a></li>
<li><a href="#orgdbeb7ed">5.8.3. Isolation</a></li>
<li><a href="#org2fa3e5f">5.8.4. Durability</a></li>
</ul>
</li>
<li><a href="#orgaaad8b9">5.9. Links</a></li>
<li><a href="#org347b560">5.10. actions</a>
<ul>
<li><a href="#orgb810b94">5.10.1. Add Auto-Increment ID to existing table?</a></li>
<li><a href="#orgeeb5fa3">5.10.2. How to change collation of a column?</a></li>
<li><a href="#orga118649">5.10.3. views</a></li>
<li><a href="#orgc55889a">5.10.4. copy</a></li>
<li><a href="#org0821523">5.10.5. dump</a></li>
<li><a href="#org6435e1e">5.10.6. indexes</a></li>
<li><a href="#org01a5b95">5.10.7. add foreign key</a></li>
</ul>
</li>
<li><a href="#orgda4f93b">5.11. ORM</a>
<ul>
<li><a href="#org30ff0ec">5.11.1. Doctrine</a></li>
<li><a href="#org05de204">5.11.2. Benchmark</a></li>
<li><a href="#org41a49a9">5.11.3. Notes</a></li>
</ul>
</li>
<li><a href="#org9cb44ac">5.12. Mysqli</a></li>
<li><a href="#orgf145a3d">5.13. SLOW QUERY LOG</a></li>
<li><a href="#org14d62b2">5.14. int vs varchar id</a></li>
<li><a href="#orgdd66ff6">5.15. Information Schema</a></li>
<li><a href="#org67656a6">5.16. Count</a></li>
<li><a href="#orgd739691">5.17. Benchmark</a>
<ul>
<li><a href="#org5926850">5.17.1. Percona Monitor</a></li>
</ul>
</li>
<li><a href="#orge47758c">5.18. testing</a>
<ul>
<li><a href="#orga287d34">5.18.1. compare output of 2 queries</a></li>
</ul>
</li>
<li><a href="#orga7c6460">5.19. cardinality</a></li>
<li><a href="#orgcbe33e0">5.20. SQL<sub>FOUND</sub><sub>ROWS</sub></a></li>
<li><a href="#org87128d3">5.21. Collation key length</a></li>
<li><a href="#orgcfe9bfc">5.22. Not Empty</a></li>
<li><a href="#org36f62f2">5.23. import/export</a>
<ul>
<li><a href="#org88c08f7">5.23.1. import</a></li>
<li><a href="#org6602577">5.23.2. export</a></li>
</ul>
</li>
<li><a href="#orgef69521">5.24. notes</a></li>
<li><a href="#org7c20553">5.25. Query</a>
<ul>
<li><a href="#orgf896667">5.25.1. NOT IN</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgdd4a176">6. Codebases</a>
<ul>
<li><a href="#org3cdf8d3">6.1. Video Rental Shop</a></li>
<li><a href="#orgf64f085">6.2. Legacy Code Retreat - Trivia Game</a></li>
<li><a href="#org595feaa">6.3. Legacy Code Retreat - Trivia Game codebase</a></li>
</ul>
</li>
<li><a href="#org9ef90c4">7. Definitions</a>
<ul>
<li><a href="#org0be4183">7.1. Anemic Domain Model</a>
<ul>
<li><a href="#org8f1b4ac">7.1.1. use</a></li>
</ul>
</li>
<li><a href="#org0882e00">7.2. Rich Domain Model</a>
<ul>
<li><a href="#orgd6d93c7">7.2.1. use</a></li>
</ul>
</li>
<li><a href="#org084d160">7.3. Characterization Test</a></li>
<li><a href="#org0a3d594">7.4. Polymorphism</a></li>
<li><a href="#orga54968a">7.5. Parameter vs. Argument</a></li>
<li><a href="#orgd017c36">7.6. Principle vs. Practices</a></li>
<li><a href="#orgbfedf4d">7.7. Logical operators</a></li>
<li><a href="#org245b64e">7.8. Value Object</a></li>
<li><a href="#orgfcff22a">7.9. Service</a></li>
<li><a href="#org25c8380">7.10. Technical Dept</a></li>
<li><a href="#org3be7681">7.11. Dead Code</a>
<ul>
<li><a href="#org7840c31">7.11.1. Links</a></li>
<li><a href="#orgb3d46bf">7.11.2. Tombstone</a></li>
</ul>
</li>
<li><a href="#org35a8c35">7.12. Bus Factor</a></li>
</ul>
</li>
<li><a href="#orgb61c498">8. Practices</a>
<ul>
<li><a href="#org8337751">8.1. Always Use 'declare(stric<sub>types</sub>=1)'</a></li>
<li><a href="#org7766785">8.2. Avoid Else, Return Early (Guard Clause)</a></li>
<li><a href="#org7ea45be">8.3. Avoid Negative Conditionals</a></li>
<li><a href="#org05ecde7">8.4. Don't Use 'clone'</a>
<ul>
<li><a href="#org70dafc1">8.4.1. https://dcsg.me/articles/dont-clone-your-php-objects-deepcopy-them/</a></li>
<li><a href="#org39ea4eb">8.4.2. <span class="todo TODO">TODO</span> show example with Doctrine</a></li>
</ul>
</li>
<li><a href="#orgb872005">8.5. Don't Use 'else if'</a></li>
<li><a href="#orgb0d0d52">8.6. Don't Use Globals</a></li>
<li><a href="#org43e9371">8.7. Don't Use Magic Numbers</a></li>
<li><a href="#orgfc4c7e0">8.8. Don't Use Method Chaining Syntax</a></li>
<li><a href="#org7526dd7">8.9. Don't Use Optional Dependencies</a></li>
<li><a href="#org56e327c">8.10. Don't Use Switch Parameter</a></li>
<li><a href="#orgc5cc806">8.11. Don't Use Traits</a></li>
<li><a href="#orgcb724f4">8.12. Eliminate or Reduce Number of Comments</a></li>
<li><a href="#orgc3025fc">8.13. Eliminate or Reduce Number of Parameters</a></li>
<li><a href="#org53fa5a1">8.14. Eliminate or Reduce Number of Setters</a></li>
<li><a href="#orga8fe864">8.15. Make Class Constants &amp; Variables Always Private</a></li>
<li><a href="#orgfbf9a15">8.16. Make Classes Always Final</a></li>
<li><a href="#org170d27f">8.17. Sprout Class</a></li>
<li><a href="#orgc3b6d48">8.18. Sprout Method</a></li>
<li><a href="#orge70ba8f">8.19. Use parentheses</a></li>
<li><a href="#org9b16517">8.20. Wrap Class</a></li>
<li><a href="#orge335ecd">8.21. Wrap Method</a></li>
<li><a href="#org3480751">8.22. Naming</a>
<ul>
<li><a href="#org61b2db1">8.22.1. variable</a></li>
<li><a href="#org9424a1b">8.22.2. method</a></li>
<li><a href="#org75f34c3">8.22.3. snake<sub>case</sub></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org1b9ddb1">9. Principles</a>
<ul>
<li><a href="#org1e8ad4f">9.1. SOLID</a>
<ul>
<li><a href="#org3dfa7ec">9.1.1. Single Responsibilty (SRP)</a></li>
<li><a href="#org31bf298">9.1.2. Open/Closed Principle (OCP)</a></li>
<li><a href="#orge7dad5d">9.1.3. Liskov Substitution (LSP)</a></li>
<li><a href="#org6eb10d9">9.1.4. Interface Segregation (ISP)</a></li>
<li><a href="#org1a97412">9.1.5. Dependency Inversion (DIP)</a></li>
</ul>
</li>
<li><a href="#org6021786">9.2. GRASP General Responsibility Assignment Software Patterns</a></li>
<li><a href="#org617fafa">9.3. Design</a>
<ul>
<li><a href="#org6bd4f82">9.3.1. Separation of Concerns (SoC)</a></li>
<li><a href="#org2533834">9.3.2. Big Ball of Mud</a></li>
<li><a href="#orgaa1d378">9.3.3. Command Query Separation (CQS)</a></li>
<li><a href="#orgdc91418">9.3.4. Composition Over Inheritance</a></li>
<li><a href="#org8b72254">9.3.5. YAGNI</a></li>
<li><a href="#orge418968">9.3.6. Don't Repeat Yourself (DRY)</a></li>
<li><a href="#orgf92d9cd">9.3.7. The Law of Demeter (LoD)</a></li>
</ul>
</li>
<li><a href="#orgcbfaf89">9.4. Architectural</a>
<ul>
<li><a href="#orgc91a5f8">9.4.1. Model-View-Controller</a></li>
<li><a href="#orge5aadb2">9.4.2. Api</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org83b0c87">10. Paradigm</a>
<ul>
<li><a href="#org8de3b9b">10.1. Imperative</a>
<ul>
<li><a href="#orga0091d0">10.1.1. Procedural</a></li>
<li><a href="#orgd19c6aa">10.1.2. OOP</a></li>
</ul>
</li>
<li><a href="#orgcf3440d">10.2. Declarative</a>
<ul>
<li><a href="#orgd345247">10.2.1. Functional Programming</a></li>
</ul>
</li>
<li><a href="#orga9d18ea">10.3. Structured</a></li>
<li><a href="#orgdbf81b3">10.4. Non-structured</a></li>
<li><a href="#orge125802">10.5. Links</a>
<ul>
<li><a href="#org251e7ea">10.5.1. 4 Programming Paradigms In 40 Minutes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgc9c34f1">11. Config</a></li>
<li><a href="#org6181478">12. Patterns</a>
<ul>
<li><a href="#org24b6f5c">12.1. Software design patterns</a>
<ul>
<li><a href="#orgcd98f1d">12.1.1. Creational</a></li>
<li><a href="#orgaf4ae93">12.1.2. Structural</a></li>
<li><a href="#org861b7d4">12.1.3. Behavioral</a></li>
<li><a href="#org51a5bc3">12.1.4. Concurrency</a></li>
</ul>
</li>
<li><a href="#org6dcdf67">12.2. Architectural patterns</a>
<ul>
<li><a href="#org9d7c4e6">12.2.1. Active Record</a></li>
<li><a href="#org3fb54b5">12.2.2. Data Transfer Object DTO</a></li>
<li><a href="#org9be1f59">12.2.3. ADR</a></li>
<li><a href="#orgc6d6ef6">12.2.4. MVC</a></li>
<li><a href="#org3c9b0b7">12.2.5. MVVM</a></li>
</ul>
</li>
<li><a href="#org3801f1e">12.3. Antipatterns</a>
<ul>
<li><a href="#org8bb6818">12.3.1. God objects</a></li>
<li><a href="#orgad84b7e">12.3.2. Singleton</a></li>
<li><a href="#org71d9175">12.3.3. Database as IPC</a></li>
<li><a href="#orgb324d8e">12.3.4. Is storing types in the database an anti pattern?</a></li>
</ul>
</li>
<li><a href="#orgfea7355">12.4. Links</a></li>
<li><a href="#orgbd02445">12.5. Is it a pattern?</a>
<ul>
<li><a href="#org3912254">12.5.1. Cache</a></li>
</ul>
</li>
<li><a href="#orgf84001a">12.6. Enum</a></li>
<li><a href="#orga0c1549">12.7. Errors</a></li>
</ul>
</li>
<li><a href="#orgb782b12">13. Tests</a>
<ul>
<li><a href="#org767a0fa">13.1. Fixtures</a></li>
<li><a href="#org68c033a">13.2. Links</a></li>
<li><a href="#org2a565ae">13.3. TDD</a></li>
<li><a href="#org33440b5">13.4. Behat</a>
<ul>
<li><a href="#org7fba2c2">13.4.1. install</a></li>
<li><a href="#org56acc67">13.4.2. config</a></li>
</ul>
</li>
<li><a href="#org53ebbfa">13.5. Notes</a></li>
<li><a href="#org1e80568">13.6. naming</a></li>
<li><a href="#org05efc32">13.7. anitpatterns</a></li>
<li><a href="#org3834dd7">13.8. Why?</a>
<ul>
<li><a href="#orgf25bc66">13.8.1. Less coupled code</a></li>
</ul>
</li>
<li><a href="#org54373de">13.9. PHPUnit</a>
<ul>
<li><a href="#org7b5ca5a">13.9.1. xdebug</a></li>
<li><a href="#org4083bf3">13.9.2. install</a></li>
<li><a href="#orgef6a526">13.9.3. naming</a></li>
<li><a href="#org3d00729">13.9.4. Types of Test Doubles:</a></li>
<li><a href="#orga6bde00">13.9.5. Static vs. Non-Static Usage of Assertion Methods</a></li>
</ul>
</li>
<li><a href="#org976c310">13.10. Codeception</a></li>
<li><a href="#org42c8fc9">13.11. Mockery</a></li>
<li><a href="#orge4f7baf">13.12. structure/organize tests</a></li>
</ul>
</li>
<li><a href="#org483efa4">14. Tools</a>
<ul>
<li><a href="#org3926f69">14.1. Frameworks</a>
<ul>
<li><a href="#orga5dd2c4">14.1.1. Symfony</a></li>
<li><a href="#orgabb0fc8">14.1.2. CodeIgniter</a></li>
<li><a href="#org1a95a7b">14.1.3. Laravel</a></li>
<li><a href="#org9811560">14.1.4. Cora</a></li>
<li><a href="#org8822ae3">14.1.5. Links</a></li>
</ul>
</li>
<li><a href="#org5c8d858">14.2. Code Analize</a>
<ul>
<li><a href="#orgbee28a9">14.2.1. Code City</a></li>
<li><a href="#org4a16e28">14.2.2. https://www.phpmetrics.org/</a></li>
<li><a href="#org88dc89d">14.2.3. phploc</a></li>
<li><a href="#org4fb5c02">14.2.4. rector</a></li>
<li><a href="#org9ba5133">14.2.5. phpinsights</a></li>
</ul>
</li>
<li><a href="#orgb825735">14.3. Composer</a>
<ul>
<li><a href="#orge2d2420">14.3.1. when compsoer update ?</a></li>
</ul>
</li>
<li><a href="#org255a08c">14.4. Git</a></li>
<li><a href="#org69ab0c5">14.5. Twig</a>
<ul>
<li><a href="#org0d0d067">14.5.1. comma</a></li>
</ul>
</li>
<li><a href="#orgd4b0804">14.6. Linux</a></li>
</ul>
</li>
<li><a href="#org3b3a27b">15. Style</a></li>
<li><a href="#org660a992">16. Jokes</a></li>
<li><a href="#org2232c55">17. Metrics</a>
<ul>
<li><a href="#org2dfdd1f">17.1. Cyclomatic Complexity Number (CCN)</a></li>
<li><a href="#orgf89aa3a">17.2. NPath Complexity</a></li>
</ul>
</li>
<li><a href="#orge29f31d">18. Notepad</a>
<ul>
<li><a href="#org49e6874">18.1. Routing</a>
<ul>
<li><a href="#org729e659">18.1.1. yml vs. annotations</a></li>
<li><a href="#orga471afe">18.1.2. benchmarks</a></li>
</ul>
</li>
<li><a href="#orga6bfe5a">18.2. Notes</a></li>
<li><a href="#orgc765f96">18.3. Mario</a></li>
</ul>
</li>
<li><a href="#org65923c1">19. Data Structures</a>
<ul>
<li><a href="#org72f7a1e">19.1. Array</a>
<ul>
<li><a href="#org7e94fd7">19.1.1. Avoid complex arrays</a></li>
<li><a href="#org1167646">19.1.2. How does PHP 'foreach' actually work?</a></li>
<li><a href="#orge13cc49">19.1.3. Why you should use array functions instead of basic loops</a></li>
<li><a href="#orgbe46f51">19.1.4. array is empty</a></li>
<li><a href="#org4ed2dc7">19.1.5. PHP Sort Array By SubArray Value</a></li>
</ul>
</li>
<li><a href="#org685db75">19.2. String</a>
<ul>
<li><a href="#orgde2cc50">19.2.1. empty</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgc8a1903">20. Functions Core</a>
<ul>
<li><a href="#org33e6a5b">20.1. SPL Library</a></li>
<li><a href="#org8be1123">20.2. As opposed with isset(), property<sub>exists</sub>() returns TRUE even if the property has the value NULL.</a></li>
<li><a href="#orgfe8f4f5">20.3. isset() vs array<sub>key</sub><sub>exist</sub></a></li>
<li><a href="#orgb36b024">20.4. foreach vs array<sub>map</sub></a></li>
<li><a href="#org7f377af">20.5. create an array</a></li>
<li><a href="#orged823e9">20.6. foreach</a></li>
<li><a href="#org1e44301">20.7. array</a>
<ul>
<li><a href="#org9865d38">20.7.1. flatten</a></li>
<li><a href="#org73cf0c3">20.7.2. sort by value of a given key</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgf0edae2">21. Links</a></li>
<li><a href="#orgef7262a">22. Problems</a>
<ul>
<li><a href="#orgdf49bc8">22.1. PHP Add comma to every item but last one</a></li>
</ul>
</li>
<li><a href="#org55c4f7e">23. Quirks</a>
<ul>
<li><a href="#org7f14dbb">23.1. More parameter than expected: no error in PHP?</a></li>
<li><a href="#orgf18c563">23.2. Adding float numbers</a></li>
</ul>
</li>
<li><a href="#org21eef4d">24. Security</a>
<ul>
<li><a href="#org58acb22">24.1. Cross-Site Request Forgery CSRF</a>
<ul>
<li><a href="#org8d84051">24.1.1. GET</a></li>
<li><a href="#org0355eca">24.1.2. POST</a></li>
</ul>
</li>
<li><a href="#org6186dde">24.2. Cross-Site Scripting (XSS)</a></li>
<li><a href="#org58d492c">24.3. Links</a></li>
</ul>
</li>
<li><a href="#org0dbf947">25. Interface and User Experience</a>
<ul>
<li><a href="#org7592c22">25.1. Redirect after a POST if that POST was successful, to prevent a refresh from submitting again.</a></li>
</ul>
</li>
<li><a href="#org3dd8860">26. Topics</a>
<ul>
<li><a href="#org5c07370">26.1. Rewrite</a></li>
<li><a href="#org65dc57e">26.2. Crawler</a></li>
<li><a href="#org3a8c2b9">26.3. Namespace</a></li>
<li><a href="#orgc4631bf">26.4. ReactPHP</a></li>
<li><a href="#orge6af391">26.5. PHP FPM</a></li>
<li><a href="#orgb16236f">26.6. Nginx</a></li>
</ul>
</li>
<li><a href="#org0af3f9c">27. Performance</a>
<ul>
<li><a href="#org3c8930c">27.1. Apache Bench</a></li>
<li><a href="#org449c9d4">27.2. Baseline Performance</a>
<ul>
<li><a href="#org55dac41">27.2.1. Stock install (Amazon EC2 Large, Ubuntu, Apache, PHP, MySQL)</a></li>
<li><a href="#org645afb3">27.2.2. Static index.html (Hello World!)</a></li>
<li><a href="#orgea86984">27.2.3. Dynamic index.php (&lt;?php echo 'Hello World!';)</a></li>
<li><a href="#org13621a0">27.2.4. Database connect (PDO)</a></li>
<li><a href="#org1adc86e">27.2.5. Database connect, query, and fetch (PDO)</a></li>
<li><a href="#org7131383">27.2.6. Table</a></li>
</ul>
</li>
<li><a href="#org417e5f2">27.3. CRUD vs. BREAD</a></li>
<li><a href="#orgb8962fe">27.4. N+1 Problem</a>
<ul>
<li><a href="#org007b80d">27.4.1. Single-Query Solution</a></li>
<li><a href="#org0ce3f93">27.4.2. Query-and-Stitch Solution</a></li>
</ul>
</li>
<li><a href="#orgee5331c">27.5. Array vs. StdClass</a></li>
<li><a href="#orga25df3f">27.6. Benchmark</a>
<ul>
<li><a href="#org9b35db0">27.6.1. Fastest way to insert new records where one doesn’t already exist</a></li>
</ul>
</li>
<li><a href="#orgb4b95b3">27.7. micro</a></li>
<li><a href="#org620aec0">27.8. questions</a></li>
<li><a href="#orgd41ab1c">27.9. PHP 7.4 Preload</a></li>
<li><a href="#org78d7013">27.10. Tools</a></li>
</ul>
</li>
<li><a href="#orge77a572">28. About</a></li>
</ul>
</div>
</div>
<p>
1#+SETUPFILE: export/setup/theme-darksun-local.setup
</p>

<div id="outline-container-org59bfe7c" class="outline-2">
<h2 id="org59bfe7c"><span class="section-number-2">1</span> Refactorings</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org841c99e" class="outline-3">
<h3 id="org841c99e"><span class="section-number-3">1.1</span> Add Type-Hint</h3>
<div class="outline-text-3" id="text-1-1">
</div>
<div id="outline-container-org4b34ce4" class="outline-4">
<h4 id="org4b34ce4"><span class="section-number-4">1.1.1</span> If you CAN type-hint, then you MUST type-hint</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
Smell: A method with no type defined parameters or return type declaration
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setNumber</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">number</span>)
{
    <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">number</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">number</span>;
}
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="org467ed3b"></a>Refactor the code<br />
<div class="outline-text-5" id="text-1-1-1-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setNumber</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">number</span>): <span style="color: #ECBE7B;">void</span>
{
    <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">number</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">number</span>;
}
</pre>
</div>
</div>
</li>
<li><a id="org1949bc4"></a>Helper<br />
<div class="outline-text-5" id="text-1-1-1-2">
<p>
<a href="https://github.com/dunglas/phpdoc-to-typehint">phpdoc-to-typehint</a> adds automatically scalar type hints and return types to all functions and methods using existing PHPDoc annotations 
</p>
</div>
</li>
<li><a id="orga14cc0c"></a>Further Reading<br />
<div class="outline-text-5" id="text-1-1-1-3">
<p>
<a href="https://thecodingmachine.io/type-hint-all-the-things">https://thecodingmachine.io/type-hint-all-the-things</a>
<i>** @return Collection|Order[] *</i>
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-orga4f43de" class="outline-4">
<h4 id="orga4f43de"><span class="section-number-4">1.1.2</span> If you are type-hinting an array, you MUST document the array type in a docblock</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
Smell: An array with elements of generic type or method which can throw Exception
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">printUsersNames</span>(<span style="color: #ECBE7B;">array</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">users</span>): <span style="color: #ECBE7B;">void</span>
{
    <span style="color: #51afef;">foreach</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">users</span> <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span>) {
        <span style="color: #51afef;">echo</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getName</span>();
    }
}
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="orgb104deb"></a>Refactor the code<br />
<div class="outline-text-5" id="text-1-1-2-1">
<p>
Add PHPDoc - the Object[] notation in addition to an array type-hint to explain what kind of object is expected
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #83898d;">/**</span>
<span style="color: #83898d;"> * </span><span style="color: #a9a1e1;">@param</span><span style="color: #83898d;"> </span><span style="color: #98be65;">User[]</span><span style="color: #83898d;"> </span><span style="color: #dcaeea;">$</span><span style="color: #dcaeea;">users</span>
<span style="color: #83898d;"> */</span>
<span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">printUsersNames</span>(<span style="color: #ECBE7B;">array</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">users</span>): <span style="color: #ECBE7B;">void</span>
{
    <span style="color: #51afef;">foreach</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">users</span> <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span>) {
        <span style="color: #51afef;">echo</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getName</span>();
    }
}
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org793756f" class="outline-3">
<h3 id="org793756f"><span class="section-number-3">1.2</span> Consolidate Conditional Expression</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Smell: Sequence of conditionals with the same result
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Sale</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">calculateShipping</span>(<span style="color: #ECBE7B;">Customer</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span>)
    {
        <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">isEmployee</span>) <span style="color: #51afef;">return</span> 0;
        <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">isGoldCustomer</span>) <span style="color: #51afef;">return</span> 0;
        <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">isHasACoupon</span>) <span style="color: #51afef;">return</span> 0;
        
        <span style="color: #51afef;">if</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">isUsa</span>) <span style="color: #51afef;">return</span> 10;
        <span style="color: #51afef;">if</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">isEurope</span>) <span style="color: #51afef;">return</span> 20;
    }
}
</pre>
</div>
</div>
<div id="outline-container-orgaeec69d" class="outline-4">
<h4 id="orgaeec69d"><span class="section-number-4">1.2.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-orgff48708" class="outline-4">
<h4 id="orgff48708"><span class="section-number-4">1.2.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
Combine them into a single conditional expression and extract it.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Sale</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">calculateShipping</span>(<span style="color: #ECBE7B;">Customer</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span>): <span style="color: #ECBE7B;">int</span>
    {
       <span style="color: #51afef;">if</span> (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">isFreeShipping</span>()){
           <span style="color: #51afef;">return</span> 0;
       }

        <span style="color: #51afef;">if</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">isUsa</span>) {
            <span style="color: #51afef;">return</span> 10;
        }

        <span style="color: #51afef;">if</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">isEurope</span>) {
            <span style="color: #51afef;">return</span> 20;
        }
    }

    <span style="color: #51afef;">private</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">isFreeShipping</span>(): <span style="color: #ECBE7B;">bool</span>
    {
        <span style="color: #51afef;">return</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">isEmployee</span> || <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">isGoldCustomer</span> || <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">isHasACoupon</span>);
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf3b93eb" class="outline-4">
<h4 id="orgf3b93eb"><span class="section-number-4">1.2.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-org7857ed7" class="outline-3">
<h3 id="org7857ed7"><span class="section-number-3">1.3</span> Consolidate Duplicate Conditional Fragments</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Smell: The same fragment of code is in all branches of a conditional expression.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Sale</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">calculateTotal</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span>)
    {
        <span style="color: #51afef;">if</span> (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">isSpecialDeal</span>()) {
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">total</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span> * 0.95;
            <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">setTotal</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">total</span>);
        }
        <span style="color: #51afef;">else</span> {
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">total</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span> * 0.98;
            <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">setTotal</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">total</span>);
        }
    }
}
</pre>
</div>
</div>
<div id="outline-container-org0df6cc3" class="outline-4">
<h4 id="org0df6cc3"><span class="section-number-4">1.3.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org3c7ca19" class="outline-4">
<h4 id="org3c7ca19"><span class="section-number-4">1.3.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
Move it outside of the expression.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Sale</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">calculateTotal</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span>)
    {
        <span style="color: #51afef;">if</span> (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">isSpecialDeal</span>()) {
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">total</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span> * 0.95;
        }
        <span style="color: #51afef;">else</span> {
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">total</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span> * 0.98;
        }

        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">setTotal</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">total</span>);
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb339978" class="outline-4">
<h4 id="orgb339978"><span class="section-number-4">1.3.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-orgd43e077" class="outline-3">
<h3 id="orgd43e077"><span class="section-number-3">1.4</span> Decompose Conditional</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Smell: Complicated conditional (if-else) statement.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Sale</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">expired_at</span>;
    <span style="color: #51afef;">public</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getAmount</span>()
    {
        <span style="color: #51afef;">if</span>(<span style="color: #a9a1e1;">null</span> !== <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">expired_at</span> &amp;&amp; <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">expired_at</span> &lt; time())
        {
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">interest</span> = 10;
            <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> = <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> + (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> / 100 * <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">interest</span>);
        }
        <span style="color: #51afef;">else</span>
        {
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">discount</span> = 10;
            <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> = <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> - (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> / 100 * <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">discount</span>);
        }
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span>;
    }
}
</pre>
</div>
</div>
<div id="outline-container-orgc678890" class="outline-4">
<h4 id="orgc678890"><span class="section-number-4">1.4.1</span> Write a test that pass</h4>
<div class="outline-text-4" id="text-1-4-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">SaleTest</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">TestCase</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">testAmount</span>()
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sale</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Sale</span>();
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sale</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> = 10;
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sale</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">expired_at</span> = strtotime(<span style="color: #98be65;">'-10 days'</span>);
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">assertEquals</span>(10 + (10 / 100 * 10), <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sale</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getAmount</span>());
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sale</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Sale</span>();

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sale</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> = 10;
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sale</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">expired_at</span> = strtotime(<span style="color: #98be65;">'+10 days'</span>);
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">assertEquals</span>(10 - (10 / 100 * 10), <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sale</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getAmount</span>());
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org12009d9" class="outline-4">
<h4 id="org12009d9"><span class="section-number-4">1.4.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
Extract conditional code in a private method. We name the method isExpired() because our conditional chunk of code checks if the sale is expired. We create the private method isExpired() and, with the technique of extract method, we move chunks of code into the new method. The next step is to move each branch of the condition in a private method. We do the same as we did before for each branch. So we create the private method getAmountWithInterest() for the first branch and the method getAmountWithDiscount() for the second branch.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Sale</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">expired_at</span>;
    <span style="color: #51afef;">public</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getAmount</span>()
    {
        <span style="color: #51afef;">if</span> (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">isExpired</span>()) {
            <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getAmountWithInterest</span>();
        } <span style="color: #51afef;">else</span> {
            <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getAmountWithDiscount</span>();
        }
    }

    <span style="color: #51afef;">private</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">isExpired</span>()
    {
        <span style="color: #51afef;">return</span> <span style="color: #51afef; font-weight: bold;">!</span>is_null(<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">expired_at</span>) &amp;&amp; <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">expired_at</span> &lt; time();
    }

    <span style="color: #51afef;">private</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getAmountWithInterest</span>()
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">interest</span> = 10;
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> + (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> / 100 * <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">interest</span>);
    }

    <span style="color: #51afef;">private</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getAmountWithDiscount</span>()
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">discount</span> = 10;
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> - (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">amount</span> / 100 * <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">discount</span>);
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgda3f6f1" class="outline-4">
<h4 id="orgda3f6f1"><span class="section-number-4">1.4.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-org16ccb5c" class="outline-3">
<h3 id="org16ccb5c"><span class="section-number-3">1.5</span> Encapsulate Field</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Smell: A public field
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">User</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">string</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">public</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;
}
</pre>
</div>
</div>
<div id="outline-container-org205a15a" class="outline-4">
<h4 id="org205a15a"><span class="section-number-4">1.5.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org89eea01" class="outline-4">
<h4 id="org89eea01"><span class="section-number-4">1.5.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
Make it private and provide accessors.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">User</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">string</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getName</span>(): <span style="color: #ECBE7B;">string</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">name</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setName</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">name</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org1da3e33" class="outline-4">
<h4 id="org1da3e33"><span class="section-number-4">1.5.3</span> Run a test</h4>
</div>
</div>
<div id="outline-container-orgf6e3a37" class="outline-3">
<h3 id="orgf6e3a37"><span class="section-number-3">1.6</span> Extract Class</h3>
<div class="outline-text-3" id="text-1-6">
<p>
SmellL Large Class
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">User</span>
{
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">surname</span>;

    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">city</span>;
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">zipCode</span>;
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">street</span>;
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">state</span>;
}
</pre>
</div>
</div>
<div id="outline-container-orgc90e114" class="outline-4">
<h4 id="orgc90e114"><span class="section-number-4">1.6.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org134c6df" class="outline-4">
<h4 id="org134c6df"><span class="section-number-4">1.6.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
Create a new class and move the relevant fields and methods from the old class into the new class.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">User</span>
{
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">surname</span>;

    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">address</span>;
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Address</span>
{
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">city</span>;
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">zipCode</span>;
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">street</span>;
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">state</span>;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org7c2eb2e" class="outline-4">
<h4 id="org7c2eb2e"><span class="section-number-4">1.6.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-org7e9f934" class="outline-3">
<h3 id="org7e9f934"><span class="section-number-3">1.7</span> Extract Function</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Alias: Extract Method
Inverse of: Inline Function
Smell: Code fragment that can be grouped together
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">printInvoice</span>(<span style="color: #ECBE7B;">Invoice</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">invoice</span>): <span style="color: #ECBE7B;">void</span>
{
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Invoice'</span>;
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'&lt;br&gt;'</span>;
    <span style="color: #51afef;">echo</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">invoice</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getNumber</span>();
   
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'phpRefactor: '</span>;
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'&lt;br&gt;'</span>;
    <span style="color: #51afef;">echo</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">invoice</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getDate</span>();
}
</pre>
</div>
</div>
<div id="outline-container-orgdeaf06a" class="outline-4">
<h4 id="orgdeaf06a"><span class="section-number-4">1.7.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-orgf54c73d" class="outline-4">
<h4 id="orgf54c73d"><span class="section-number-4">1.7.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
Turn the fragment into a method whose name explains the purpose of the method
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">printInvoice</span>(<span style="color: #ECBE7B;">Invoice</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">invoice</span>): <span style="color: #ECBE7B;">void</span>
{
    printInvoiceHeader(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">invoice</span>);
    printInvoiceFooter(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">invoice</span>);
}

<span style="color: #51afef;">function</span> <span style="color: #c678dd;">printInvoiceHeader</span>(<span style="color: #ECBE7B;">Invoice</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">invoice</span>): <span style="color: #ECBE7B;">void</span>
{
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Invoice'</span>;
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'&lt;br&gt;'</span>;
    <span style="color: #51afef;">echo</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">invoice</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getNumber</span>();
}

<span style="color: #51afef;">function</span> <span style="color: #c678dd;">printInvoiceFooter</span>(<span style="color: #ECBE7B;">Invoice</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">invoice</span>): <span style="color: #ECBE7B;">void</span>
{
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'phpRefactor: '</span>;
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'&lt;br&gt;'</span>;
    <span style="color: #51afef;">echo</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">invoice</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getDate</span>();
}



</pre>
</div>
</div>
</div>
<div id="outline-container-org9e07ec4" class="outline-4">
<h4 id="org9e07ec4"><span class="section-number-4">1.7.3</span> Run a test</h4>
</div>
<div id="outline-container-orgceb93e2" class="outline-4">
<h4 id="orgceb93e2"><span class="section-number-4">1.7.4</span> Notes</h4>
<div class="outline-text-4" id="text-1-7-4">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">printInvoice</span>() {
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">footer</span>=<span style="color: #51afef;">function</span>() {
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"phpRefactor.com \n"</span>;
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"2019"</span>;
    };
    
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Header \n"</span>;
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">footer</span>();
}
printInvoice();

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org33dd72e" class="outline-3">
<h3 id="org33dd72e"><span class="section-number-3">1.8</span> Extract Variable</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Alias: Introduce Explaining Variable
Smell: Complicated expression
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">if</span>((<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">stock</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">checkStatus</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">getItem</span>) &gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getQuantity</span>()) 
    &amp;&amp; (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getTotal</span>() &gt; 99) 
    &amp;&amp; (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getCustomer</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getBillingAddress</span>() === <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getShippingAddress</span>()));
</pre>
</div>
</div>
<div id="outline-container-org2e5f420" class="outline-4">
<h4 id="org2e5f420"><span class="section-number-4">1.8.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org03c4c5f" class="outline-4">
<h4 id="org03c4c5f"><span class="section-number-4">1.8.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-8-2">
<p>
Put the result of the expression, or part of it in a temporary variable with a name that explains the purpose
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">freeShipping</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getTotal</span>() &gt; 99;
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">stockAvailable</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">stock</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">checkStatus</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">getItem</span>) &gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getQuantity</span>();
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">addressMatches</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getCustomer</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getBillingAddress</span>() === <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getShippingAddress</span>();
<span style="color: #51afef;">if</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">stockAvailable</span> &amp;&amp; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">freeShipping</span> &amp;&amp; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">addressMatches</span>);
</pre>
</div>
</div>
</div>
<div id="outline-container-org9755892" class="outline-4">
<h4 id="org9755892"><span class="section-number-4">1.8.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-orge3dc0f5" class="outline-3">
<h3 id="orge3dc0f5"><span class="section-number-3">1.9</span> Inline Class</h3>
<div class="outline-text-3" id="text-1-9">
<p>
Smell: A class isn't doing very much
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">User</span>
{
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">surname</span>;

    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">telephoneNumber</span>;
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">TelephoneNumber</span>
{
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">number</span>;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org25ec580" class="outline-3">
<h3 id="org25ec580"><span class="section-number-3">1.10</span> <span class="done DONE">DONE</span> Inline Function</h3>
<div class="outline-text-3" id="text-1-10">
<p>
Smell: A function's body is just as clear as it's name
</p>
<div class="org-src-container">
<pre class="src src-php" id="org0123d39"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Circle</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">const</span> <span style="color: #ECBE7B;">RADIUS</span> = 2;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getArea</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getValueOfPI</span>() * <span style="color: #51afef;">self</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">RADIUS</span> * <span style="color: #51afef;">self</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">RADIUS</span>;
    }

    <span style="color: #51afef;">private</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getValueOfPI</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> pi();
    }
}
</pre>
</div>
</div>
<div id="outline-container-orgad87284" class="outline-4">
<h4 id="orgad87284"><span class="section-number-4">1.10.1</span> Write a test that pass</h4>
<div class="outline-text-4" id="text-1-10-1">
<div class="org-src-container">
<pre class="src src-phpunit" id="orga6633f7">
<span style="color: #51afef;">use</span> <span style="color: #ECBE7B;">PHPUnit\Framework\TestCase</span>;

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">CircleTest</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">TestCase</span>
{   
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">testGetArea</span>()
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">circle</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Circle</span>();
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">assertEquals</span>( 12.566370614359172, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">circle</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getArea</span>());
    }
}
</pre>
</div>

<pre class="example">
PHPUnit 7.4.3 by Sebastian Bergmann and contributors.

.                                                                   1 / 1 (100%)

Time: 53 ms, Memory: 10.00MB

OK (1 test, 1 assertion)
</pre>
</div>
</div>

<div id="outline-container-org6fbb85a" class="outline-4">
<h4 id="org6fbb85a"><span class="section-number-4">1.10.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-10-2">
<p>
Put the method's body into the body of its callers and remove the method.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getArea</span>(): <span style="color: #ECBE7B;">float</span>
{
    <span style="color: #51afef;">return</span> pi() * <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">radius</span> * <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">radius</span>;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgff61f08" class="outline-4">
<h4 id="orgff61f08"><span class="section-number-4">1.10.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-orgf640605" class="outline-3">
<h3 id="orgf640605"><span class="section-number-3">1.11</span> Inline Variable</h3>
<div class="outline-text-3" id="text-1-11">
<p>
Smell: Variable name doesn't really communicate more than the expression itself or gets in the way of refactoring neighboring code.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #ECBE7B;">let</span> <span style="color: #dcaeea;">basePrice</span> = anOrder.basePrice;
<span style="color: #51afef;">return</span> (basePrice &gt; 1000);
</pre>
</div>
</div>
<div id="outline-container-orgbea3a2c" class="outline-4">
<h4 id="orgbea3a2c"><span class="section-number-4">1.11.1</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-11-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">return</span> anOrder.basePrice &gt; 1000;
</pre>
</div>
<p>
140
</p>
</div>
</div>
</div>
<div id="outline-container-orgff4fc84" class="outline-3">
<h3 id="orgff4fc84"><span class="section-number-3">1.12</span> Introduce Parameter Object</h3>
<div class="outline-text-3" id="text-1-12">
<p>
Smell: Long Parameter List and parameters that naturally go together
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Account</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">findAllTransactions</span>(<span style="color: #ECBE7B;">DateTime</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">start</span>, <span style="color: #ECBE7B;">DateTime</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">end</span>)
    {
        ...
    }
}
</pre>
</div>
</div>
<div id="outline-container-orgd42947f" class="outline-4">
<h4 id="orgd42947f"><span class="section-number-4">1.12.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org242453c" class="outline-4">
<h4 id="org242453c"><span class="section-number-4">1.12.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-12-2">
<p>
    Replace them with an object.
#+BEGIN<sub>SRC</sub> php#+END<sub>SRC</sub>
</p>
</div>
</div>
<div id="outline-container-orgc7b1f99" class="outline-4">
<h4 id="orgc7b1f99"><span class="section-number-4">1.12.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-org5bcdc47" class="outline-3">
<h3 id="org5bcdc47"><span class="section-number-3">1.13</span> Optimize Imports</h3>
<div class="outline-text-3" id="text-1-13">
<p>
Smell: Imports unused or not in alphabetically order. Multiple use statement
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">use</span> <span style="color: #ECBE7B;">SomeClass\Worker</span>;
<span style="color: #51afef;">use</span> <span style="color: #ECBE7B;">SomeClass\Foo</span>;
<span style="color: #51afef;">use</span> <span style="color: #ECBE7B;">SomeClass\UnusedClass</span>;
</pre>
</div>
</div>
<div id="outline-container-orgc5bcdce" class="outline-4">
<h4 id="orgc5bcdce"><span class="section-number-4">1.13.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-orge065d2c" class="outline-4">
<h4 id="orge065d2c"><span class="section-number-4">1.13.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-13-2">
<p>
Remove unused imports. Sort imports alphabetically (ascending order). Splits multiple use statement imports into single use statement imports
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">use</span> <span style="color: #ECBE7B;">SomeClass</span>\{Foo, Worker};
</pre>
</div>
</div>
</div>
<div id="outline-container-org640dfab" class="outline-4">
<h4 id="org640dfab"><span class="section-number-4">1.13.3</span> Pass a test</h4>
</div>
</div>

<div id="outline-container-org0bb53cd" class="outline-3">
<h3 id="org0bb53cd"><span class="section-number-3">1.14</span> Move Method</h3>
<div class="outline-text-3" id="text-1-14">
<p>
Smell: Method accessing fields and methods in different class
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Customer</span>
{
    <span style="color: #51afef;">function</span> <span style="color: #c678dd;">printInvoice</span>(<span style="color: #ECBE7B;">Order</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span>)
    {
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Invoice </span><span style="color: #dcaeea;">{$order-&gt;getId()}</span><span style="color: #98be65;">"</span>;
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Date: </span><span style="color: #dcaeea;">{$order-&gt;getDate()}</span><span style="color: #98be65;">"</span>;
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Customer: </span><span style="color: #dcaeea;">{$this-&gt;getName()}</span><span style="color: #98be65;">"</span>;

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">address</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getAddress</span>();
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"City: </span><span style="color: #dcaeea;">{$address-&gt;getCity()}</span><span style="color: #98be65;">"</span>;
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Address: </span><span style="color: #dcaeea;">{$address-&gt;getStreet()}</span><span style="color: #98be65;">"</span>;

        <span style="color: #51afef;">foreach</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">order</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getItems</span>() <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">item</span>){

            <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Name: </span><span style="color: #dcaeea;">{$item-&gt;getName()}</span><span style="color: #98be65;">"</span>;
            <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Price: </span><span style="color: #dcaeea;">{$item-&gt;getPrice()}</span><span style="color: #98be65;">"</span>;
        }
    }
}   
</pre>
</div>
</div>
<div id="outline-container-orgf048cb3" class="outline-4">
<h4 id="orgf048cb3"><span class="section-number-4">1.14.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org2dc12a2" class="outline-4">
<h4 id="org2dc12a2"><span class="section-number-4">1.14.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-14-2">
<p>
Move all its features into another class and delete it.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Order</span>
{
    <span style="color: #51afef;">function</span> <span style="color: #c678dd;">printInvoice</span>()
    {
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Invoice </span><span style="color: #dcaeea;">{$this-&gt;getId()}</span><span style="color: #98be65;">"</span>;
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Date: </span><span style="color: #dcaeea;">{$this-&gt;getDate()}</span><span style="color: #98be65;">"</span>;
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Customer: </span><span style="color: #dcaeea;">{$this-&gt;getCustomer()-&gt;getName()}</span><span style="color: #98be65;">"</span>;

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">address</span> = <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getAddress</span>();
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"City: </span><span style="color: #dcaeea;">{$address-&gt;getCity()}</span><span style="color: #98be65;">"</span>;
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Address: </span><span style="color: #dcaeea;">{$address-&gt;getStreet()}</span><span style="color: #98be65;">"</span>;

        <span style="color: #51afef;">foreach</span> (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getItems</span>() <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">item</span>){

            <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Name: </span><span style="color: #dcaeea;">{$item-&gt;getName()}</span><span style="color: #98be65;">"</span>;
            <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Price: </span><span style="color: #dcaeea;">{$item-&gt;getPrice()}</span><span style="color: #98be65;">"</span>;
        }
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org3841097" class="outline-4">
<h4 id="org3841097"><span class="section-number-4">1.14.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-org46988d3" class="outline-3">
<h3 id="org46988d3"><span class="section-number-3">1.15</span> Parameterize Method</h3>
<div class="outline-text-3" id="text-1-15">
<p>
Smell: Several methods do similar things but with different values contained in the method body.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Employee</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">salary</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setSalary</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">salary</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">salary</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">salary</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getSalary</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">salary</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">fivePercentRaise</span>()
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">salary</span> += <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">salary</span>* (5 / 100);
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">tenPercentRaise</span>()
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">salary</span> += <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">salary</span>* (10 / 100) ;
    }
}
</pre>
</div>
</div>
<div id="outline-container-org4b558c2" class="outline-4">
<h4 id="org4b558c2"><span class="section-number-4">1.15.1</span> <span class="todo TODO">TODO</span> Write a test that pass</h4>
</div>
<div id="outline-container-org907cabc" class="outline-4">
<h4 id="org907cabc"><span class="section-number-4">1.15.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-15-2">
<p>
Create one method that uses a parameter for the different values.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Employee</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">salary</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setSalary</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">salary</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">salary</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">salary</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getSalary</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">salary</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">raise</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">percent</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">salary</span> += <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">salary</span> * (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">percent</span> / 100);
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org4ad883d" class="outline-4">
<h4 id="org4ad883d"><span class="section-number-4">1.15.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-org620cb5e" class="outline-3">
<h3 id="org620cb5e"><span class="section-number-3">1.16</span> Preserve Whole Object</h3>
<div class="outline-text-3" id="text-1-16">
<p>
Smell: More than one value from an object are passing as parameters in a method call
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">September</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">highestTemp</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">lowestTemp</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">highestTemp</span>, <span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">lowestTemp</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">highestTemp</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">highestTemp</span>;
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">lowestTemp</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">lowestTemp</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getHighestTemp</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">highestTemp</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getLowestTemp</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">lowestTemp</span>;
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Calculator</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">calculateAverageTemperature</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">highestTemp</span>, <span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">lowestTemp</span>)
    {
        <span style="color: #51afef;">return</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">highestTemp</span> + <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">lowestTemp</span>) / 2;
    }
}

<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">September</span>(15,5);
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">calculator</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Calculator</span>();

<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">averageTemperature</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">calculator</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">calculateAverageTemperature</span>(
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getHighestTemp</span>(),
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getLowestTemp</span>()
        );
</pre>
</div>
</div>
<div id="outline-container-org5a34ce9" class="outline-4">
<h4 id="org5a34ce9"><span class="section-number-4">1.16.1</span> Write a test that pass</h4>
<div class="outline-text-4" id="text-1-16-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">testCalculateAverageTemperature</span>()
{
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">September</span>(15,5);
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">calculator</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Calculator</span>();

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">averageTemperature</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">calculator</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">calculateAverageTemperature</span>(
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getHighestTemp</span>(),
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getLowestTemp</span>());

        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">assertEquals</span>(10, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">averageTemperature</span>);
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org45def07" class="outline-4">
<h4 id="org45def07"><span class="section-number-4">1.16.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-16-2">
<p>
Add object as a new parameter. Set it default value to null, that will help to manage the transitions towards the final version of the method.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Calculator</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">calculateAverageTemperature</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">highestTemp</span>, <span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">lowestTemp</span>, <span style="color: #ECBE7B;">September</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span> = <span style="color: #a9a1e1;">null</span>)
    {
        <span style="color: #51afef;">return</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">highestTemp</span> + <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">lowestTemp</span>) / 2;
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org3c3ca7c" class="outline-4">
<h4 id="org3c3ca7c"><span class="section-number-4">1.16.3</span> Pass a test</h4>
</div>
<div id="outline-container-orgef5fabb" class="outline-4">
<h4 id="orgef5fabb"><span class="section-number-4">1.16.4</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-16-4">
<p>
Replace values with values coming from the whole object
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Calculator</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">calculateAverageTemperature</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">highestTemp</span>, <span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">lowestTemp</span>, <span style="color: #ECBE7B;">September</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span> = <span style="color: #a9a1e1;">null</span>)
    {
        <span style="color: #51afef;">return</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getHighestTemp</span>() + <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getLowestTemp</span>()) / 2;
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org29289bd" class="outline-4">
<h4 id="org29289bd"><span class="section-number-4">1.16.5</span> Pass a test</h4>
</div>
<div id="outline-container-orgf49aeea" class="outline-4">
<h4 id="orgf49aeea"><span class="section-number-4">1.16.6</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-16-6">
<p>
Remove useless parameters and default null value of $september object
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Calculator</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">calculateAverageTemperature</span>(<span style="color: #ECBE7B;">September</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span>)
    {
        <span style="color: #51afef;">return</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getHighestTemp</span>() + <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">september</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getLowestTemp</span>()) / 2;
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org404b466" class="outline-4">
<h4 id="org404b466"><span class="section-number-4">1.16.7</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-orge95edc7" class="outline-3">
<h3 id="orge95edc7"><span class="section-number-3">1.17</span> Pull Up Method</h3>
<div class="outline-text-3" id="text-1-17">
<p>
Smell: Subclasses have the same method.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Employee</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">string</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">protected</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;
    
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">name</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;
    }
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Salesman</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">Employee</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getName</span>()
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">name</span>;
    }
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Engineer</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">Employee</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getName</span>()
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">name</span>;
    }
}
</pre>
</div>
</div>
<div id="outline-container-org67d4f61" class="outline-4">
<h4 id="org67d4f61"><span class="section-number-4">1.17.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org1630ac9" class="outline-4">
<h4 id="org1630ac9"><span class="section-number-4">1.17.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-17-2">
<p>
Move the methods to the super class.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Employee</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">string</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">protected</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">name</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getName</span>()
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">name</span>;
    }
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Salesman</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">Employee</span> {}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Engineer</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">Employee</span> {}
</pre>
</div>
</div>
</div>
<div id="outline-container-org6f3f654" class="outline-4">
<h4 id="org6f3f654"><span class="section-number-4">1.17.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-org765add8" class="outline-3">
<h3 id="org765add8"><span class="section-number-3">1.18</span> Remove Assignments to Parameters</h3>
<div class="outline-text-3" id="text-1-18">
<p>
Smell: Reassign to a parameter
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">discount</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">priceTotal</span>): <span style="color: #ECBE7B;">int</span>
{
    <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">priceTotal</span> &gt; 100) {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">priceTotal</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">priceTotal</span> - 10;
    }
    
    <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">priceTotal</span>;
}  
</pre>
</div>
</div>
<div id="outline-container-orgebd7755" class="outline-4">
<h4 id="orgebd7755"><span class="section-number-4">1.18.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-orgd9ef2ff" class="outline-4">
<h4 id="orgd9ef2ff"><span class="section-number-4">1.18.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-18-2">
<p>
Use a temporary variable instead
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">discount</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">priceTotal</span>): <span style="color: #ECBE7B;">int</span>
{
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">priceTotal</span>;

    <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">priceTotal</span> &gt; 100) {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span> - 10;
    }

    <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span>;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orge9e726f" class="outline-4">
<h4 id="orge9e726f"><span class="section-number-4">1.18.3</span> Pass a test</h4>
</div>
<div id="outline-container-orgd731f04" class="outline-4">
<h4 id="orgd731f04"><span class="section-number-4">1.18.4</span> Info</h4>
<div class="outline-text-4" id="text-1-18-4">
<p>
The best practice is that if you pass parameters into a method then they should always represent what were passed in and never be reassigned to mean something else. Btw. in Java you can prevent variable’s reassignment by keyword 'final' before a parameter <a href="https://stackoverflow.com/questions/500508/why-should-i-use-the-keyword-final-on-a-method-parameter-in-java">https://stackoverflow.com/questions/500508/why-should-i-use-the-keyword-final-on-a-method-parameter-in-java</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org3cd0fa4" class="outline-3">
<h3 id="org3cd0fa4"><span class="section-number-3">1.19</span> Remove PHPDoc</h3>
<div class="outline-text-3" id="text-1-19">
<p>
Smell: PHPDoc is duplicating type-hint information
Damage: Adds information which not provides additional value
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #83898d;">/**</span>
<span style="color: #83898d;"> * </span><span style="color: #a9a1e1;">@param</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">int</span><span style="color: #83898d;"> </span><span style="color: #dcaeea;">$</span><span style="color: #dcaeea;">number</span>
<span style="color: #83898d;"> * </span><span style="color: #a9a1e1;">@return</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">void</span>
<span style="color: #83898d;"> */</span>
<span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setNumber</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">number</span>): <span style="color: #ECBE7B;">void</span>
{
    <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">number</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">number</span>;
}  
</pre>
</div>
</div>
<div id="outline-container-org7a0bc44" class="outline-4">
<h4 id="org7a0bc44"><span class="section-number-4">1.19.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org0bc0086" class="outline-4">
<h4 id="org0bc0086"><span class="section-number-4">1.19.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-19-2">
<p>
Remove PHPDoc if it's not provides additional value
</p>
<div class="org-src-container">
<pre class="src src-php">
</pre>
</div>
</div>
</div>
<div id="outline-container-org8f574de" class="outline-4">
<h4 id="org8f574de"><span class="section-number-4">1.19.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-orgbfcc167" class="outline-3">
<h3 id="orgbfcc167"><span class="section-number-3">1.20</span> Rename Function</h3>
<div class="outline-text-3" id="text-1-20">
<p>
Alias: Rename Method, Change Function Declaration
Smell: The name of a method does not reveal it's purpose1
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getInvcdtlmt</span>()
</pre>
</div>
</div>

<div id="outline-container-org54bb857" class="outline-4">
<h4 id="org54bb857"><span class="section-number-4">1.20.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org81b8b69" class="outline-4">
<h4 id="org81b8b69"><span class="section-number-4">1.20.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-20-2">
<p>
Change the name of the method
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getInvoiceableCreditLimit</span>()
</pre>
</div>
</div>
</div>
<div id="outline-container-org77e7183" class="outline-4">
<h4 id="org77e7183"><span class="section-number-4">1.20.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-org9788ca6" class="outline-3">
<h3 id="org9788ca6"><span class="section-number-3">1.21</span> Replace Global with Dependency Injection</h3>
<div class="outline-text-3" id="text-1-21">
<p>
Smell: Variable with 'global' keyword
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Item</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">fetch</span>()
    {
        <span style="color: #51afef;">global</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">db</span>;
        <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">db</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">query</span>(...);
    }
}
</pre>
</div>
</div>

<div id="outline-container-orgd503996" class="outline-4">
<h4 id="orgd503996"><span class="section-number-4">1.21.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org267f05e" class="outline-4">
<h4 id="org267f05e"><span class="section-number-4">1.21.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-21-2">
<p>
Move global variable in class to the constructor
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Item</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">Database</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">db</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">Database</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">db</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">db</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">db</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">fetch</span>()
    {
        <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">db</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">query</span>(...);
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org28c4254" class="outline-4">
<h4 id="org28c4254"><span class="section-number-4">1.21.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-orgfc1478c" class="outline-3">
<h3 id="orgfc1478c"><span class="section-number-3">1.22</span> <span class="done DONE">DONE</span> Replace Magic Number With Symbolic Constant</h3>
<div class="outline-text-3" id="text-1-22">
<p>
Smell: Number with a particular meaning
</p>
<div class="org-src-container">
<pre class="src src-php" id="org2aaa609"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Circle</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">radius</span>;
    
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">radius</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">radius</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">radius</span>;
    }
    
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getCircumference</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">radius</span> * 2 * 3.1416;
    }
}
</pre>
</div>
</div>
<div id="outline-container-org1e5a571" class="outline-4">
<h4 id="org1e5a571"><span class="section-number-4">1.22.1</span> Write a test that pass</h4>
<div class="outline-text-4" id="text-1-22-1">
<div class="org-src-container">
<pre class="src src-phpunit" id="org5f02f2a">
<span style="color: #51afef;">use</span> <span style="color: #ECBE7B;">PHPUnit\Framework\TestCase</span>;

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">CircleTest</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">TestCase</span>
{   
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">testGetCircumference</span>()
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">circle</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Circle</span>(2);
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">assertEquals</span>(12.5664, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">circle</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getCircumference</span>());
    }
}
</pre>
</div>

<pre class="example">
PHPUnit 7.5.2 by Sebastian Bergmann and contributors.

.                                                                   1 / 1 (100%)

Time: 151 ms, Memory: 10.00MB

OK (1 test, 1 assertion)
</pre>
</div>
</div>

<div id="outline-container-org41ed73c" class="outline-4">
<h4 id="org41ed73c"><span class="section-number-4">1.22.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-22-2">
<p>
Create a constant, name it after the meaning, and replace the number with it
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Circle</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #51afef;">const</span> <span style="color: #ECBE7B;">PI</span> = 3.1416;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">radius</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">radius</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">radius</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">radius</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getCircumference</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">radius</span> * 2 * <span style="color: #51afef;">self</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">PI</span>;
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcda1c7d" class="outline-4">
<h4 id="orgcda1c7d"><span class="section-number-4">1.22.3</span> Run a test</h4>
<div class="outline-text-4" id="text-1-22-3">
</div>
</div>
<div id="outline-container-org771b113" class="outline-4">
<h4 id="org771b113"><span class="section-number-4">1.22.4</span> Helper:</h4>
<div class="outline-text-4" id="text-1-22-4">
<p>
<a href="https://github.com/povils/phpmnd">PHP Magic Number Detector</a> is a tool to detect magic numbers in your PHP code
</p>
</div>
</div>
</div>
<div id="outline-container-orgde4cd6b" class="outline-3">
<h3 id="orgde4cd6b"><span class="section-number-3">1.23</span> Replace Parameter with Method</h3>
<div class="outline-text-3" id="text-1-23">
<p>
Smell: A method runs different code depending on the values of parameters
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">EmailNotification</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">send</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">to</span>, <span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">body</span>, <span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">from</span> = <span style="color: #a9a1e1;">null</span>)
    {
        <span style="color: #51afef;">if</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">from</span>){
            <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">mailer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">send</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">to</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">body</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">from</span>);
        }<span style="color: #51afef;">else</span>{
            <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">mailer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">send</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">to</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">body</span>, <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">defaultSender</span>);
        }
    }
}
</pre>
</div>
</div>
<div id="outline-container-org5ba9b29" class="outline-4">
<h4 id="org5ba9b29"><span class="section-number-4">1.23.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org1791c02" class="outline-4">
<h4 id="org1791c02"><span class="section-number-4">1.23.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-23-2">
<p>
Create a separate method for each value of the parameter
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">EmailNotification</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">send</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">to</span>, <span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">body</span>, <span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">from</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">mailer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">send</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">to</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">body</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">from</span>);
    }
    
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">sendFromDefaultSender</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">to</span>, <span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">body</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">mailer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">send</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">to</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">body</span>, <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">defaultSender</span>);
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org432efdc" class="outline-4">
<h4 id="org432efdc"><span class="section-number-4">1.23.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-org698514b" class="outline-3">
<h3 id="org698514b"><span class="section-number-3">1.24</span> Replace Temp with Query</h3>
<div class="outline-text-3" id="text-1-24">
<p>
Smell: Using a temporary variable to hold the result of an expression.
Damage: Temporary variable increase the temptation to write longer methods. Temporaries aren’t necessarily bad, but sometimes they attract new code.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getTotalPrice</span>(): <span style="color: #ECBE7B;">int</span>
{
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">basePrice</span> = <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">quantity</span> * <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">itemPrice</span>;

    <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">basePrice</span> &gt; <span style="color: #51afef;">self</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">DISCOUNT_POINT</span>) {
        <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">basePrice</span> * <span style="color: #51afef;">self</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">DISCOUNT</span>;
    }
    <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">basePrice</span>;
}
</pre>
</div>
</div>
<div id="outline-container-orge996c4b" class="outline-4">
<h4 id="orge996c4b"><span class="section-number-4">1.24.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org00542f5" class="outline-4">
<h4 id="org00542f5"><span class="section-number-4">1.24.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-24-2">
<p>
Extract the expression into a method. Replace all references to the temp with the expression. The new method can then be used in other methods.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getTotalPrice</span>(): <span style="color: #ECBE7B;">int</span>
{
    <span style="color: #51afef;">if</span> (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getBasePrice</span>() &gt; <span style="color: #51afef;">self</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">DISCOUNT_POINT</span>) {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getBasePrice</span>() * <span style="color: #51afef;">self</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">DISCOUNT</span>;
    }
    <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getBasePrice</span>();
}

<span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getBasePrice</span>(): <span style="color: #ECBE7B;">int</span>
{
    <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">quantity</span> * <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">itemPrice</span>;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdfa9385" class="outline-4">
<h4 id="orgdfa9385"><span class="section-number-4">1.24.3</span> Pass a test</h4>
</div>
<div id="outline-container-org4d08b06" class="outline-4">
<h4 id="org4d08b06"><span class="section-number-4">1.24.4</span> Info</h4>
<div class="outline-text-4" id="text-1-24-4">
<p>
Now, but wait, you might say. Isn't this more inefficient? Because if we created the temp the old way, we'd only have to execute the expression once, but if we turn it into a method, we might be calling it many different times. And yes, you're absolutely right, but remember, the pure efficiency of the code is not our first goal in refactoring. Clarity is. The likelihood is that a typical expression you would deal with in this sort of refactoring is going to be so undemanding, it wouldn't be noticeable at all, even having to call it several more times. But if it is an intensive operation, an intensive expression, well you should really be working on that later, after you've refactored using profilers. And other tools to make sure you're not doing pointless, premature optimization. And the real benefit is that by creating this as its own method, we will also have use of it anywhere else in the class, which wasn't the case before. As the original temp was scoped to the original method. So, we won't be tempted to add more code to the original method just to have access to that temp.
</p>
</div>
</div>
</div>
<div id="outline-container-org55e5526" class="outline-3">
<h3 id="org55e5526"><span class="section-number-3">1.25</span> Replacing Type Code with Subclasses</h3>
<div class="outline-text-3" id="text-1-25">
<p>
Smell: Immutable type code affecting the class behavior.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Account</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">int</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">accountType</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">balance</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">int</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">const</span> <span style="color: #ECBE7B;">CHECKING</span> = 0;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">int</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">const</span> <span style="color: #ECBE7B;">SAVINGS</span> = 1;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">int</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">const</span> <span style="color: #ECBE7B;">INVESTMENT</span> = 2;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">accountType</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">accountType</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">accountType</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getAccountType</span>(): <span style="color: #ECBE7B;">int</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">accountType</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getBalance</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">withdraw</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #51afef;">switch</span> (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">accountType</span>){
            <span style="color: #51afef;">case</span> <span style="color: #51afef;">self</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">CHECKING</span>:
                <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span> -= <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>;
                <span style="color: #51afef;">break</span>;
            <span style="color: #51afef;">case</span> <span style="color: #51afef;">self</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">SAVINGS</span>:
                <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span> -= <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span> + 100;
                <span style="color: #51afef;">break</span>;
            <span style="color: #51afef;">case</span> <span style="color: #51afef;">self</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">INVESTMENT</span>:
                <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span> -= <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span> + 300;
                <span style="color: #51afef;">break</span>;
            <span style="color: #51afef;">default</span>:
                <span style="color: #51afef;">throw</span> <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">RuntimeException</span>(<span style="color: #98be65;">'Unknown Account Type'</span>);
        }
    }
}
</pre>
</div>
</div>
<div id="outline-container-org918ed38" class="outline-4">
<h4 id="org918ed38"><span class="section-number-4">1.25.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org3aebe7c" class="outline-4">
<h4 id="org3aebe7c"><span class="section-number-4">1.25.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-25-2">
<p>
Replace the type code with subclasses.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">abstract</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Account</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">balance</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getBalance</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span>;
    }
    
    <span style="color: #51afef;">abstract</span> <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">withdraw</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>): <span style="color: #ECBE7B;">void</span>
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">AccountChecking</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">Account</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">withdraw</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span> -= <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>;
    }
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">AccountSavings</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">Account</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">withdraw</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span> -= <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span> + 100;
    }
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">AccountInvestment</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">Account</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">withdraw</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span> -= <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span> + 300;
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org8b71ecd" class="outline-4">
<h4 id="org8b71ecd"><span class="section-number-4">1.25.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-org7a1ff9f" class="outline-3">
<h3 id="org7a1ff9f"><span class="section-number-3">1.26</span> Separate Query from Modifier</h3>
<div class="outline-text-3" id="text-1-26">
<p>
Smell: A method that returns a value but also changes the state of an object.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Account</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">balance</span>;
    
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">withdrawAndGetBalance</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span> -= <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>;
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span>;
    }
}
</pre>
</div>
</div>
<div id="outline-container-orgb2acdd7" class="outline-4">
<h4 id="orgb2acdd7"><span class="section-number-4">1.26.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org94c12ec" class="outline-4">
<h4 id="org94c12ec"><span class="section-number-4">1.26.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-26-2">
<p>
Create two methods, one for the query and one for the modification.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Account</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">balance</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getBalance</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">withdraw</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">balance</span> -= <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>;
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org5841628" class="outline-4">
<h4 id="org5841628"><span class="section-number-4">1.26.3</span> Pass a test</h4>
</div>
</div>
<div id="outline-container-orga30e551" class="outline-3">
<h3 id="orga30e551"><span class="section-number-3">1.27</span> Split Temporary Variable</h3>
<div class="outline-text-3" id="text-1-27">
<p>
Smell: Temporary variable is assigned to more than once (overwrite), but is not a loop variable nor a collecting temporary variable.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">temp</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">itemPrice</span> * <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">itemQuantity</span>;
<span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Total: </span><span style="color: #dcaeea;">$temp</span><span style="color: #98be65;">"</span>;
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">temp</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">orderTotal</span> - <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">orderDiscount</span>;
<span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Price after discount: </span><span style="color: #dcaeea;">$temp</span><span style="color: #98be65;">;"</span>
</pre>
</div>
</div>
<div id="outline-container-org60afdbd" class="outline-4">
<h4 id="org60afdbd"><span class="section-number-4">1.27.1</span> Write a test that pass</h4>
</div>
<div id="outline-container-org464d6e5" class="outline-4">
<h4 id="org464d6e5"><span class="section-number-4">1.27.2</span> Refactor the code</h4>
<div class="outline-text-4" id="text-1-27-2">
<p>
Make a separate temporary variable for each assignment.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">totalPrice</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">itemPrice</span> * <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">itemQuantity</span>;
<span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Total: </span><span style="color: #dcaeea;">$totalPrice</span><span style="color: #98be65;">"</span>;
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">totalDiscountPrice</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">orderTotal</span> - <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">orderDiscount</span>;
<span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Price after discount: </span><span style="color: #dcaeea;">$totalDiscountPrice</span><span style="color: #98be65;">"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb10b44b" class="outline-4">
<h4 id="orgb10b44b"><span class="section-number-4">1.27.3</span> Pass a test</h4>
</div>
</div>
</div>
<div id="outline-container-org64219b6" class="outline-2">
<h2 id="org64219b6"><span class="section-number-2">2</span> Tutorials</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org996774a" class="outline-3">
<h3 id="org996774a"><span class="section-number-3">2.1</span> <a href="https://www.pluralsight.com/courses/automated-tests-phpunit">Automated Tests with PHPUnit</a>                      Anna Filina       testing - PHPUnit</h3>
</div>
<div id="outline-container-orgdbdbe5e" class="outline-3">
<h3 id="orgdbdbe5e"><span class="section-number-3">2.2</span> <a href="https://industriallogic.com/xp/refactoring/catalog.html">Catalog of Refactoring to Patterns</a>                Joshua Kerievsky  patterns</h3>
</div>
<div id="outline-container-orge47b258" class="outline-3">
<h3 id="orge47b258"><span class="section-number-3">2.3</span> <a href="https://refactoring.com/catalog/">Catalog of Refactorings</a>                           Martin Fowler     refactoring</h3>
</div>
<div id="outline-container-orgc93e54a" class="outline-3">
<h3 id="orgc93e54a"><span class="section-number-3">2.4</span> <a href="https://github.com/jupeter/clean-code-php">Clean Code PHP</a>                                    Piotr Plenik      clean code</h3>
</div>
<div id="outline-container-org3029d5d" class="outline-3">
<h3 id="org3029d5d"><span class="section-number-3">2.5</span> <a href="https://code.tutsplus.com/courses/detecting-code-smells">Detecting Code Smells</a>                             Patkós Csaba      refactoring</h3>
</div>
<div id="outline-container-orgf291b14" class="outline-3">
<h3 id="orgf291b14"><span class="section-number-3">2.6</span> <a href="https://www.pluralsight.com/courses/encapsulation-solid">Encapsulation and SOLID</a>                           Mark Seemann      SOLID</h3>
</div>
<div id="outline-container-org2829c4c" class="outline-3">
<h3 id="org2829c4c"><span class="section-number-3">2.7</span> <a href="https://youtu.be/Rdc3r2BJzWA">How to Refactor Like a Boss 1</a>                     Michael Cheng     refactoring</h3>
</div>
<div id="outline-container-orgdb6f62d" class="outline-3">
<h3 id="orgdb6f62d"><span class="section-number-3">2.8</span> <a href="https://youtu.be/2iXayIx4WyQ">How to Refactor Like a Boss 2</a>                     Michael Cheng     refactoring</h3>
</div>
<div id="outline-container-org014c674" class="outline-3">
<h3 id="org014c674"><span class="section-number-3">2.9</span> <a href="https://youtu.be/JCqbdVrIW30">HTTP Smoke Testing</a>                                Peter Heinz       testing - smoke test</h3>
</div>
<div id="outline-container-org6631316" class="outline-3">
<h3 id="org6631316"><span class="section-number-3">2.10</span> <a href="https://www.udemy.com/introduction-to-testing-with-phpunit/">Introduction to Testing with PHPUnit</a>              Trevor Sawler     testing - PHPUnit</h3>
</div>
<div id="outline-container-org3fa867b" class="outline-3">
<h3 id="org3fa867b"><span class="section-number-3">2.11</span> <a href="http://blog.adrianbolboaca.ro/2014/04/legacy-coderetreat/#sessions">Legacy Coderetreat (Java)</a>                         Adrian Bolboaca   refactoring</h3>
</div>
<div id="outline-container-org5092755" class="outline-3">
<h3 id="org5092755"><span class="section-number-3">2.12</span> <a href="https://github.com/exakat/php-static-analysis-tools">List of Static Analysis Tools</a>                                       analysis</h3>
</div>
<div id="outline-container-orge090d32" class="outline-3">
<h3 id="orge090d32"><span class="section-number-3">2.13</span> <a href="https://www.lynda.com/PHP-tutorials/PHP-Testing-Legacy-Applications/669546-2.html">PHP: Testing Legacy Applications</a>                  Chris Hartjes     testing - PHPUnit</h3>
</div>
<div id="outline-container-orgbedc10d" class="outline-3">
<h3 id="orgbedc10d"><span class="section-number-3">2.14</span> <a href="https://www.lynda.com/Software-Development-tutorials/Programming-Foundations-Test-Driven-Development/124398-2.html">Programming Foundations: Test-Driven Development</a>  Simon Allardice   testing - TDD</h3>
</div>
<div id="outline-container-org96dd7ac" class="outline-3">
<h3 id="org96dd7ac"><span class="section-number-3">2.15</span> <a href="https://youtu.be/0DYIJdX6kB4">Refactoring 101</a>                                   Adam Culp         refactoring</h3>
</div>
<div id="outline-container-org330ddd2" class="outline-3">
<h3 id="org330ddd2"><span class="section-number-3">2.16</span> <a href="https://code.tutsplus.com/series/refactoring-legacy-code--cms-633">Refactoring Legacy Code</a>                           Patkós Csaba      refactoring</h3>
</div>
<div id="outline-container-org4faa2e5" class="outline-3">
<h3 id="org4faa2e5"><span class="section-number-3">2.17</span> <a href="https://youtu.be/7v9ehGsPm1s">Refactoring Legacy Code</a>                           Adam Culp         refactoring</h3>
</div>
<div id="outline-container-org6687842" class="outline-3">
<h3 id="org6687842"><span class="section-number-3">2.18</span> <a href="https://adamwathan.me/refactoring-to-collections/">Refactoring to Collections</a>                        Adam Wathan       collections</h3>
</div>
<div id="outline-container-org7116cc6" class="outline-3">
<h3 id="org7116cc6"><span class="section-number-3">2.19</span> <a href="https://youtu.be/Fca-Ng0bzuk">Solving the N+1 Problem</a>                           Paul M. Jones     database</h3>
</div>
<div id="outline-container-orge737730" class="outline-3">
<h3 id="orge737730"><span class="section-number-3">2.20</span> <a href="https://youtu.be/65NrzJ_5j58">Steps Toward Modernizing a Legacy Codebase</a>        Paul M. Jones     refactoring</h3>
</div>
<div id="outline-container-org57899f3" class="outline-3">
<h3 id="org57899f3"><span class="section-number-3">2.21</span> <a href="https://code.tutsplus.com/courses/techniques-for-refactoring-code">Techniques for Refactoring Code</a>                   Patkós Csaba      refactoring</h3>
</div>
<div id="outline-container-orga4a083f" class="outline-3">
<h3 id="orga4a083f"><span class="section-number-3">2.22</span> <a href="https://youtu.be/7LoShYRnljU">Extremely Defensive PHP Programming</a> Marco Pivetta (Ocramius)</h3>
<div class="outline-text-3" id="text-2-22">
<ul class="org-ul">
<li>poka yoka</li>
<li>code is not reusable - do not trust the code.</li>
<li>abstractions are reusable - you trust interfaces, how the code should behave</li>
<li>ex. with req</li>
</ul>
</div>
</div>
<div id="outline-container-orgd05593f" class="outline-3">
<h3 id="orgd05593f"><span class="section-number-3">2.23</span> <a href="https://youtu.be/WW2qPKukoZY">Doctrine Best Practices</a> Marco Pivetta (Ocramius)</h3>
<div class="outline-text-3" id="text-2-23">
<ul class="org-ul">
<li>entities mostly represent your domain</li>
<li>define entities, after that define database</li>
<li>disallow collection access from outside the entity</li>
<li>soft-deletes</li>
<li>query functions are better than repositories</li>
<li>separate Repository#get() &amp; Repository#find() 
<ul class="org-ul">
<li>find() can return null</li>
<li>get() cannot return null - throw an exception</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org108a653" class="outline-3">
<h3 id="org108a653"><span class="section-number-3">2.24</span> <a href="https://www.lynda.com/Developer-Programming-Foundations-tutorials/Foundations-Programming-Refactoring-Code/122457-2.html">Programming Foundations: Refactoring Code</a>  Simon Allardice  refactoring</h3>
<div class="outline-text-3" id="text-2-24">
<ol class="org-ol">
<li>Because using the formal refactoring technique, brings more conscious awareness to that decision.</li>

<li>No single technique is the master refactoring.</li>
<li>It is the cumulative, additive impact of many small changes done consistently that is the real improvement here.</li>

<li>Just as important, as you start to get a sense of what refactoring is, is that you stay very aware of what refactoring is not. And it's easy to get the wrong ideas because we're saying things like we're improving code. And that could imply all sorts of possible meanings. So, three things that refactoring is not. One, refactoring is not debugging. Your code already needs to work. Either on the small scale, you have some classes and methods that are already functional, testable and working. Or on the large scale you have an entire shipped application that's already in use.</li>

<li>Now it's true, during the process of refactoring you may notice something that you realize is a problem. But the moment that you start to deal with that. You have stopped refactoring and you have started bug fixing which is a very different mindset.</li>

<li>Number two. Refactoring is not performance. This is another very common misconception. That we do this to improve our code. We're cleaning our code up and that's going to make it faster. No, code performance is not the goal of refactoring nor, let me be quite clear here, is it even an expectation.</li>
<li>Refactoring might even make your code technically slower because we're making decisions about the construction of code, unlike building construction. The decisions you would make to build a house as well as possible are not the same as the decisions you would make to build a house as fast as possible. Improving pure performance is something we do in software development but that is a separate process with a different set of questions and a different set of tools. But there is one thing that gets faster with refactoring, us, we do, programmers.</li>

<li>We'll be able to read and understand it, not just individual pieces of code but the bigger application and that can lead to many benefits. Well re-factored code will make us faster. It is not intended to make the code faster. And finally, number three, refactoring is not adding features. If during this process you add a new feature, you support and you use case, you add a single tiny menu item to an application, you are no longer refactoring. Because in refactoring we do not change the behavior of the code.</li>

<li>Because well-structured code will make it so much easier to add new features and new capabilities.</li>

<li>It will make it easier to start analyzing performance. So we're refactoring to get the future roadblocks out of our way. Now, it can often be difficult for teams to get approval to spend time refactoring when it's not part of the culture, because the benefits aren't immediately apparent. Oh, you're not adding features, you're not working on performance, so why bother? We bother so we can do those things easier. We can add features quicker next week, or next month, or next year. So that we can bring new people onto the team and just point them at well-written code, rather than spend three months having to explain everything about what it does. And so that a year, or two, or three down the line, we don't have code that's such a mess.</li>

<li>if you don't have a reason to re-factor, then you don't re-factor.</li>

<li>unforeseen consequences</li>

<li>Bringing multiple sets of eyes to the same code.</li>

<li>Something about this code that just smells bad. And we use it as an indicator we have something to improve.</li>

<li>We're changing code and that brings risk. The single best way to prove that the changes you make when refactoring do what you intend. Only what you intend, and don't unwittingly mess everything else up is to have a set of automated unit tests you can run on your code before and after. So, using a test framework something like j unit for java, n unit for .Net, rspec for Ruby and so on.</li>
</ol>
</div>
</div>
<div id="outline-container-org48ea4c8" class="outline-3">
<h3 id="org48ea4c8"><span class="section-number-3">2.25</span> <a href="https://knpuniversity.com/screencast/phpunit">PHPUnit: Testing with a Bite</a></h3>
<div class="outline-text-3" id="text-2-25">
</div>
<div id="outline-container-org51f2e36" class="outline-4">
<h4 id="org51f2e36"><span class="section-number-4">2.25.1</span> 3 Types of Tests</h4>
<div class="outline-text-4" id="text-2-25-1">
<ol class="org-ol">
<li>Unit Test - Test one specific function on a class. Fake any needed database connecnions.</li>
<li>Integration Test - Just like unit test, except it use the real database connection.</li>
<li>Functional Test - Write a test to programmatically command a browser</li>
</ol>
</div>
</div>
<div id="outline-container-org1946fee" class="outline-4">
<h4 id="org1946fee"><span class="section-number-4">2.25.2</span> How much should I be testing my code?</h4>
<div class="outline-text-4" id="text-2-25-2">
<p>
If the feature scares you then test it!
Too many tests = wasted time, add little value, slow you down 
</p>
</div>
</div>
<div id="outline-container-org1cb7d29" class="outline-4">
<h4 id="org1cb7d29"><span class="section-number-4">2.25.3</span> TDD</h4>
<div class="outline-text-4" id="text-2-25-3">
<ol class="org-ol">
<li>Create the test</li>
<li>Write just enough code for the test to pass</li>
<li>Refactor your code</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org588c414" class="outline-3">
<h3 id="org588c414"><span class="section-number-3">2.26</span> <a href="https://www.lynda.com/Cucumber-tutorials/Behavior-Driven-Development/718635-2.html">Behavior-Driven Development</a></h3>
<div class="outline-text-3" id="text-2-26">
</div>
<div id="outline-container-org4833cde" class="outline-4">
<h4 id="org4833cde"><span class="section-number-4">2.26.1</span> The 5 Ws</h4>
<div class="outline-text-4" id="text-2-26-1">
</div>
<ol class="org-ol">
<li><a id="org76ec769"></a>As (who, what or where)<br /></li>
<li><a id="orge593675"></a>I (want)<br /></li>
<li><a id="orga69152a"></a>because (why)<br />
<div class="outline-text-5" id="text-2-26-1-3">
<p>
Example:
Who - as a user of Acme.com
What - I want to access content on my mobile phone
Why - because I might not always have a computer available
</p>

<p>
<a href="https://cucumber.io/training">https://cucumber.io/training</a> -&gt; 3 youtube
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org0e939bb" class="outline-4">
<h4 id="org0e939bb"><span class="section-number-4">2.26.2</span> Throw Over the Wall</h4>
<div class="outline-text-4" id="text-2-26-2">
</div>
<ol class="org-ol">
<li><a id="org0c52d2f"></a>Developers would coe and then throw it over the wall for someone else to test<br /></li>
</ol>
</div>
<div id="outline-container-org671db3b" class="outline-4">
<h4 id="org671db3b"><span class="section-number-4">2.26.3</span> After BDD Transformation</h4>
<div class="outline-text-4" id="text-2-26-3">
</div>
<ol class="org-ol">
<li><a id="org4c12705"></a>testing cycle went down<br /></li>
<li><a id="orgda001f8"></a>defect count went down<br /></li>
<li><a id="orgcec09a1"></a>time to market went down<br /></li>
<li><a id="org4525c62"></a>team's confidence in code increased and anxiety decreased<br /></li>
<li><a id="org48186ae"></a>manual testing cost went down<br />
<div class="outline-text-5" id="text-2-26-3-5">
<p>
"The hardest part of building a software system is deciding precisely what to build." - Fred Brooks
</p>


<p>
If you're having trouble, example mapping helps us keep these conversations short and on track by creating a visual representation of a user story to guide and document the discussion. The process of example mapping is fairly straightforward. Using a four-color pack of index cards, we build a visual representation of our user's story with each color providing a specific piece of information. We build this as we have our conversation to document what is discovered through the discussion about the user's story.
</p>

<p>
We begin with a yellow card, which contains the name of our story itself and place this at the very top. Our blue cards represent specific rules that constrain the scope of our story. This is our acceptance criteria. With green cards, we provide concrete examples of the user's story in the context of a specific rule. So we place these under the relevant blue card. And finally, we have our red cards. These cards contain questions that cannot be immediately answered during the discussion, but are captured so that we can move on with the conversation.
</p>
</div>
</li>

<li><a id="org53230b8"></a>Acceptance criteria<br />
<ol class="org-ol">
<li><a id="org76f4a40"></a>addresses what defines a working system<br /></li>
<li><a id="org9840f0f"></a>written as pass/fail<br /></li>
</ol>
</li>
<li><a id="orgcd6b80f"></a>Scenario<br />
<ol class="org-ol">
<li><a id="orge962a4b"></a>defines the initial conditions for acceptance criteria<br /></li>
<li><a id="org23b5e38"></a>states the trigger of scenario and expected outcome<br /></li>
</ol>
</li>
</ol>
</div>

<div id="outline-container-orge91d1eb" class="outline-4">
<h4 id="orge91d1eb"><span class="section-number-4">2.26.4</span> Gherkin Syntax</h4>
<div class="outline-text-4" id="text-2-26-4">
</div>
<ol class="org-ol">
<li><a id="org64869eb"></a>Feature: feature story - name of the feature and possibly brief description<br />
<ol class="org-ol">
<li><a id="orgfb4ed8c"></a>Scenario: a user story - single concrete example of how a system should behave - each feature generally have 5-20 scenarios - Scenarios describe the behaviour of the system under specific initial conditions.<br /></li>
<li><a id="orgccba15f"></a>Given: some set of initial conditions - describe the context or precondition for the scenario<br /></li>
<li><a id="org74929c0"></a>When: an event occurs - identifies an event or actor enacted by some actor on the system<br /></li>
<li><a id="org8589e1b"></a>Then: an outcome is expected - provides the expected outcome to the scenario<br /></li>
</ol>
</li>
</ol>
</div>

<div id="outline-container-orgdb3e640" class="outline-4">
<h4 id="orgdb3e640"><span class="section-number-4">2.26.5</span> Example</h4>
<div class="outline-text-4" id="text-2-26-5">
</div>
<ol class="org-ol">
<li><a id="orgd9274eb"></a>Feature : Customer pays with a credit card<br />
<ol class="org-ol">
<li><a id="org5e385dd"></a>As a sales associate<br /></li>
<li><a id="org01523c5"></a>I should be able to process payments<br /></li>
<li><a id="org45de77b"></a>when given a credit card<br />
<div class="outline-text-6" id="text-2-26-5-1-3">
<p>
Now we're ready to translate our conversation into scenarios that describe the concrete behavior of the application. Ideally, this is done using declared dephrasing, meaning without referencing the particulars of a user interface or sequence of steps. Remember that Gherkin is a way to phrase our acceptance criteria as an executable scenario that describes the behavior of a system. So, our conversations would describe the behavior of the system under specific initial conditions.
</p>
</div>
</li>

<li><a id="orgc434433"></a>Scenario 1<br />
<ol class="org-ol">
<li><a id="org9fee7e2"></a>Total charge is over the $2 credit card minimum.<br /></li>
<li><a id="org25fdb75"></a>Given: Maria orders $3 of coffee from Li.<br /></li>
<li><a id="orgd9a7636"></a>When: Maria pays with a credit card.<br /></li>
<li><a id="org1eaea6a"></a>Then:  Lit should process the payment.<br /></li>
</ol>
</li>

<li><a id="org48177b9"></a>Scenario 2<br />
<ol class="org-ol">
<li><a id="org6f87c4d"></a>Total charge is under the $2 credit card minimum.<br /></li>
<li><a id="orgc4c78ca"></a>Given: Maria orders $1 of coffee from Li.<br /></li>
<li><a id="org5636bee"></a>When: Maria pays with a credit card.<br /></li>
<li><a id="org0a76e7a"></a>Then: Li should not process the payment.<br /></li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
<div id="outline-container-org4d5f989" class="outline-4">
<h4 id="org4d5f989"><span class="section-number-4">2.26.6</span> Test Automation</h4>
<div class="outline-text-4" id="text-2-26-6">
<p>
Allows for the execution of software tests that compare the expectations for software with the actual outcomes. Testing can be repetitive process and automation can be a boon to productivity.
</p>
</div>
</div>

<div id="outline-container-org5a55f5c" class="outline-4">
<h4 id="org5a55f5c"><span class="section-number-4">2.26.7</span> Living Documentation</h4>
<div class="outline-text-4" id="text-2-26-7">
<p>
Is a system for dynamically generating documentation that contains information which is up to date and accurate.
Cucumber provides a system that dynamically generates documentation because of the manner that tests are written. Because Cucumber tests are written in a way that can be easily interpreted by non-technical stakeholders and, at the same time, be executed by a computer, your tests themselves become a living source of documentation that reflect the accuracy of your application. Cucumber was designed to enhance the practice of test-driven development. It provides a single source of truth for an application's lifecycle by merging test automation and test documentation.
</p>
</div>
</div>

<div id="outline-container-orgbb97ce1" class="outline-4">
<h4 id="orgbb97ce1"><span class="section-number-4">2.26.8</span> Further</h4>
<div class="outline-text-4" id="text-2-26-8">
</div>
<ol class="org-ol">
<li><a id="orgc762220"></a><a href="https://cucumber.io/school">https://cucumber.io/school</a><br /></li>
<li><a id="orgb9ae042"></a><a href="https://cucumber.io/training">https://cucumber.io/training</a><br /></li>
<li><a id="orgfa57e1c"></a>BDD in Action by John Ferguson Smart<br /></li>
<li><a id="org4b9d2e4"></a>The Cucomber Book by Aslak Hellesoy&#x2026;<br /></li>
</ol>
</div>
<div id="outline-container-org15513b0" class="outline-4">
<h4 id="org15513b0"><span class="section-number-4">2.26.9</span> Notes</h4>
<div class="outline-text-4" id="text-2-26-9">
</div>
<ol class="org-ol">
<li><a id="org88d08eb"></a>BDD is a process, not a tool<br /></li>
<li><a id="org5bab6bf"></a>Specialized frameworks can assist in this process by providing a common language for acceptance criteria.<br />
<div class="outline-text-5" id="text-2-26-9-2">
<p>
To types of BDD:
</p>
<ol class="org-ol">
<li>Story - is done with Behat &amp; functional tests</li>
<li>Spec  - is done with PHPSpec &amp; Unit tests</li>
</ol>

<p>
4 Steps to BDD
1.Define Business Value of all big features
2.Prioritize you features
3.Break feature down into user stories
4.Write the code for the feature
</p>

<p>
<a href="https://github.com/Behatch/contexts">https://github.com/Behatch/contexts</a>
</p>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-org175c4ab" class="outline-3">
<h3 id="org175c4ab"><span class="section-number-3">2.27</span> <a href="https://www.lynda.com/Selenium-tutorials/Test-Automation-Foundations/728391-2.html">Test Automation Foundations</a></h3>
<div class="outline-text-3" id="text-2-27">
<p>
Automated testing follows the same steps as manual testing, but it's much quicker. While there is an initial time investment to write the scripts, once the scripts are complete they can be run repeatedly without much additional cost.
</p>
</div>
<ol class="org-ol">
<li><a id="org82a8a33"></a>There will be maintenance that is required, but it saves time in the long run. This makes automation have a great return on investment. In addition, the exact same steps are executed every time, which reduces any possibility of human error.<br /></li>
<li><a id="org2386dad"></a>Agile Testing Quadrants<br /></li>
<li><a id="orge13124e"></a>Test Pyramid<br /></li>
</ol>
</div>
<div id="outline-container-org07c05c2" class="outline-3">
<h3 id="org07c05c2"><span class="section-number-3">2.28</span> <a href="https://youtu.be/bkjIEywt45Y">Clean Application Development</a> Adam Culp</h3>
<div class="outline-text-3" id="text-2-28">
<p>
bad code:
</p>
<ul class="org-ul">
<li>is easy</li>
<li><p>
fast
</p>

<p>
result:
</p></li>
<li>wasted time</li>
<li>bugs</li>
<li>excessive debugging</li>
<li>procrastination</li>
<li>missed deadlines</li>
<li>technical debt</li>
<li>financial losses</li>
<li>company killer</li>
<li>I didn't write it!</li>
</ul>

<p>
Names should be clear - functions and variables should tell a story
$elapsed -&gt; $elapsedTimeInDays
</p>

<p>
Class - nouns - Describe ex - Customer, Account, Product, Company
Method - verbs - getCustomer, closeAccount, updateProduct, addCompany
Function - 20 lines - 10 lines
</p>

<p>
Recognizing bad dosen't mean we know how to make good - we know a good/bad, but are not song writers
</p>

<p>
smells - are indications of problems in your code
</p>

<p>
CodeSniffer
</p>
</div>
</div>
<div id="outline-container-org2def10b" class="outline-3">
<h3 id="org2def10b"><span class="section-number-3">2.29</span> <a href="https://cleancoders.com/videos">https://cleancoders.com/videos</a></h3>
</div>
<div id="outline-container-org862dba5" class="outline-3">
<h3 id="org862dba5"><span class="section-number-3">2.30</span> <a href="https://github.com/slk500/DesignPatternsPHP">Design Patterns PHP</a></h3>
</div>
<div id="outline-container-orgfd37ba1" class="outline-3">
<h3 id="orgfd37ba1"><span class="section-number-3">2.31</span> <a href="https://youtu.be/a-BOSpxYJ9M">Agile is Dead • Pragmatic Dave Thomas</a></h3>
<div class="outline-text-3" id="text-2-31">
<ol class="org-ol">
<li>agile is adjective not noun</li>
<li>No Rules Are Universal. All Rules Need Context. All rules are contextual.</li>
<li>Agile is not what you do. Agility is how you do it.</li>
<li>If you about to jump put of airplane for the first time you don't care about the theory of aerodynamics you what to know what you pull and when</li>
</ol>
</div>
</div>
<div id="outline-container-orgf2b936d" class="outline-3">
<h3 id="orgf2b936d"><span class="section-number-3">2.32</span> <a href="https://github.com/HugoMatilla/Refactoring-Summary">Summary of "Refactoring: Improving the Design of Existing Code" by Martin Fowler</a></h3>
</div>
<div id="outline-container-orgd22e21e" class="outline-3">
<h3 id="orgd22e21e"><span class="section-number-3">2.33</span> <a href="https://vimeo.com/108441214">Greg Young - The art of destroying software</a></h3>
<div class="outline-text-3" id="text-2-33">
<p>
creating code
refactoring code
deleting code
</p>

<p>
delete ability
small programs
unix philospohy
rewrite ability
alan kay object orientation
diff great &amp; sucky code is size of the program
good code - small isolated programs that can be deleted on the fly
</p>
</div>
</div>
<div id="outline-container-org09e7ea9" class="outline-3">
<h3 id="org09e7ea9"><span class="section-number-3">2.34</span> Symfony</h3>
<div class="outline-text-3" id="text-2-34">
</div>
<div id="outline-container-orge93cdaf" class="outline-4">
<h4 id="orge93cdaf"><span class="section-number-4">2.34.1</span> <a href="https://github.com/ThomasBerends/symfony-certification-preparation-list">https://github.com/ThomasBerends/symfony-certification-preparation-list</a></h4>
</div>
<div id="outline-container-orgb1c99f3" class="outline-4">
<h4 id="orgb1c99f3"><span class="section-number-4">2.34.2</span> <a href="https://symfonycasts.com/screencast/symfony4-upgrade">Upgrade to Symfony4 and Flex!</a></h4>
<div class="outline-text-4" id="text-2-34-2">
<ol class="org-ol">
<li>Upgrade to Symfony 3.4</li>
<li>See depractions in toolbar
<ol class="org-ol">
<li>remove $kernel-&gt;loadClassCache(); from app.php &amp; app<sub>dev.php</sub></li>
<li>"Symfony\Component\Security\Guard\AuthenticatorInterface::supports()"</li>
<li>logout<sub>on</sub><sub>user</sub><sub>change</sub></li>
<li>&#x2026;</li>
</ol></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org4d1602c" class="outline-3">
<h3 id="org4d1602c"><span class="section-number-3">2.35</span> DateTime</h3>
<div class="outline-text-3" id="text-2-35">
<ul class="org-ul">
<li><a href="https://www.lynda.com/PHP-tutorials/PHP-Date-Time-Essential-Training/188214-2.html">PHP Date and Time Essential Training</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgffe75e3" class="outline-3">
<h3 id="orgffe75e3"><span class="section-number-3">2.36</span> Behat</h3>
<div class="outline-text-3" id="text-2-36">
</div>
<div id="outline-container-org0a2b227" class="outline-4">
<h4 id="org0a2b227"><span class="section-number-4">2.36.1</span> <a href="https://symfonycasts.com/screencast/behat">BDD, Behat, Mink and other Wonderful Things</a></h4>
<div class="outline-text-4" id="text-2-36-1">
<ul class="org-ul">
<li>Write the behavior for a feature first</li>
<li>Code until the behavioral tests pass</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org625f5c1"></a>Two types of BDD<br />
<div class="outline-text-5" id="text-2-36-1-1">
<ol class="org-ol">
<li>Story: is done with Behat &amp; functional tests</li>
<li>Spec: is done with PHPSpec &amp; Unit tests</li>
</ol>
</div>
</li>
<li><a id="orgdd5b9ea"></a>4 Steps to BDD<br />
<div class="outline-text-5" id="text-2-36-1-2">
<ol class="org-ol">
<li>Define Business Value of all big features</li>
<li>Prioritize your features</li>
<li>Break feature down into user stories</li>
<li>Write the code for the feature</li>
</ol>
</div>
</li>
</ol>
</div>
<div id="outline-container-org1f0696a" class="outline-4">
<h4 id="org1f0696a"><span class="section-number-4">2.36.2</span> <a href="https://kamilkokot.com/tame-behat-with-the-brand-new-symfony-extension/?fbclid=IwAR17apSVE_yYyXy7a0jxjokr70BcyZ7hbCujDenu6jKoxQcdQhY8zeW_aCo">Tame Behat with the Brand New Symfony Extension</a></h4>
</div>
<div id="outline-container-orgc90d66d" class="outline-4">
<h4 id="orgc90d66d"><span class="section-number-4">2.36.3</span> <a href="https://speakerdeck.com/doncallisto/behat-from-zero-to-hero-a-practical-guide-to-symfony-integration-and-usage?slide=118">Behat from zero to hero - A practical guide to symfony integration and usage</a></h4>
</div>
</div>
</div>
<div id="outline-container-org0ec0011" class="outline-2">
<h2 id="org0ec0011"><span class="section-number-2">3</span> Books</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org1f77ae4" class="outline-3">
<h3 id="org1f77ae4"><span class="section-number-3">3.1</span> Andrew Hunt, David Thomas - The Pragmatic Programmer: From Journeyman to Master</h3>
<div class="outline-text-3" id="text-3-1">
<p>
overall	skip	1999	a lot of tips &amp; tricks but too old
</p>
</div>
</div>
<div id="outline-container-org73c35d5" class="outline-3">
<h3 id="org73c35d5"><span class="section-number-3">3.2</span> William J. Brown, Raphael C. Malveau, Hays W. "Skip" McCormick, Thomas J. Mowbray Antipatterns. Refactoring Software, Archtectures and Projects in Crisis	1998</h3>
</div>
<div id="outline-container-org9094f26" class="outline-3">
<h3 id="org9094f26"><span class="section-number-3">3.3</span> Refactoring in Large Software Projects 2006</h3>
</div>
<div id="outline-container-org6a3fcea" class="outline-3">
<h3 id="org6a3fcea"><span class="section-number-3">3.4</span> Phillip A. Laplante, Colin J. Neill	Antipatterns: Identification, Refactoring, and Management 2005</h3>
</div>
<div id="outline-container-orgde1afde" class="outline-3">
<h3 id="orgde1afde"><span class="section-number-3">3.5</span> Fifty Quick Ideas To Improve Your Tests tests</h3>
</div>
<div id="outline-container-org8e6d7f7" class="outline-3">
<h3 id="org8e6d7f7"><span class="section-number-3">3.6</span> Growing Object-Oriented Software, Guided by Tests</h3>
</div>
<div id="outline-container-org2070eb5" class="outline-3">
<h3 id="org2070eb5"><span class="section-number-3">3.7</span> Working Effectively with Unit Tests</h3>
</div>
<div id="outline-container-orga91ba77" class="outline-3">
<h3 id="orga91ba77"><span class="section-number-3">3.8</span> Scalable Internet Architectures</h3>
</div>
<div id="outline-container-orgb914ef1" class="outline-3">
<h3 id="orgb914ef1"><span class="section-number-3">3.9</span> SQL for Smarties: Advanced SQL Programming	database 2005</h3>
</div>
<div id="outline-container-orgc769e49" class="outline-3">
<h3 id="orgc769e49"><span class="section-number-3">3.10</span> Anthology  The Thoughtworks Anthology - Essays on Software Technology and Innovation 2008</h3>
</div>
<div id="outline-container-org32318a1" class="outline-3">
<h3 id="org32318a1"><span class="section-number-3">3.11</span> Anthology  The ThoughtWorks Anthology 2 - More Essays on Software Technology and Innovation 2012</h3>
</div>
<div id="outline-container-org50278ea" class="outline-3">
<h3 id="org50278ea"><span class="section-number-3">3.12</span> Beck, Kent	Extreme Programming Explained: Embrace Change	overall	can be read 1999</h3>
</div>
<div id="outline-container-orgf6153b1" class="outline-3">
<h3 id="orgf6153b1"><span class="section-number-3">3.13</span> Bernstein, David Scott Beyond Legacy Code 2015 Want to read</h3>
</div>
<div id="outline-container-org05c751f" class="outline-3">
<h3 id="org05c751f"><span class="section-number-3">3.14</span> Bhargava, Aditya	Grokking Algorithms: An illustrated guide for programmers and other curious people</h3>
<div class="outline-text-3" id="text-3-14">
<p>
mmust read	2017	Fully illustrated, friendly, easy to read guide, worth to read. When you will stumble upon a problem, you will know how to recognize it and chose the right Algorithm
</p>
</div>
</div>
<div id="outline-container-org43381f1" class="outline-3">
<h3 id="org43381f1"><span class="section-number-3">3.15</span> Bloch, Joshua	Effective Java	2018</h3>
</div>
<div id="outline-container-orgcb368bf" class="outline-3">
<h3 id="orgcb368bf"><span class="section-number-3">3.16</span> Buenosvinos, Carlos	Domain-Driven Design in PHP 2016</h3>
</div>
<div id="outline-container-orgd5b5494" class="outline-3">
<h3 id="orgd5b5494"><span class="section-number-3">3.17</span> Bugayenko, Yegor	Elegant Objects	2016</h3>
<div class="outline-text-3" id="text-3-17">
<p>
Want to read
</p>
</div>
</div>
<div id="outline-container-org071a25d" class="outline-3">
<h3 id="org071a25d"><span class="section-number-3">3.18</span> Fowler, Martin	Patterns of Enterprise Application Architecture 2012</h3>
</div>
<div id="outline-container-org17046f2" class="outline-3">
<h3 id="org17046f2"><span class="section-number-3">3.19</span> Francesco Trucchia, Jacopo Romei	Pro PHP Refactoring 2010</h3>
<div class="outline-text-3" id="text-3-19">
<p>
Old, without PHP 7 but still the best PHP book about refactoring. Great examples. Worth to have.
</p>
</div>
</div>
<div id="outline-container-org2aa9862" class="outline-3">
<h3 id="org2aa9862"><span class="section-number-3">3.20</span> Ganesh, Samarthyam; Tushar, Sharma	Refactoring for Software Design Smells: Managing Technical Debt 2015</h3>
<div class="outline-text-3" id="text-3-20">
<p>
Catalog of smells. Focus on smell point of view. Also they introduce smell classification scheme, naming scheme for design smells which helps to increase awerness of smells. So definetly must read. (Java)
</p>
</div>
</div>
<div id="outline-container-orgb6a34d8" class="outline-3">
<h3 id="orgb6a34d8"><span class="section-number-3">3.21</span> Halladay, Steve Principle-Based Refactoring: Learning Software Design Principles by Applying Refactoring Rules 2012</h3>
<div class="outline-text-3" id="text-3-21">
<p>
Want to read
</p>
</div>
</div>
<div id="outline-container-org1d78549" class="outline-3">
<h3 id="org1d78549"><span class="section-number-3">3.22</span> Jones, Paul M. Modernizing Legacy Apps In PHP 2014</h3>
</div>
<div id="outline-container-org3fc61ff" class="outline-3">
<h3 id="org3fc61ff"><span class="section-number-3">3.23</span> Junade, Ali	Mastering PHP Design Patterns 2016</h3>
<div class="outline-text-3" id="text-3-23">
<p>
Little bit inmature, poorly written. Having a lot of tips and information about broad variaty of things which is a good place on website but not in the book. Code examples could be much better.
</p>
</div>
</div>
<div id="outline-container-orgb15493d" class="outline-3">
<h3 id="orgb15493d"><span class="section-number-3">3.24</span> Karwin, Bill SQL Antipatterns - Avoiding The Pitfalls of Database Programming 2010</h3>
</div>
<div id="outline-container-org08845f9" class="outline-3">
<h3 id="org08845f9"><span class="section-number-3">3.25</span> Kerievsky, Joshua	Refactoring to Patterns	2004</h3>
</div>
<div id="outline-container-orgce0052e" class="outline-3">
<h3 id="orgce0052e"><span class="section-number-3">3.26</span> Rahman, Mizanur	PHP 7 Data Structures and Algorithms 2017</h3>
</div>
<div id="outline-container-orgec584e4" class="outline-3">
<h3 id="orgec584e4"><span class="section-number-3">3.27</span> Scott J Ambler and Pramod J. Sadalage Refactoring Databases - Evolutionary Database Design 2006</h3>
<div class="outline-text-3" id="text-3-27">
<p>
refactoring	must read It's catalog of refactorings for database
</p>
</div>
</div>
<div id="outline-container-orgc2b94d5" class="outline-3">
<h3 id="orgc2b94d5"><span class="section-number-3">3.28</span> Stephane Faroult, Pascal L'Hermite	Refactoring SQL Application 2008</h3>
</div>
<div id="outline-container-org974668d" class="outline-3">
<h3 id="org974668d"><span class="section-number-3">3.29</span> Tornhill, Adam	Your Code as a Crime Scene - Use Forensic Techniques to Arrest Defects, Bottlenecks, and Bad Design in Your Programs 2015</h3>
</div>
<div id="outline-container-orgc611361" class="outline-3">
<h3 id="orgc611361"><span class="section-number-3">3.30</span> West, David Object Thinking  2004</h3>
</div>
<div id="outline-container-org68d6221" class="outline-3">
<h3 id="org68d6221"><span class="section-number-3">3.31</span> Back-end Performance</h3>
<div class="outline-text-3" id="text-3-31">
<p>
<a href="https://www.oreilly.com/library/view/back-end-performance/9781492069362/">https://www.oreilly.com/library/view/back-end-performance/9781492069362/</a>
</p>
</div>
</div>
<div id="outline-container-org0ea557a" class="outline-3">
<h3 id="org0ea557a"><span class="section-number-3">3.32</span> <span class="todo TODO">TODO</span> xUnit Test Patterns - Refactoring Test Code</h3>
<div class="outline-text-3" id="text-3-32">
<p>
<a href="http://xunitpatterns.com/index.html">http://xunitpatterns.com/index.html</a>
</p>
</div>
</div>
<div id="outline-container-orgca337de" class="outline-3">
<h3 id="orgca337de"><span class="section-number-3">3.33</span> Object Design Style Guide Matthias Noback</h3>
</div>
<div id="outline-container-org30718e0" class="outline-3">
<h3 id="org30718e0"><span class="section-number-3">3.34</span> Build APIs You Won't Hate</h3>
</div>
<div id="outline-container-orgb259f1f" class="outline-3">
<h3 id="orgb259f1f"><span class="section-number-3">3.35</span> McConnel, Steve "Code Complete 2"</h3>
</div>
<div id="outline-container-orgb6111b7" class="outline-3">
<h3 id="orgb6111b7"><span class="section-number-3">3.36</span> Joe Celko’s Trees and Hierarchies in SQL for Smarties</h3>
</div>
<div id="outline-container-org86d624f" class="outline-3">
<h3 id="org86d624f"><span class="section-number-3">3.37</span> Wake, William C.; Refactoring Workbook; 2003</h3>
<div class="outline-text-3" id="text-3-37">
</div>
<div id="outline-container-org3a50153" class="outline-4">
<h4 id="org3a50153"><span class="section-number-4">3.37.1</span> <a href="https://xp123.com/articles/refactoring-workbook/">https://xp123.com/articles/refactoring-workbook/</a></h4>
<div class="outline-text-4" id="text-3-37-1">
</div>
<ol class="org-ol">
<li><a id="org214f45e"></a>Taxonomy<br />
<ol class="org-ol">
<li><a id="org8a68592"></a><a href="http://mikamantyla.eu/BadCodeSmellsTaxonomy.html">Mika Mäntylä</a><br /></li>
<li><a id="org23bdee3"></a><a href="http://www.industriallogic.com/wp-content/uploads/2005/09/smellstorefactorings.pdf">Joshua Kerievsky</a><br /></li>
</ol>
</li>
</ol>
</div>
</div>
<div id="outline-container-org0022d03" class="outline-3">
<h3 id="org0022d03"><span class="section-number-3">3.38</span> Feathers, Michael; Working Effectively with Legacy Code; 2005</h3>
<div class="outline-text-3" id="text-3-38">
<ul class="org-ul">
<li>To me, legacy code is simply code without tests. I’ve gotten some grief for this definition. What do tests have to do with whether code is bad? To me, the answer is straightforward, and it is a point that I elaborate throughout the book: 'Code without tests is bad code. It doesn’t matter how well written it is; it doesn’t matter how pretty or object-oriented or well-encapsulated it is. With tests, we can change the behavior of our code quickly and verifiably. Without them, we really don’t know if our code is getting better or worse.'</li>

<li>being able to confidently make changes in any code base.</li>

<li>Preserving existing behavior</li>

<li>Changes in a system can be made in two primary ways. I like to call them Edit and Pray and Cover and Modify. Unfortunately, Edit and Pray is pretty much the industry standard. When you use Edit and Pray, you carefully plan the changes you are going to make, you make sure that you understand the code you are going to modify, and then you start to make the changes. When you’re done, you run the system to see if the change was enabled, and then you poke around further to make sure that you didn’t break anything. The poking around is essential. When you make your changes, you are hoping and praying that you’ll get them right, and you take extra time when you are done to make sure that you did.</li>

<li>&#x2026;testing is a tough problem, and people are often seduced by the idea that they can test through a GUI or web interface without having to do anything special to their application. It can be done, but it is usually more work than anyone on a team is prepared to admit. In addition, a user interface often isn’t the best place to write tests. UIs are often volatile and too far from the functionality being tested. When UI-based tests fail, it can be hard to figure out why. Regardless, people  often spend considerable money trying to do all of their testing with those sorts of tools.</li>

<li>Pay now or pay more later</li>
</ul>
</div>
</div>

<div id="outline-container-orgca171c8" class="outline-3">
<h3 id="orgca171c8"><span class="section-number-3">3.39</span> Fowler, Martin; Refactoring: Improving the Design of Existing Code; 2018</h3>
<div class="outline-text-3" id="text-3-39">
<ul class="org-ul">
<li>With any introductory example, however, I run into a problem. If I pick a large program, describing it and how it is refactored is too complicated for a mortal reader to work through.(&#x2026;) However, if I pick a program that is small enough to be comprehensible, refactoring does not look like it is worthwhile.</li>

<li>Thus, if I’m faced with modifying a program with hundreds of lines of code, I’d rather it be structured into a set of functions and other program elements that allow me to understand more easily what the program is doing. If the program lacks structure, it’s usually easier for me to add structure to the program first, and then make the change I need.</li>

<li>If the code works and doesn’t ever need to change, it’s perfectly fine to leave it alone. It would be nice to improve it, but unless someone needs to understand it, it isn’t causing any real harm. Yet as soon as someone does need to understand how that code works, and struggles to follow it, then you have to do something about it.</li>

<li>Refactoring changes the programs in small steps, so if you make a mistake, it is easy to find where the bug is.</li>

<li>Any fool can write code that a computer can understand. Good programmers write code that humans can understand.</li>

<li>The true test of good code is how easy it is to change it.</li>

<li>Refactoring (noun): a change made to the internal structure of software to make it easier to understand and cheaper to modify without changing its observable behavior</li>

<li>Refactoring (verb): to restructure software by applying a series of refactorings without changing its observable behavior.</li>

<li>Refactoring is very similar to performance optimization, as both involve carrying out code manipulations that don’t change the overall functionality of the program. The difference is the purpose: Refactoring is always done to make the code “easier to understand and cheaper to modify.” This might speed things up or slow things down. With performance optimization, I only care about speeding up the program, and am prepared to end up with code that is harder to work with if I really need that improved performance.</li>

<li>Without refactoring, the internal design—the architecture—of software tends to decay.As people change code to achieve short­term goals, often without a full comprehensionof the architecture, the code loses its structure. It becomes harder for me to see thedesign by reading the code. Loss of the structure of code has a cumulative effect. Theharder it is to see the design in the code, the harder it is for me to preserve it, and themore rapidly it decays. Regular refactoring helps keep the code in shape.</li>

<li>It reminds me of a statement Kent Beck often makes about himself: “I’m not a great programmer; I’m just a good programmer with great habits.” Refactoring helps me be much more effective at writing robust code.</li>

<li>Branches. As I write this, a common approach in teams is for each team member to work on abranch of the code base using a version control system, and do considerable work onthat branch before integrating with a mainline (often called master or trunk) sharedacross the team. Often, this involves building a whole feature on a branch, notintegrating into the mainline until the feature is ready to be released into production.Fans of this approach claim that it keeps the mainline clear of any in­process code,provides a clear version history of feature additions, and allows features to be revertedeasily should they cause problems.There are downsides to feature branches like this. The longer I work on an isolatedbranch, the harder the job of integrating my work with mainline is going to be when I’mdone. Most people reduce this pain by frequently merging or re­basing from mainlineto my branch. But this doesn’t really solve the problem when several people areworking on individual feature branches. I distinguish between merging and integration.If I merge mainline into my code, this is a oneway movement—my branch changes butthe mainline doesn’t. I use “integrate” to mean a two­way process that pulls changesfrom mainline into my branch and then pushes the result back into mainline, changingboth. If Rachel is working on her branch I don’t see her changes until she integrateswith mainline; at that point, I have to merge her changes into my feature branch, whichmay mean considerable work. The hard part of this work is dealing with semanticchanges. Modern version control systems can do wonders with merging complexchanges to the program text, but they are blind to the semantics of the code. If I’vechanged the name of a function, my version control tool may easily integrate mychanges with Rachel’s. But if, in her branch, she added a call to a function that I’verenamed in mine, the code will fail.The problem of complicated merges gets exponentially worse as the length of featurebranches increases. Integrating branches that are four weeks old is more than twice ashard as those that are a couple of weeks old. Many people, therefore, argue for keepingfeature branches short—perhaps just a couple of days. Others, such as me, want themeven shorter than that. This is an approach called Continuous Integration (CI), alsoknown as Trunk­Based Development. With CI, each team member integrates withmainline at least once per day. This prevents any branches diverting too far from eachother and thus greatly reduces the complexity of merges. CI doesn’t come for free: Itmeans you use practices to ensure the mainline is healthy, learn to break large featuresinto smaller chunks, and use feature toggles (aka feature flags) to switch off any in­process features that can’t be broken down.Fans of CI like it partly because it reduces the complexity of merges, but the dominantreason to favor CI is that it’s far more compatible with refactoring. Refactorings ofteninvolve making lots of little changes all over the code base—which are particularlyprone to semantic merge conflicts (such as renaming a widely used function). Many ofus have seen feature­branching teams that find refactorings so exacerbate mergeproblems that they stop refactoring. CI and re­factoring work well together, which iswhy Kent Beck combined them in Extreme Programming.I’m not saying that you should never use feature branches. If they are sufficiently short,their problems are much reduced. (Indeed, users of CI usually also use branches, butintegrate them with mainline each day.) Feature branches may be the right techniquefor open source projects where you have infrequent commits from programmers whoyou don’t know well (and thus don’t trust). But in a full­time development team, thecost that feature branches impose on refactoring is excessive. Even if you don’t go to fullCI, I certainly urge you to integrate as frequently as possible. You should also considerthe objective evidence [Forsgren et al.] that teams that use CI are more effective insoftware delivery.</li>
</ul>

<p>
131
</p>
</div>
</div>
<div id="outline-container-orgabff5f9" class="outline-3">
<h3 id="orgabff5f9"><span class="section-number-3">3.40</span> Martin, Robert C.; Clean Code: A Handbook of Agile Software Craftsmanship; 2009</h3>
<div class="outline-text-3" id="text-3-40">
<ul class="org-ul">
<li>There are two parts to learning craftsmanship: knowledge and work. You must gain the knowledge of principles, patterns, practices, and heuristics that a craftsman knows, and you must also grind that knowledge into your fingers, eyes, and gut by working hard and practicing.</li>
<li>Do not refer to a grouping of accounts as an accountList unless it’s actually a List. The word list means something specific to programmers. If the container holding the accounts is not actually a List, it may lead to false conclusions (even if the container is a List, it’s probably better not to encode the container type into the name). So accountGroup or bunchOfAccounts or just plain accounts would be better.</li>
<li>A truly awful example of disinformative names would be the use of lower-case L or uppercase O as variable names, especially in combination. The problem, of course, is that they look almost entirely like the constants one and zero, respectively.</li>
<li>Certainly a loop counter may be named i or j or k (though never l!) if its scope is very small and no other names can conflict with it. This is because those single-letter names for loop counters are traditional.</li>
</ul>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">a</span> = 1;
<span style="color: #51afef;">if</span> ( O == 1 )
a = <span style="color: #a9a1e1;">O1</span>;
<span style="color: #51afef;">else</span>
l = 01;
</pre>
</div>
</div>

<div id="outline-container-org5a49f2a" class="outline-4">
<h4 id="org5a49f2a"><span class="section-number-4">3.40.1</span> Naming</h4>
<div class="outline-text-4" id="text-3-40-1">
</div>
<ol class="org-ol">
<li><a id="orgb054dc2"></a>Use Intention-Revealing Names<br />
<div class="outline-text-5" id="text-3-40-1-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">d</span>; <span style="color: #5B6268;">//</span><span style="color: #5B6268;">elapsed time in days</span>
</pre>
</div>
<p>
The name d reveals nothing. It does not evoke a sense of elapsed time, nor of days. We
should choose a name that specifies what is being measured and the unit of that measure-
ment:
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">elapsedTimeInDays</span>;
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">daysSinceCreation</span>;
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">daysSinceModification</span>;
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">fileAgeInDays</span>;
</pre>
</div>
</div>
</li>
<li><a id="org80970de"></a>Make Meaningful Distinctions<br />
<div class="outline-text-5" id="text-3-40-1-2">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">copyChars</span>(<span style="color: #ECBE7B;">array</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">a1</span>, <span style="color: #ECBE7B;">array</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">a2</span>): <span style="color: #ECBE7B;">void</span> {
    <span style="color: #51afef;">for</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span> = 0; i &lt; count(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">a1</span>); i++) {
        a2[i] = a1[i];
    }
}
</pre>
</div>
<p>
This function reads much better when source and destination are used for the argument
names.
</p>
</div>
</li>
<li><a id="orga14baf2"></a>Use Pronounceable Names<br />
<div class="outline-text-5" id="text-3-40-1-3">
<p>
If you can’t pronounce it, you can’t discuss it without sounding like an idiot. 
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">DtaRcrd102</span> {
    <span style="color: #51afef;">private</span> Date genymdhms;
    <span style="color: #51afef;">private</span> Date modymdhms;
    <span style="color: #51afef;">private</span> <span style="color: #51afef;">final</span> String pszqint = <span style="color: #98be65;">"102"</span>;
    <span style="color: #5B6268;">/* </span><span style="color: #5B6268;">...</span><span style="color: #5B6268;"> */</span>
};

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Customer</span> {
    <span style="color: #51afef;">private</span> Date generationTimestamp;
    <span style="color: #51afef;">private</span> Date modificationTimestamp;;
    <span style="color: #51afef;">private</span> <span style="color: #51afef;">final</span> String recordId = <span style="color: #98be65;">"102"</span>;
    <span style="color: #5B6268;">/* </span><span style="color: #5B6268;">...</span><span style="color: #5B6268;"> */</span>
};
</pre>
</div>
</div>
</li>
<li><a id="org5303013"></a>Use Searchable Names<br />
<div class="outline-text-5" id="text-3-40-1-4">
<ul class="org-ul">
<li>Single-letter names and numeric constants have a particular problem in that they are not easy to locate across a body of text.</li>
<li>My personal preference is that single-letter names can ONLY be used as local variables inside short methods.</li>
<li>The length of a name should correspond to the size of its scope.</li>
</ul>
</div>
</li>
<li><a id="org249630c"></a>Interfaces and Implementations<br />
<div class="outline-text-5" id="text-3-40-1-5">
<ul class="org-ul">
<li>These are sometimes a special case for encodings. For example, say you are building an ABSTRACT FACTORY for the creation of shapes. This factory will be an interface and will be implemented by a concrete class. What should you name them? IShapeFactory and ShapeFactory? I prefer to leave interfaces unadorned. The preceding I, so common in today’s legacy wads, is a distraction at best and too much information at worst. I don’t want my users knowing that I’m handing them an interface. I just want them to know that it’s a ShapeFactory. So if I must encode either the interface or the implementation, I choose the implementation. Calling it ShapeFactoryImp , or even the hideous CShapeFactory, is pref- erable to encoding the interface.</li>
<li><a href="https://www.php-fig.org/bylaws/psr-naming-conventions/">PSR Naming Conventions</a> - Interfaces MUST be suffixed by Interface: e.g. Psr\Foo\BarInterface.</li>
</ul>
</div>
</li>
<li><a id="orge08925c"></a>Avoid Mental Mapping<br />
<div class="outline-text-5" id="text-3-40-1-6">
<p>
Readers shouldn’t have to mentally translate your names into other names they already know. This problem generally arises from a choice to use neither problem domain terms nor solution domain terms.
</p>
</div>
</li>
<li><a id="orga86575c"></a>Class Names<br />
<div class="outline-text-5" id="text-3-40-1-7">
<p>
Classes and objects should have noun or noun phrase names like Customer, WikiPage, Account, and AddressParser. Avoid words like Manager, Processor, Data, or Info in the name of a class. A class name should not be a verb.
</p>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org9919138" class="outline-3">
<h3 id="org9919138"><span class="section-number-3">3.41</span> Martin, Robert C.; Agile Software Development: Principles, Patterns, and Practices; 2002</h3>
</div>
<div id="outline-container-orgeeef5f0" class="outline-3">
<h3 id="orgeeef5f0"><span class="section-number-3">3.42</span> Design It!: From Programmer to Software Architect (The Pragmatic Programmers) 1st Edition by Michael Keelin</h3>
</div>
<div id="outline-container-org6a24104" class="outline-3">
<h3 id="org6a24104"><span class="section-number-3">3.43</span> Mastering the SPL Library</h3>
</div>
<div id="outline-container-org5503ffd" class="outline-3">
<h3 id="org5503ffd"><span class="section-number-3">3.44</span> Zandstra, Matt "PHP Objects, Patterns, and Practice" 2008</h3>
<div class="outline-text-3" id="text-3-44">
<p>
Pretty old. But written with precise language and with great examples                                                                                                                                        |
</p>
</div>
</div>
<div id="outline-container-orga049114" class="outline-3">
<h3 id="orga049114"><span class="section-number-3">3.45</span> <span class="todo TODO">TODO</span> The Psychology of Computer Programming</h3>
</div>
</div>
<div id="outline-container-org3adb07f" class="outline-2">
<h2 id="org3adb07f"><span class="section-number-2">4</span> Smells</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orgd9c5cf0" class="outline-3">
<h3 id="orgd9c5cf0"><span class="section-number-3">4.1</span> Booch’s fundamental design principles</h3>
<div class="outline-text-3" id="text-4-1">
<p>
based on Ganesh, Samarthyam; Tushar, Sharma	Refactoring for Software Design Smells: Managing Technical Debt
</p>
</div>
<div id="outline-container-orgb609a87" class="outline-4">
<h4 id="orgb609a87"><span class="section-number-4">4.1.1</span> abstraction</h4>
<div class="outline-text-4" id="text-4-1-1">
</div>
<ol class="org-ol">
<li><a id="org8caf285"></a>Missing Abstraction<br />
<div class="outline-text-5" id="text-4-1-1-1">
<p>
Clumps of data or encoded strings are used instead of creating a class or an interface
</p>

<p>
PROBLEMS:
</p>
<ul class="org-ul">
<li>it can expose implementation details to different abstractions, violating the principle of encapsulation.</li>
<li>When data and associated behavior are spread across abstractions, it can</li>
</ul>
<p>
lead to tight coupling between entities, resulting in brittle and non-reusable
code. Hence, not creating necessary abstractions also violates the principle of
modularization.
</p>

<p>
POTENTIAL CAUSES:
</p>

<p>
Inadequate design analysis
When careful thought is not applied during design, it is easy to overlook creating
abstractions and use primitive type values or strings to “get the work done.” In our
experience, this often occurs when software is developed under tight deadlines or
resource constraints.
</p>

<p>
Lack of refactoring
As requirements change, software evolves and entities that were earlier represented
using strings or primitive types may need to be refactored into classes or interfaces.
When the existing clumps of data or encoded strings are retained as they are without
refactoring them, it can lead to a Missing Abstraction smell.
</p>

<p>
Misguided focus on minor performance gains
This smell often results when designers compromise design quality for minor performance gains.
For instance, we have observed developers using arrays directly in the code
instead of creating appropriate abstractions since they feel that indexing arrays is faster
than accessing members in objects. In most contexts, the performance gains due to such
“optimizations” are minimal, and do not justify the resultant trade-off in design quality.
</p>

<p>
<a href="https://steemit.com/php/@crell/php-use-associative-arrays-basically-never">https://steemit.com/php/@crell/php-use-associative-arrays-basically-never</a>
</p>

<p>
REFACTOR - The refactoring for this smell is to create abstraction(s) that can internally make use
of primitive type values or strings. For example, if a primitive type value is used as a
“type-code,” then apply “replace type-code with class”.
</p>

<p>
ALIAS:
Primitive Obsession — This smell occurs when primitive types are used for
encoding dates, currency, etc. instead of creating classes.
</p>

<p>
Data clumps — This smell occurs when there are clumps of data items that
occur together in lots of places instead of creating a class.
</p>
</div>
</li>
<li><a id="orgdd7b415"></a>Imperative Abstraction<br />
<div class="outline-text-5" id="text-4-1-1-2">
<p>
Consider the case of a large-sized financial application. This application employs classes named CreateReport, CopyReport, DisplayReport, etc. to deal with its report generation functionality. Each class has exactly one method definition named create, copy, display, etc., respectively, and suffers from Imperative Abstraction smell. The data items relating to a report such as name of the report, data elements that need to be  displayed in the report, kind of report, etc. are housed in a “data class” named Report. The smell not only increases the number of classes (in this case there are at least four classes when ideally one could have been used), but also increases the complexity involved in development and maintenance because of the unnecessary separation of cohesive methods.
</p>

<p>
Reification
“Reification” is the promotion or elevation of something that is not an object into an
object. When we reify behavior, it is possible to store it, pass it, or transform it. Reifica-
tion improves flexibility of the system at the cost of introducing some complexity [52].
Many design patterns [54] employ reification. Examples:
</p>


<p>
• State pattern: Encoding a state-machine.
</p>

<p>
• Command pattern: Encoding requests as command objects. A permitted excep-
tion for this smell is when a Command pattern has been used to objectify
method requests.
</p>

<p>
• Strategy pattern: Parameterizing a procedure in terms of an operation it uses.
</p>

<p>
In other words, when we consciously design in such a way to elevate non-objects
to objects for better reusability, flexibility, and extensibility (i.e., for improving
design quality), it is not a smell.
</p>


<p>
ALIASES
“Operation class” [51,52] — This smell occurs when an operation that should
have been a method within a class has been turned into a class itself.
</p>
</div>
</li>
<li><a id="org6829cbc"></a>Incomplete Abstraction<br />
<div class="outline-text-5" id="text-4-1-1-3">
<p>
An abstraction (entity or interface) does not support complementary or interrelated methods completely
For example, if we need to be able to add or remove elements in a data
structure, the type abstracting that data structure should support both add() and
remove() methods. Supporting only one of them makes the abstraction incomplete
and incoherent in the context of those interrelated methods.
</p>

<p>
missing “complementary and symmetric” methods,
</p>

<p>
Min/max Open/close Create/destroy Get/set
Read/write Print/scan First/last Begin/end
Start/stop Lock/unlock Show/hide Up/down
First/last Push/pull
Enable/disable  Left/right On/off
</p>

<p>
Sometimes, a designer may make a conscious design decision to not provide sym-
metric or matching methods. For example, in a read-only collection, only add()
method may be provided without the corresponding remove() method. In such a
case, the abstraction may appear incomplete, but is not a smell.
</p>


<p>
Sometimes, APIs choose to replace symmetrical methods with a method that takes
a boolean argument (for instance, to enforce a particular naming convention such as
naming convention that requires accessors to have prefixes “get,” “is,” or
“set”). For example, classes such as java.awt.MenuItem and java.awt.Component
originally supported disable() and enable() methods. These methods were dep-
recated and are now replaced with setEnabled(boolean) method. Similarly, java.
awt.Component has the method setVisible(boolean) that deprecates the methods
show() and hide(). One would be tempted to mark these classes as Incomplete
Abstractions since they lack symmetric methods, i.e., getEnabled() and getVisi-
ble() respectively. However, since there is no need for corresponding getter methods
(as these methods take a boolean argument), these classes do not have Incomplete
Abstraction smell.
</p>




<p>
ALIASES
This smell is also known in literature as:
</p>

<p>
• “Class supports incomplete behavior” [18]—This smell occurs when the public
interface of a class is incomplete and does not support all the behavior needed
by objects of that class.
</p>

<p>
• “Half-hearted operations” [63]—This smell occurs when interrelated methods
provided in an incomplete or in an inconsistent way; this smell could lead to
runtime problems.
</p>
</div>
</li>
<li><a id="org569b7c0"></a>Multifaceted Abstraction<br />
<div class="outline-text-5" id="text-4-1-1-4">
<p>
This smell arises when an abstraction has more than one responsibility assigned to it.
</p>

<p>
In particular, the Single Responsibility Principle says that an abstraction should have a single
well-defined responsibility and that responsibility should be entirely encapsulated
within that abstraction. 
</p>

<p>
ALIASES
This smell is also known in literature as:
</p>

<p>
• “Divergent change” [7]—This smell occurs when a class is changed for differ-
ent reasons.
</p>

<p>
• “Conceptualization abuse” [30]—This smell occurs when two or more non-
cohesive concepts have been packed into a single class of the system.
</p>

<p>
• “Large class” [7,24,57,58]—This smell occurs when a class has “too many”
responsibilities.
</p>

<p>
• “Lack of cohesion” [59]—This smell occurs when there is a large type in a
design with low cohesion, i.e., a “kitchen sink” type that represents many
abstractions.
</p>
</div>
</li>
<li><a id="org0131255"></a>Unnecessary Abstraction<br />
<div class="outline-text-5" id="text-4-1-1-5">
<p>
An abstraction that is not needed
ALIASES:
Irrelevant class - class does not have any meaningful behavior in the design
Lazy class / Freeloader — class does “too little”
Small class - class has no (or too few) variables or no (or too few) methods in it
Mini-class - a public, non-nested class defines less than three methods and less than three attributes (including constants) in it
No responsibility - class has no responsibility associated with it
Agent classes - class serve as an “agent” (i.e., they only pass messages from one class to another), indicating that the class may be unnecessary
</p>
</div>
</li>
<li><a id="orgd85fac4"></a>Unutilized Abstraction<br />
<div class="outline-text-5" id="text-4-1-1-6">
<p>
UNUTILIZED ABSTRACTION
An abstraction is left unused (either not directly used or not
reachable). This smell manifests in two forms:
</p>

<p>
• Unreferenced abstractions—Concrete classes that are not being used by anyone
• Orphan abstractions—Stand-alone interfaces/abstract classes that do not have
any derived abstractions
</p>


<p>
		This smell violates the principle YAGNI (You
Aren’t Gonna Need It), which recommends not adding functionality until deemed
necessary [53]
</p>

<p>
		When an abstraction is left unused
in design, it does not serve a meaningful purpose in design, and hence violates the
principle of abstraction.
</p>

<p>
POTENTIAL CAUSES:
Leftover garbage during maintenance or refactoring.
Speculative generality - abstractions are introduced speculating that they may be required sometime in future.
</p>


<p>
REFACTORING:
remove the Unutilized Abstraction from the design.
</p>

<p>
IMPACT:
pollutes the design space and increases cognitive load. This impacts understandability.
UNUTILIZED ABSTRACTION
Two or more abstractions have identical names or identical implementation or both
</p>


<p>
POTENTIAL CAUSES:
</p>

<p>
Copy-paste programming
The “get-the-work-done” mindset of a programmer leads him to copy and paste code
instead of applying proper abstraction.
Ad hoc maintenance
When the software undergoes haphazard fixes or enhancements over many years, it
leaves “crufts”6 with lots of redundant code in it.
Lack of communication
Often, in industrial software, code duplication occurs because different people work
on the same code at different times in the life cycle of the software. They are not
aware of existing classes or methods and end up re-inventing the wheel.
</p>

<p>
REFACTORING:
For identical name form, the suggested refactoring is to rename one of the abstrac-
tions to a unique name.
In the case of the identical implementation form of Duplicate Abstraction, if the
implementations are exactly the same, one of the implementations can be removed.
If the implementations are slightly different, then the common implementation in
the duplicate abstractions can be factored out into a common class.
</p>


<p>
IMPACT:
it affects understandability of the design. Developers of client code will be confused and unclear about the choice
of the abstraction that should be used by their code.
</p>

<p>
identical implementation (i.e., they have duplicate code), it becomes difficult to maintain them.
In summary, this smell indicates a violation of the DRY (Don’t Repeat Yourself)
principle.
		If the DRY principle is not fol-
lowed, a modification of an element within the system requires modifications to other
logically unrelated elements making maintainability a nightmare. Since there is dupli-
cation among abstractions in the design, this smell is named Duplicate Abstraction.
</p>

<p>
3.7.6 ALIASES
This smell is also known in literature as:
</p>

<p>
•	“Alternative classes with different interfaces” [7]—This smell occurs when
classes do similar things, but have different names.
•	“Duplicate design artifacts” [74]—This smell occurs when equivalent design
artifacts are replicated throughout the architecture.
</p>
</div>
</li>
<li><a id="orgcae9198"></a>Duplicate Abstraction<br />
<div class="outline-text-5" id="text-4-1-1-7">
<p>
UNUTILIZED ABSTRACTION
Two or more abstractions have identical names or identical implementation or both
</p>


<p>
POTENTIAL CAUSES:
</p>

<p>
Copy-paste programming
The “get-the-work-done” mindset of a programmer leads him to copy and paste code
instead of applying proper abstraction.
Ad hoc maintenance
When the software undergoes haphazard fixes or enhancements over many years, it
leaves “crufts”6 with lots of redundant code in it.
Lack of communication
Often, in industrial software, code duplication occurs because different people work
on the same code at different times in the life cycle of the software. They are not
aware of existing classes or methods and end up re-inventing the wheel.
</p>

<p>
REFACTORING:
For identical name form, the suggested refactoring is to rename one of the abstrac-
tions to a unique name.
In the case of the identical implementation form of Duplicate Abstraction, if the
implementations are exactly the same, one of the implementations can be removed.
If the implementations are slightly different, then the common implementation in
the duplicate abstractions can be factored out into a common class.
</p>


<p>
IMPACT:
it affects understandability of the design. Developers of client code will be confused and unclear about the choice
of the abstraction that should be used by their code.
</p>

<p>
identical implementation (i.e., they have duplicate code), it becomes difficult to maintain them.
In summary, this smell indicates a violation of the DRY (Don’t Repeat Yourself)
principle.
		If the DRY principle is not fol-
lowed, a modification of an element within the system requires modifications to other
logically unrelated elements making maintainability a nightmare. Since there is dupli-
cation among abstractions in the design, this smell is named Duplicate Abstraction.
</p>

<p>
3.7.6 ALIASES
This smell is also known in literature as:
</p>

<p>
•	“Alternative classes with different interfaces” [7]—This smell occurs when
classes do similar things, but have different names.
•	“Duplicate design artifacts” [74]—This smell occurs when equivalent design
artifacts are replicated throughout the architecture.
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org7ebb9d5" class="outline-4">
<h4 id="org7ebb9d5"><span class="section-number-4">4.1.2</span> encapsulation</h4>
</div>
<div id="outline-container-orga11025e" class="outline-4">
<h4 id="orga11025e"><span class="section-number-4">4.1.3</span> modularization</h4>
</div>
<div id="outline-container-org7c78850" class="outline-4">
<h4 id="org7c78850"><span class="section-number-4">4.1.4</span> hierarchy</h4>
</div>
</div>
<div id="outline-container-orgf99197a" class="outline-3">
<h3 id="orgf99197a"><span class="section-number-3">4.2</span> Normal</h3>
<div class="outline-text-3" id="text-4-2">
</div>
<div id="outline-container-org1d1e796" class="outline-4">
<h4 id="org1d1e796"><span class="section-number-4">4.2.1</span> Alias Duplicates</h4>
<div class="outline-text-4" id="text-4-2-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">use</span> <span style="color: #ECBE7B;">App\Model\Category\Query</span> <span style="color: #51afef;">as</span> <span style="color: #ECBE7B;">CategoryQuery</span>;
<span style="color: #51afef;">use</span> <span style="color: #ECBE7B;">App\Model\Product\Contract\Query</span> <span style="color: #51afef;">as</span> <span style="color: #ECBE7B;">ProductQueryInterface</span>;
<span style="color: #51afef;">use</span> <span style="color: #ECBE7B;">App\Contract\Query</span> <span style="color: #51afef;">as</span>
</pre>
</div>
<ul class="org-ul">
<li><a href="https://www.tomasvotruba.cz/blog/2019/05/02/alias-as-a-code-smell/">https://www.tomasvotruba.cz/blog/2019/05/02/alias-as-a-code-smell/</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgb2fa810" class="outline-4">
<h4 id="orgb2fa810"><span class="section-number-4">4.2.2</span> Alternative Classes With Different Interfaces</h4>
</div>
<div id="outline-container-org2224f3e" class="outline-4">
<h4 id="org2224f3e"><span class="section-number-4">4.2.3</span> Comments</h4>
<div class="outline-text-4" id="text-4-2-3">
<p>
If you need a comment to explain what a block of code does, try Extract Function (106). If the method is already extracted but you still need a comment to explain what it does, use Change Function Declaration (124) to rename it. If you need to state some rules about the required state of the system, use Introduce Assertion (302).
</p>
</div>
</div>
<div id="outline-container-orga79b463" class="outline-4">
<h4 id="orga79b463"><span class="section-number-4">4.2.4</span> Data Class</h4>
</div>
<div id="outline-container-orgee7a311" class="outline-4">
<h4 id="orgee7a311"><span class="section-number-4">4.2.5</span> Data Clumps</h4>
<div class="outline-text-4" id="text-4-2-5">
<p>
Fix: Use Extract Class (182) on the fields to turn the clumps into an object.
</p>
</div>
</div>
<div id="outline-container-org88ff691" class="outline-4">
<h4 id="org88ff691"><span class="section-number-4">4.2.6</span> Divergent Change</h4>
<div class="outline-text-4" id="text-4-2-6">
<p>
Within Classes
</p>
</div>
</div>
<div id="outline-container-orgb92cc76" class="outline-4">
<h4 id="orgb92cc76"><span class="section-number-4">4.2.7</span> Duplicated Code</h4>
<div class="outline-text-4" id="text-4-2-7">
<p>
Within Classes
Same code structure in more than one place
Don't Repeat Yourself (DRY)
</p>
</div>
<ol class="org-ol">
<li><a id="orgd3df6ba"></a>Same expression in different places<br />
<div class="outline-text-5" id="text-4-2-7-1">
<p>
The simplest duplicated code problem is when you have the same expression in two
methods of the same class. Then all you have to do is Extract Function and invoke the code from both places.
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org0b0fb0c" class="outline-4">
<h4 id="org0b0fb0c"><span class="section-number-4">4.2.8</span> Feature Envy</h4>
<div class="outline-text-4" id="text-4-2-8">
<p>
Between Classes	A method accesses the data of another object more than its own data
</p>
</div>
</div>
<div id="outline-container-orgd3b8c47" class="outline-4">
<h4 id="orgd3b8c47"><span class="section-number-4">4.2.9</span> Global Data</h4>
<div class="outline-text-4" id="text-4-2-9">
<p>
"Global data is especially nasty when it’s mutable. Global data that you can guarantee
never changes after the program starts is relatively safe—if you have a language that can
enforce that guarantee."
Fix: Encapsulate Variable
</p>
</div>
</div>
<div id="outline-container-org81f3fde" class="outline-4">
<h4 id="org81f3fde"><span class="section-number-4">4.2.10</span> Insider Trading</h4>
</div>
<div id="outline-container-org4ebfd6d" class="outline-4">
<h4 id="org4ebfd6d"><span class="section-number-4">4.2.11</span> Large Class</h4>
<div class="outline-text-4" id="text-4-2-11">
<p>
Within Classes	
A class contains too many fields, methods, lines of code.
Fix: Extract Class, Extract Superclass, Replace Type Code with Subclass
</p>
</div>
</div>
<div id="outline-container-org112ccb7" class="outline-4">
<h4 id="org112ccb7"><span class="section-number-4">4.2.12</span> Lazy Element</h4>
<div class="outline-text-4" id="text-4-2-12">
<p>
It may be a function that’s named the same as its body code reads, or a class that is essentially one simple function.
Fix: Inline Function, Inline Class, Collapse Hierarchy
</p>
</div>
</div>
<div id="outline-container-orgcd68db0" class="outline-4">
<h4 id="orgcd68db0"><span class="section-number-4">4.2.13</span> Long Function</h4>
<div class="outline-text-4" id="text-4-2-13">
<p>
Within Classes
Fix: Extract Function
</p>
</div>
</div>
<div id="outline-container-orgeff67be" class="outline-4">
<h4 id="orgeff67be"><span class="section-number-4">4.2.14</span> Long Parameter List</h4>
<div class="outline-text-4" id="text-4-2-14">
<p>
Within Classes
Fix: Replace Parameter with Query, Preserve Whole Object, INtroduce PArameter Object, Remove Flag Argument, Combine Functions into Class
</p>
</div>
</div>
<div id="outline-container-org06f9b06" class="outline-4">
<h4 id="org06f9b06"><span class="section-number-4">4.2.15</span> Loops</h4>
<div class="outline-text-4" id="text-4-2-15">
<p>
Fix: Replace Loop with Pipeline
</p>
</div>
</div>
<div id="outline-container-org9832b84" class="outline-4">
<h4 id="org9832b84"><span class="section-number-4">4.2.16</span> Message Chains</h4>
<div class="outline-text-4" id="text-4-2-16">
<p>
    You see message chains when a client asks one object for another object, which the client then asks for yet another object, which the client then asks for yet another another object, and so on.
95 
</p>
</div>
</div>
<div id="outline-container-orge085586" class="outline-4">
<h4 id="orge085586"><span class="section-number-4">4.2.17</span> Middle Man</h4>
<div class="outline-text-4" id="text-4-2-17">
<p>
Fix: Remove Middle Man, Inline Function, Replace Superclass with Delegate, Replace Subclass with Delegate
</p>
</div>
</div>
<div id="outline-container-orgd00fd5b" class="outline-4">
<h4 id="orgd00fd5b"><span class="section-number-4">4.2.18</span> Mysterious Name</h4>
<div class="outline-text-4" id="text-4-2-18">
<p>
Fix: Change Function Declaration, Rename Variable, Rename Field
</p>
</div>
</div>
<div id="outline-container-org29627dc" class="outline-4">
<h4 id="org29627dc"><span class="section-number-4">4.2.19</span> Primitive Obsession</h4>
<div class="outline-text-4" id="text-4-2-19">
<p>
Primitive types: integers, floating point numbers and strings. Money, coordinates or ranges.
Fix: Replace Primitive with Object
</p>
</div>
</div>
<div id="outline-container-org9eaf155" class="outline-4">
<h4 id="org9eaf155"><span class="section-number-4">4.2.20</span> Refused Bequest</h4>
</div>
<div id="outline-container-org1c22683" class="outline-4">
<h4 id="org1c22683"><span class="section-number-4">4.2.21</span> Repeated Switches</h4>
</div>
<div id="outline-container-org0dc11ab" class="outline-4">
<h4 id="org0dc11ab"><span class="section-number-4">4.2.22</span> Shotgun Surgery</h4>
</div>
<div id="outline-container-org3a06276" class="outline-4">
<h4 id="org3a06276"><span class="section-number-4">4.2.23</span> Speculative Generality</h4>
<div class="outline-text-4" id="text-4-2-23">
<p>
“Oh, I think we’ll need the ability to do this kind of thing someday”
</p>
</div>
</div>
<div id="outline-container-org03cb4aa" class="outline-4">
<h4 id="org03cb4aa"><span class="section-number-4">4.2.24</span> Temporary Field</h4>
</div>
</div>
</div>
<div id="outline-container-org82ad924" class="outline-2">
<h2 id="org82ad924"><span class="section-number-2">5</span> Database</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org2b8acf7" class="outline-3">
<h3 id="org2b8acf7"><span class="section-number-3">5.1</span> config</h3>
<div class="outline-text-3" id="text-5-1">
<p>
MySQL configuration file:
mysql &#x2013;help | grep "Default options" -A 1
<a href="https://www.digitalocean.com/community/tutorials/how-to-allow-remote-access-to-mysql">https://www.digitalocean.com/community/tutorials/how-to-allow-remote-access-to-mysql</a>
</p>
</div>

<div id="outline-container-org24cf1c3" class="outline-4">
<h4 id="org24cf1c3"><span class="section-number-4">5.1.1</span> this works</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
Log in to the MySQL on the remote database server and create a user which is allowed to access database server remotely from 203.0.113.2:
</p>

<p>
mysql&gt; CREATE USER 'root'@'203.0.113.2' IDENTIFIED BY 'root<sub>password</sub>';
mysql&gt; GRANT ALL PRIVILEGES ON <b>.</b> TO 'root'@'203.0.113.2' WITH GRANT OPTION;
mysql&gt; FLUSH PRIVILEGES;
</p>

<p>
Or database user which can access the server from any host:
</p>

<p>
mysql&gt; CREATE USER 'root'@'%' IDENTIFIED BY 'root<sub>password</sub>';
mysql&gt; GRANT ALL PRIVILEGES ON <b>.</b> TO 'root'@'%' WITH GRANT OPTION;
mysql&gt; FLUSH PRIVILEGES;
</p>
</div>
</div>
</div>
<div id="outline-container-orgec36033" class="outline-3">
<h3 id="orgec36033"><span class="section-number-3">5.2</span> commmands</h3>
<div class="outline-text-3" id="text-5-2">
<p>
SELECT @@sql<sub>mode</sub> 
</p>
</div>
</div>
<div id="outline-container-org2c71cbd" class="outline-3">
<h3 id="org2c71cbd"><span class="section-number-3">5.3</span> Stuctures</h3>
<div class="outline-text-3" id="text-5-3">
</div>
<div id="outline-container-orgeea3253" class="outline-4">
<h4 id="orgeea3253"><span class="section-number-4">5.3.1</span> Hierarchical database model</h4>
<div class="outline-text-4" id="text-5-3-1">
<p>
The hierarchical database model mandates that each child record has only one parent, whereas each parent record can have one or more child records.
</p>
</div>
<ol class="org-ol">
<li><a id="orge6303b6"></a>Adjacency List Model<br /></li>
<li><a id="org6cdb891"></a>Nested set model<br />
<div class="outline-text-5" id="text-5-3-1-2">
<ul class="org-ul">
<li>The model doesn't allow for multiple parent categories. For example, an 'Oak' could be a child of 'Tree-Type', but also 'Wood-Type'. An additional tagging or taxonomy has to be established to accommodate this, again leading to a design more complex than a straightforward fixed model. [SQL Antipatterns. p. 328.]</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org4fe5d21" class="outline-3">
<h3 id="org4fe5d21"><span class="section-number-3">5.4</span> Refactorings</h3>
<div class="outline-text-3" id="text-5-4">
</div>
<div id="outline-container-orgd9756b4" class="outline-4">
<h4 id="orgd9756b4"><span class="section-number-4">5.4.1</span> Add CRUD Methods</h4>
<div class="outline-text-4" id="text-5-4-1">
<p>
Introduce stored procedures (methods) to implement the creation,
retrieval, update, and deletion (CRUD) of the data representing a business entity.
</p>
</div>
</div>
<div id="outline-container-orga096b8b" class="outline-4">
<h4 id="orga096b8b"><span class="section-number-4">5.4.2</span> Add Foreign Key Constraint</h4>
<div class="outline-text-4" id="text-5-4-2">
<p>
Add a foreign key constraint to an existing table to enforce
a relationship to another table.
</p>
</div>
</div>
<div id="outline-container-org5594884" class="outline-4">
<h4 id="org5594884"><span class="section-number-4">5.4.3</span> Add Lookup Table</h4>
<div class="outline-text-4" id="text-5-4-3">
<p>
Create a lookup table for an existing column.
</p>
</div>
</div>
<div id="outline-container-org9032f37" class="outline-4">
<h4 id="org9032f37"><span class="section-number-4">5.4.4</span> Add Mirror Table</h4>
<div class="outline-text-4" id="text-5-4-4">
<p>
Create a mirror table, an exact duplicate of an existing table in one
database, in another database.
</p>
</div>
</div>
<div id="outline-container-org47db2ad" class="outline-4">
<h4 id="org47db2ad"><span class="section-number-4">5.4.5</span> Add Parameter</h4>
<div class="outline-text-4" id="text-5-4-5">
<p>
Existing method needs information that was not passed in before.
</p>
</div>
</div>
<div id="outline-container-orgc108dc4" class="outline-4">
<h4 id="orgc108dc4"><span class="section-number-4">5.4.6</span> Add Read Method</h4>
<div class="outline-text-4" id="text-5-4-6">
<p>
Introduce a methodin this case, a stored procedureto implement the
retrieval of the data representing zero or more business entities from the database.
</p>
</div>
</div>
<div id="outline-container-org54ba6fe" class="outline-4">
<h4 id="org54ba6fe"><span class="section-number-4">5.4.7</span> Add Trigger For Calculated Column</h4>
<div class="outline-text-4" id="text-5-4-7">
<p>
Introduce a new trigger to update the value
contained in a calculated column.
</p>
</div>
</div>
<div id="outline-container-org468d3de" class="outline-4">
<h4 id="org468d3de"><span class="section-number-4">5.4.8</span> Apply Standard Codes</h4>
<div class="outline-text-4" id="text-5-4-8">
<p>
Apply a standard set of code values to a single column to ensure
that it conforms to the values of similar columns stored elsewhere in the database.
</p>
</div>
</div>
<div id="outline-container-org33aad66" class="outline-4">
<h4 id="org33aad66"><span class="section-number-4">5.4.9</span> Apply Standard Type</h4>
<div class="outline-text-4" id="text-5-4-9">
<p>
Ensure that the data type of a column is consistent with the data
type of other similar columns within the database.
</p>
</div>
</div>
<div id="outline-container-orgf644635" class="outline-4">
<h4 id="orgf644635"><span class="section-number-4">5.4.10</span> Consolidate Conditional Expression</h4>
<div class="outline-text-4" id="text-5-4-10">
<p>
Combine sequence of conditional tests into a
single conditional expression and extract it.
</p>
</div>
</div>
<div id="outline-container-org56dfd5c" class="outline-4">
<h4 id="org56dfd5c"><span class="section-number-4">5.4.11</span> Consolidate Key Strategy</h4>
<div class="outline-text-4" id="text-5-4-11">
<p>
Choose a single key strategy for an entity and apply it
consistently throughout your database.
</p>
</div>
</div>
<div id="outline-container-org0410862" class="outline-4">
<h4 id="org0410862"><span class="section-number-4">5.4.12</span> Decompose Conditional</h4>
<div class="outline-text-4" id="text-5-4-12">
<p>
Extract methods from the condition.
</p>
</div>
</div>
<div id="outline-container-org85d7ac3" class="outline-4">
<h4 id="org85d7ac3"><span class="section-number-4">5.4.13</span> Drop Column</h4>
<div class="outline-text-4" id="text-5-4-13">
<p>
Remove a column from an existing table.
</p>
</div>
</div>
<div id="outline-container-org828d62d" class="outline-4">
<h4 id="org828d62d"><span class="section-number-4">5.4.14</span> Drop Column Constraint</h4>
<div class="outline-text-4" id="text-5-4-14">
<p>
Remove a column constraint from an existing table.
</p>
</div>
</div>
<div id="outline-container-org6d22b46" class="outline-4">
<h4 id="org6d22b46"><span class="section-number-4">5.4.15</span> Drop Default Value</h4>
<div class="outline-text-4" id="text-5-4-15">
<p>
Remove the default value that is provided by a database from an
existing table column.
</p>
</div>
</div>
<div id="outline-container-org837e3f6" class="outline-4">
<h4 id="org837e3f6"><span class="section-number-4">5.4.16</span> Drop Foreign Key Constraint</h4>
<div class="outline-text-4" id="text-5-4-16">
<p>
Remove a foreign key constraint from an existing table so
that a relationship to another table is no longer enforced by the database.
</p>
</div>
</div>
<div id="outline-container-org400a4ba" class="outline-4">
<h4 id="org400a4ba"><span class="section-number-4">5.4.17</span> Drop Non-Nullable</h4>
<div class="outline-text-4" id="text-5-4-17">
<p>
Change an existing non-nullable column so that it accepts null
values.
</p>
</div>
</div>
<div id="outline-container-orge9671a2" class="outline-4">
<h4 id="orge9671a2"><span class="section-number-4">5.4.18</span> Drop Table</h4>
<div class="outline-text-4" id="text-5-4-18">
<p>
Remove an existing table from the database.
</p>
</div>
</div>
<div id="outline-container-orgca7eddd" class="outline-4">
<h4 id="orgca7eddd"><span class="section-number-4">5.4.19</span> Drop View</h4>
<div class="outline-text-4" id="text-5-4-19">
<p>
Remove an existing view.
</p>
</div>
</div>
<div id="outline-container-orgb026f24" class="outline-4">
<h4 id="orgb026f24"><span class="section-number-4">5.4.20</span> Encapsulate Table With View</h4>
<div class="outline-text-4" id="text-5-4-20">
<p>
Wrap access to an existing table with a view.
</p>
</div>
</div>
<div id="outline-container-orgf183ab0" class="outline-4">
<h4 id="orgf183ab0"><span class="section-number-4">5.4.21</span> Extract Method</h4>
<div class="outline-text-4" id="text-5-4-21">
<p>
Turn the code fragment into a method whose name explains the
purpose of the method.Insert Data (page 296): Insert data into an existing table.
</p>
</div>
</div>
<div id="outline-container-orgc8ecbd8" class="outline-4">
<h4 id="orgc8ecbd8"><span class="section-number-4">5.4.22</span> Introduce Calculated Column</h4>
<div class="outline-text-4" id="text-5-4-22">
<p>
Introduce a new column based on calculations involving
data in one or more tables.
</p>
</div>
</div>
<div id="outline-container-org988c0e0" class="outline-4">
<h4 id="org988c0e0"><span class="section-number-4">5.4.23</span> Introduce Calculation Method</h4>
<div class="outline-text-4" id="text-5-4-23">
<p>
Introduce a new method, typically a stored function,
which implements a calculation that uses data stored within the database.
</p>
</div>
</div>
<div id="outline-container-orgf3cfb88" class="outline-4">
<h4 id="orgf3cfb88"><span class="section-number-4">5.4.24</span> Introduce Cascading Delete</h4>
<div class="outline-text-4" id="text-5-4-24">
<p>
Ensure that the database automatically deletes the
appropriate "child records" when a "parent record" is deleted.
</p>
</div>
</div>
<div id="outline-container-orgead3d98" class="outline-4">
<h4 id="orgead3d98"><span class="section-number-4">5.4.25</span> Introduce Column Constraint</h4>
<div class="outline-text-4" id="text-5-4-25">
<p>
Introduce a column constraint in an existing table.
</p>
</div>
</div>
<div id="outline-container-orgfc566eb" class="outline-4">
<h4 id="orgfc566eb"><span class="section-number-4">5.4.26</span> Introduce Common Format</h4>
<div class="outline-text-4" id="text-5-4-26">
<p>
Apply a consistent format to all the data values in an
existing table column.
</p>
</div>
</div>
<div id="outline-container-orgdf12af0" class="outline-4">
<h4 id="orgdf12af0"><span class="section-number-4">5.4.27</span> Introduce Default Value</h4>
<div class="outline-text-4" id="text-5-4-27">
<p>
Let the database provide a default value for an existing table
column.
</p>
</div>
</div>
<div id="outline-container-org22ebe82" class="outline-4">
<h4 id="org22ebe82"><span class="section-number-4">5.4.28</span> Introduce Hard Delete</h4>
<div class="outline-text-4" id="text-5-4-28">
<p>
Remove an existing column which indicates that a row has been
deleted and instead actually delete the row.
</p>
</div>
</div>
<div id="outline-container-org4ba3e88" class="outline-4">
<h4 id="org4ba3e88"><span class="section-number-4">5.4.29</span> Introduce Index</h4>
<div class="outline-text-4" id="text-5-4-29">
<p>
Introduce a new index of either unique or non-unique type.
</p>
</div>
</div>
<div id="outline-container-orgfa1c8c8" class="outline-4">
<h4 id="orgfa1c8c8"><span class="section-number-4">5.4.30</span> Introduce New Column</h4>
<div class="outline-text-4" id="text-5-4-30">
<p>
Introduce a new column in an existing table.
</p>
</div>
</div>
<div id="outline-container-org1520e43" class="outline-4">
<h4 id="org1520e43"><span class="section-number-4">5.4.31</span> Introduce New Table</h4>
<div class="outline-text-4" id="text-5-4-31">
<p>
Introduce a new table in an existing database.
</p>
</div>
</div>
<div id="outline-container-orgad9bba1" class="outline-4">
<h4 id="orgad9bba1"><span class="section-number-4">5.4.32</span> Introduce Read-Only Table</h4>
<div class="outline-text-4" id="text-5-4-32">
<p>
Create a read-only data store based on existing tables in
the database.
</p>
</div>
</div>
<div id="outline-container-orgcbe8a45" class="outline-4">
<h4 id="orgcbe8a45"><span class="section-number-4">5.4.33</span> <span class="done DONE">DONE</span> Introduce Soft Delete</h4>
<div class="outline-text-4" id="text-5-4-33">
<p>
Introduce a flag to an existing table which indicates that a row has been deleted instead of actually deleting the row.
</p>
</div>
<ol class="org-ol">
<li><a id="orgffb70aa"></a>Motivation<br />
<div class="outline-text-5" id="text-5-4-33-1">
<p>
preserve all application data, typically for historical means.
</p>
</div>
</li>
<li><a id="org2feb8c3"></a>Tradeoffs<br />
<ol class="org-ol">
<li><a id="orgc188373"></a>more data - table have to store valid rows and those mark as deleted<br /></li>
<li><a id="org6f64ed0"></a>performance - more data means reduction in query performace - the additional work of distinguishing between deleted and nondeleted rows<br /></li>
<li><a id="org9fa9d45"></a>code complexity<br />
<ol class="org-ol">
<li><a id="org2b11adb"></a>mostly in every query we would have to remember add 'where isDeleted = false'<br /></li>
<li><a id="orga0cd2dc"></a>you may have associations going from Table A to Table B and when you soft delete something from Table A, you need to ensure that independent queries on Table B take care of that fact.<br /></li>
</ol>
</li>
<li><a id="org7954c35"></a>break immutability<br />
<div class="outline-text-6" id="text-5-4-33-2-4">
<p>
ORM - objects are not deleted they are being mutated - you are modyfing data not deleting
</p>
</div>
</li>
<li><a id="org26555ba"></a>break data integrity<br />
<div class="outline-text-6" id="text-5-4-33-2-5">
<ul class="org-ul">
<li>like a half of data in database is valid other half is invalid</li>
<li>can happen - foreign key from valid to invalid data</li>
</ul>
</div>
</li>
</ol>
</li>
<li><a id="orgcf98733"></a>How<br />
<ol class="org-ol">
<li><a id="orgc7b4f00"></a>Introduce New Column<br />
<ol class="org-ol">
<li><a id="org143166c"></a>isDeleted<br />
<ol class="org-ol">
<li><a id="org0140828"></a>bool not null false<br /></li>
<li><a id="org2adbbc5"></a>date/timestamp null<br /></li>
</ol>
</li>
</ol>
</li>
<li><a id="org286a81b"></a>Update<br />
<ol class="org-ol">
<li><a id="orgb566cb3"></a>application<br /></li>
<li><a id="orgdbcce89"></a>database trigger - it is simple and it avoids the risk that the applications will not update the column properly<br /></li>
</ol>
</li>
</ol>
</li>
<li><a id="orge9f95f9"></a>Opposite<br />
<div class="outline-text-5" id="text-5-4-33-4">
<p>
Introduce Hard Delete
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgfdb5f45" class="outline-4">
<h4 id="orgfdb5f45"><span class="section-number-4">5.4.34</span> Introduce Surrogate Key</h4>
<div class="outline-text-4" id="text-5-4-34">
<p>
Replace an existing natural key with a surrogate key.
</p>
</div>
</div>
<div id="outline-container-orgb02a25c" class="outline-4">
<h4 id="orgb02a25c"><span class="section-number-4">5.4.35</span> Introduce Trigger For History</h4>
<div class="outline-text-4" id="text-5-4-35">
<p>
Introduce a new trigger to capture data changes for historical purposes.
</p>
</div>
<ol class="org-ol">
<li><a id="org3ebcc1c"></a>Motivation<br />
<div class="outline-text-5" id="text-5-4-35-1">
<p>
delegate the tracking of data changes to the database itself
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-orga4ca752" class="outline-4">
<h4 id="orga4ca752"><span class="section-number-4">5.4.36</span> Introduce Variable</h4>
<div class="outline-text-4" id="text-5-4-36">
<p>
Put the result of the expression, or parts of the expression, in a
temporary variable with a name that explains the purpose.
</p>
</div>
</div>
<div id="outline-container-org812e51e" class="outline-4">
<h4 id="org812e51e"><span class="section-number-4">5.4.37</span> Introduce View</h4>
<div class="outline-text-4" id="text-5-4-37">
<p>
Create a view based on existing tables in the database.
</p>
</div>
<ol class="org-ol">
<li><a id="org5b81d94"></a>Motivation<br />
<ol class="org-ol">
<li><a id="org2b4f846"></a>Summarize data for reporting. Many reports require summary data, which can be generated via the view definition.<br /></li>
<li><a id="org1819fea"></a>Replace redundant reads. Several external programs, or stored procedures for that matter, often implement the same retrieval query. These queries can be replaced by a common readonly table or view.<br /></li>
<li><a id="orgb93f325"></a>Data security. A view can be used to provide end users with read access to data but not update privileges.<br /></li>
<li><a id="org0d1de33"></a>Encapsulate access to a table. Some organizations choose to encapsulate access to tables by defining updateable views that external programs access instead of the source tables. This enables the organization to easily perform database refactorings such as Rename Column (page 109) or Rename Table (page 113) without impacting the external applications, because views add an encapsulation layer between your tables and your application.<br /></li>
<li><a id="org652a63c"></a>Reduce SQL duplication. When you have complex SQL queries in an application, it is common to discover that parts of the SQL are duplicated in many places. When this is the case, you should introduce views to extract out the duplicate SQL, as shown in the example section.<br /></li>
</ol>
</li>

<li><a id="orgead4019"></a>Tradeoffs<br />
<ol class="org-ol">
<li><a id="org913eed1"></a>poor performance of the joins<br /></li>
<li><a id="org36753ec"></a>increases the coupling with database schemas<br /></li>
</ol>
</li>
</ol>
</div>

<div id="outline-container-org9859231" class="outline-4">
<h4 id="org9859231"><span class="section-number-4">5.4.38</span> Make Column Non-Nullable</h4>
<div class="outline-text-4" id="text-5-4-38">
<p>
Change an existing column so that it does not accept any
null values.
</p>
</div>
</div>
<div id="outline-container-orgf3950b1" class="outline-4">
<h4 id="orgf3950b1"><span class="section-number-4">5.4.39</span> Merge Columns</h4>
<div class="outline-text-4" id="text-5-4-39">
<p>
Merge two or more columns within a single table.
</p>
</div>
</div>
<div id="outline-container-orgf3d8527" class="outline-4">
<h4 id="orgf3d8527"><span class="section-number-4">5.4.40</span> Merge Tables</h4>
<div class="outline-text-4" id="text-5-4-40">
<p>
Merge two or more tables into a single table.
</p>
</div>
</div>
<div id="outline-container-orgca98c4b" class="outline-4">
<h4 id="orgca98c4b"><span class="section-number-4">5.4.41</span> Migrate Method From Database</h4>
<div class="outline-text-4" id="text-5-4-41">
<p>
Rehost an existing database method (a stored
procedure, stored function, or trigger) in the application(s) which currently invoke it.
</p>
</div>
</div>
<div id="outline-container-orgcd1144d" class="outline-4">
<h4 id="orgcd1144d"><span class="section-number-4">5.4.42</span> Migrate Method To Database</h4>
<div class="outline-text-4" id="text-5-4-42">
<p>
Rehost existing application logic in the database.
</p>
</div>
</div>
<div id="outline-container-orgb1d9420" class="outline-4">
<h4 id="orgb1d9420"><span class="section-number-4">5.4.43</span> Move Column</h4>
<div class="outline-text-4" id="text-5-4-43">
<p>
Migrate a table column, with all of its data, to another existing table.
</p>
</div>
</div>
<div id="outline-container-org7a612a5" class="outline-4">
<h4 id="org7a612a5"><span class="section-number-4">5.4.44</span> Move Data</h4>
<div class="outline-text-4" id="text-5-4-44">
<p>
Move the data contained within a table, either all or a subset of its columns,
to another existing table.
</p>
</div>
</div>
<div id="outline-container-org0abad4e" class="outline-4">
<h4 id="org0abad4e"><span class="section-number-4">5.4.45</span> Parameterize Method</h4>
<div class="outline-text-4" id="text-5-4-45">
<p>
Create one method that uses a parameter for the different
values.
</p>
</div>
</div>
<div id="outline-container-org9eccfb1" class="outline-4">
<h4 id="org9eccfb1"><span class="section-number-4">5.4.46</span> Remove Control Flag</h4>
<div class="outline-text-4" id="text-5-4-46">
<p>
Use return or break instead of a variable acting as a control flag.
</p>
</div>
</div>
<div id="outline-container-orgfd682b8" class="outline-4">
<h4 id="orgfd682b8"><span class="section-number-4">5.4.47</span> Remove Middle Man</h4>
<div class="outline-text-4" id="text-5-4-47">
<p>
Get the caller to call the method directly.
</p>
</div>
</div>
<div id="outline-container-orgf341ab4" class="outline-4">
<h4 id="orgf341ab4"><span class="section-number-4">5.4.48</span> Remove Parameter</h4>
<div class="outline-text-4" id="text-5-4-48">
<p>
Remove a parameter no longer used by the method body.
</p>
</div>
</div>
<div id="outline-container-orgb4e46f9" class="outline-4">
<h4 id="orgb4e46f9"><span class="section-number-4">5.4.49</span> Rename Column</h4>
<div class="outline-text-4" id="text-5-4-49">
<p>
Rename an existing table column with a name that explains its purpose.
</p>
</div>
</div>
<div id="outline-container-org6767819" class="outline-4">
<h4 id="org6767819"><span class="section-number-4">5.4.50</span> Rename Method</h4>
<div class="outline-text-4" id="text-5-4-50">
<p>
Rename an existing method with a name that explains its purpose.
</p>
</div>
</div>
<div id="outline-container-org0700529" class="outline-4">
<h4 id="org0700529"><span class="section-number-4">5.4.51</span> Rename Table</h4>
<div class="outline-text-4" id="text-5-4-51">
<p>
Rename an existing table with a name that explains its purpose.
</p>
</div>
</div>
<div id="outline-container-org553e4c5" class="outline-4">
<h4 id="org553e4c5"><span class="section-number-4">5.4.52</span> Rename View</h4>
<div class="outline-text-4" id="text-5-4-52">
<p>
Rename an existing view with a name that explains its purpose.
</p>
</div>
</div>
<div id="outline-container-org2b1e7ac" class="outline-4">
<h4 id="org2b1e7ac"><span class="section-number-4">5.4.53</span> Reorder Parameters</h4>
<div class="outline-text-4" id="text-5-4-53">
<p>
Change the order of the parameters of a method.
</p>
</div>
</div>
<div id="outline-container-orgd6a5b01" class="outline-4">
<h4 id="orgd6a5b01"><span class="section-number-4">5.4.54</span> Replace Column</h4>
<div class="outline-text-4" id="text-5-4-54">
<p>
Replace an existing non-key column with a new one.
</p>
</div>
</div>
<div id="outline-container-org0335126" class="outline-4">
<h4 id="org0335126"><span class="section-number-4">5.4.55</span> Replace LOB With Table</h4>
<div class="outline-text-4" id="text-5-4-55">
<p>
Replace a large object (LOB) column that contains structured data with a new table or in the same table.
</p>
</div>
</div>
<div id="outline-container-orgab88853" class="outline-4">
<h4 id="orgab88853"><span class="section-number-4">5.4.56</span> Replace Literal With Table Lookup</h4>
<div class="outline-text-4" id="text-5-4-56">
<p>
Replace code constants with values from database tables.
</p>
</div>
</div>
<div id="outline-container-orgf653d76" class="outline-4">
<h4 id="orgf653d76"><span class="section-number-4">5.4.57</span> Replace Method(s) With View</h4>
<div class="outline-text-4" id="text-5-4-57">
<p>
Create a view based on one or more existing database
methods (stored procedures, stored functions, or triggers) within the database.
</p>
</div>
</div>
<div id="outline-container-org29396e9" class="outline-4">
<h4 id="org29396e9"><span class="section-number-4">5.4.58</span> Replace Nested Conditional With Guard Clauses</h4>
<div class="outline-text-4" id="text-5-4-58">
<p>
Remove nested if conditions with a series of separate IF statements.
</p>
</div>
</div>
<div id="outline-container-org1619958" class="outline-4">
<h4 id="org1619958"><span class="section-number-4">5.4.59</span> Replace One-To-Many With Associative Table</h4>
<div class="outline-text-4" id="text-5-4-59">
<p>
Replace a one-to-many association between two tables with an associative table.
</p>
</div>
</div>
<div id="outline-container-org9538a8b" class="outline-4">
<h4 id="org9538a8b"><span class="section-number-4">5.4.60</span> Replace Parameter With Explicit Methods</h4>
<div class="outline-text-4" id="text-5-4-60">
<p>
Create a separate method for each value of the parameter.
</p>
</div>
</div>
<div id="outline-container-org5735fca" class="outline-4">
<h4 id="org5735fca"><span class="section-number-4">5.4.61</span> Replace Surrogate Key With Natural Key</h4>
<div class="outline-text-4" id="text-5-4-61">
<p>
Replace a surrogate key with an existing natural key.
</p>
</div>
</div>
<div id="outline-container-org088e8a5" class="outline-4">
<h4 id="org088e8a5"><span class="section-number-4">5.4.62</span> Replace Type Code With Property Flags</h4>
<div class="outline-text-4" id="text-5-4-62">
<p>
Replace a code column with individual property flags, usually implemented as Boolean columns, within the same table column.
</p>
</div>
</div>
<div id="outline-container-orgd66fe1c" class="outline-4">
<h4 id="orgd66fe1c"><span class="section-number-4">5.4.63</span> Replace View With Method(s)</h4>
<div class="outline-text-4" id="text-5-4-63">
<p>
Replace an existing view with one or more existing
methods (stored procedures, stored functions, or triggers) within the database.
</p>
</div>
</div>
<div id="outline-container-orgb1ee254" class="outline-4">
<h4 id="orgb1ee254"><span class="section-number-4">5.4.64</span> Split Column</h4>
<div class="outline-text-4" id="text-5-4-64">
<p>
Split a column into one or more columns within a single table.
</p>
</div>
</div>
<div id="outline-container-org54087aa" class="outline-4">
<h4 id="org54087aa"><span class="section-number-4">5.4.65</span> Split Table</h4>
<div class="outline-text-4" id="text-5-4-65">
<p>
Vertically split (e.g., by columns) an existing table into one or more tables.
</p>
</div>
</div>
<div id="outline-container-orge3f3eb5" class="outline-4">
<h4 id="orge3f3eb5"><span class="section-number-4">5.4.66</span> Split Temporary Variable</h4>
<div class="outline-text-4" id="text-5-4-66">
<p>
Make a separate temporary variable for each assignment.
</p>
</div>
</div>
<div id="outline-container-org01d1e68" class="outline-4">
<h4 id="org01d1e68"><span class="section-number-4">5.4.67</span> Substitute Algorithm</h4>
<div class="outline-text-4" id="text-5-4-67">
<p>
Replace the body of the method with the new algorithm.
</p>
</div>
</div>
<div id="outline-container-orgc52e769" class="outline-4">
<h4 id="orgc52e769"><span class="section-number-4">5.4.68</span> Update Data</h4>
<div class="outline-text-4" id="text-5-4-68">
<p>
Update data within an existing table.
</p>
</div>
</div>
<div id="outline-container-orgefe5839" class="outline-4">
<h4 id="orgefe5839"><span class="section-number-4">5.4.69</span> Use Official Data Source</h4>
<div class="outline-text-4" id="text-5-4-69">
<p>
Use the official data source for a given entity, instead of the
current one you are using.
</p>
</div>
</div>
</div>
<div id="outline-container-orgf96d81e" class="outline-3">
<h3 id="orgf96d81e"><span class="section-number-3">5.5</span> NoSQL</h3>
<div class="outline-text-3" id="text-5-5">
</div>
<div id="outline-container-orgdb7e004" class="outline-4">
<h4 id="orgdb7e004"><span class="section-number-4">5.5.1</span> <a href="https://app.pluralsight.com/courses/cc31161d-22da-4590-b95d-83bb67545fef/table-of-contents">Understanding NoSQL</a></h4>
<div class="outline-text-4" id="text-5-5-1">
</div>
<ol class="org-ol">
<li><a id="orgc08b39a"></a>don't offer ACID<br /></li>
<li><a id="orgae42e3f"></a>eventual consistency<br />
<div class="outline-text-5" id="text-5-5-1-2">
<p>
similar to DNS propagation
</p>
</div>
</li>
<li><a id="orge9817bf"></a>indexing<br />
<div class="outline-text-5" id="text-5-5-1-3">
<p>
are indexed by key, some allow so-called "secondary" indexes
</p>
</div>
</li>
<li><a id="orgeb5ad41"></a>MapReduce<br /></li>
</ol>
</div>
</div>
<div id="outline-container-org06e62a7" class="outline-3">
<h3 id="org06e62a7"><span class="section-number-3">5.6</span> MySQL vs. PostgreSQL</h3>
<div class="outline-text-3" id="text-5-6">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">MySQL</th>
<th scope="col" class="org-left">PostgreSQL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">relational database management system</td>
<td class="org-left">object-relational database management system</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
similar to a relational database, but with an object-oriented database model: objects, classes and inheritance are directly supported in database schemas and in the query language. In addition, just as with pure relational systems, it supports extension of the data model with custom data types and methods. 
</p>

<p>
The characteristic properties of ORDBMS are 1) complex data, 2) type inheritance, and 3) object behavior. Complex data creation in most SQL ORDBMSs is based on preliminary schema definition via the user-defined type (UDT). Hierarchy within structured complex data offers an additional property, type inheritance. That is, a structured type can have subtypes that reuse all of its attributes and contain additional attributes specific to the subtype. Another advantage, the object behavior, is related with access to the program objects
</p>
</div>
</div>
<div id="outline-container-org8f07236" class="outline-3">
<h3 id="org8f07236"><span class="section-number-3">5.7</span> Dictionary</h3>
<div class="outline-text-3" id="text-5-7">
<p>
massive hardware injection
</p>
</div>
</div>
<div id="outline-container-org234a8be" class="outline-3">
<h3 id="org234a8be"><span class="section-number-3">5.8</span> ACID</h3>
<div class="outline-text-3" id="text-5-8">
</div>
<div id="outline-container-org8f916b4" class="outline-4">
<h4 id="org8f916b4"><span class="section-number-4">5.8.1</span> Atomicity</h4>
<div class="outline-text-4" id="text-5-8-1">
<p>
Transactions are often composed of multiple statements. Atomicity guarantees that each transaction is treated as a single "unit", which either succeeds completely, or fails completely: if any of the statements constituting a transaction fails to complete, the entire transaction fails and the database is left unchanged. An atomic system must guarantee atomicity in each and every situation, including power failures, errors and crashes.
</p>
</div>
</div>

<div id="outline-container-org5e938cf" class="outline-4">
<h4 id="org5e938cf"><span class="section-number-4">5.8.2</span> Consistency</h4>
<div class="outline-text-4" id="text-5-8-2">
<p>
Consistency ensures that a transaction can only bring the database from one valid state to another, maintaining database invariants: any data written to the database must be valid according to all defined rules, including constraints, cascades, triggers, and any combination thereof. This prevents database corruption by an illegal transaction, but does not guarantee that a transaction is correct. Referential integrity guarantees the primary key - foreign key relationship.
</p>
</div>
</div>

<div id="outline-container-orgdbeb7ed" class="outline-4">
<h4 id="orgdbeb7ed"><span class="section-number-4">5.8.3</span> Isolation</h4>
<div class="outline-text-4" id="text-5-8-3">
<p>
Transactions are often executed concurrently (e.g., multiple transactions reading and writing to a table at the same time). Isolation ensures that concurrent execution of transactions leaves the database in the same state that would have been obtained if the transactions were executed sequentially. Isolation is the main goal of concurrency control; depending on the method used, the effects of an incomplete transaction might not even be visible to other transactions.
Durability
</p>
</div>
</div>

<div id="outline-container-org2fa3e5f" class="outline-4">
<h4 id="org2fa3e5f"><span class="section-number-4">5.8.4</span> Durability</h4>
<div class="outline-text-4" id="text-5-8-4">
<p>
guarantees that once a transaction has been committed, it will remain committed even in the case of a system failure (e.g., power outage or crash). This usually means that completed transactions (or their effects) are recorded in non-volatile memory.
</p>
</div>
</div>
</div>
<div id="outline-container-orgaaad8b9" class="outline-3">
<h3 id="orgaaad8b9"><span class="section-number-3">5.9</span> Links</h3>
<div class="outline-text-3" id="text-5-9">
<ul class="org-ul">
<li><a href="https://use-the-index-luke.com/">https://use-the-index-luke.com/</a></li>
<li><a href="https://www.alexkras.com/my-sql-pretty-print-in-command-line/">https://www.alexkras.com/my-sql-pretty-print-in-command-line/</a></li>
<li><a href="https://www.percona.com/blog/2018/07/12/why-mysql-stored-procedures-functions-triggers-bad-performance/">Why MySQL Stored Procedures, Functions and Triggers Are Bad For Performance</a></li>
<li><a href="https://opensource.com/article/17/5/speed-your-mysql-queries-300-times">https://opensource.com/article/17/5/speed-your-mysql-queries-300-times</a></li>
<li><a href="https://codeshack.io/super-fast-php-mysql-database-class/">Super-fast PHP MySQL Database Class</a></li>
<li><a href="https://phpdelusions.net/mysqli/mysqli_connect">How to connect properly using mysqli</a></li>
</ul>
</div>
</div>
<div id="outline-container-org347b560" class="outline-3">
<h3 id="org347b560"><span class="section-number-3">5.10</span> actions</h3>
<div class="outline-text-3" id="text-5-10">
</div>
<div id="outline-container-orgb810b94" class="outline-4">
<h4 id="orgb810b94"><span class="section-number-4">5.10.1</span> Add Auto-Increment ID to existing table?</h4>
<div class="outline-text-4" id="text-5-10-1">
<p>
ALTER TABLE `table` ADD COLUMN `id` INT AUTO<sub>INCREMENT</sub> UNIQUE FIRST;
</p>
</div>
</div>
<div id="outline-container-orgeeb5fa3" class="outline-4">
<h4 id="orgeeb5fa3"><span class="section-number-4">5.10.2</span> How to change collation of a column?</h4>
<div class="outline-text-4" id="text-5-10-2">
<p>
ALTER TABLE &lt;table<sub>name</sub>&gt; MODIFY &lt;column<sub>name</sub>&gt; VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4<sub>unicode</sub><sub>ci</sub>;
</p>
</div>
</div>
<div id="outline-container-orga118649" class="outline-4">
<h4 id="orga118649"><span class="section-number-4">5.10.3</span> views</h4>
<div class="outline-text-4" id="text-5-10-3">
<p>
select y.table<sub>schema</sub>,
       y.table<sub>name</sub>,
       y.view<sub>len</sub>,
       y.referenced<sub>views</sub>
							  views,
       cast((y.view<sub>len</sub> - y.wo<sub>from</sub>) / 4 - 1 as unsigned) subqueries,
       cast((y.view<sub>len</sub> - y.wo<sub>union</sub>) / 5 as unsigned)
							  unions,
       cast((y.view<sub>len</sub> - y.wo<sub>distinct</sub>) / 8 as unsigned) distincts,
       cast((y.view<sub>len</sub> - y.wo<sub>group</sub>) / 5 as unsigned)
							  groups
from (select x.table<sub>schema</sub>,
	     x.table<sub>name</sub>,
	     x.view<sub>len</sub>,
	     cast(x.referenced<sub>views</sub> as unsigned) referenced<sub>views</sub>,
	     length(replace(upper(x.view<sub>definition</sub>), 'FROM', '')) wo<sub>from</sub>,
	     length(replace(upper(x.view<sub>definition</sub>), 'UNION', '')) wo<sub>union</sub>,
	     length(replace(upper(x.view<sub>definition</sub>), 'DISTINCT', '')) wo<sub>distinct</sub>,
	     length(replace(upper(x.view<sub>definition</sub>), 'GROUP', '')) wo<sub>group</sub>
      from (select v1.table<sub>schema</sub>,
		   v1.table<sub>name</sub>,
		   v1.view<sub>definition</sub>,
		   length(v1.view<sub>definition</sub>) view<sub>len</sub>,
		   sum(case
			 when v2.table<sub>name</sub> is not null
				 then (length(v1.view<sub>definition</sub>)
</p>
<ul class="org-ul">
<li>length(replace(v1.view<sub>definition</sub>,
v2.table<sub>name</sub>, '')))</li>
</ul>
<p>
					/length(v2.table<sub>name</sub>)
			 else 0
			   end) referenced<sub>views</sub>
	    from information<sub>schema.views</sub> v1
		   left outer join information<sub>schema.views</sub> v2
		     on v1.table<sub>schema</sub> = v2.table<sub>schema</sub>
	    where v1.table<sub>name</sub> &lt;&gt; v2.table<sub>name</sub>
	    group by v1.table<sub>schema</sub>,
		     v1.table<sub>name</sub>,
		     v1.view<sub>definition</sub>) x
      group by x.table<sub>schema</sub>,
	       x.table<sub>name</sub>) y
order by 1, 2;
</p>
</div>
</div>
<div id="outline-container-orgc55889a" class="outline-4">
<h4 id="orgc55889a"><span class="section-number-4">5.10.4</span> copy</h4>
<div class="outline-text-4" id="text-5-10-4">
<p>
If you want to copy the table structure including its keys, then you should use:
</p>

<div class="org-src-container">
<pre class="src src-sql"> <span style="color: #51afef;">CREATE</span> <span style="color: #51afef;">TABLE</span> `new_table_name` <span style="color: #51afef;">LIKE</span> `old_table_name`;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sql"> <span style="color: #51afef;">CREATE</span> <span style="color: #51afef;">TABLE</span> `new_table_name` <span style="color: #51afef;">SELECT</span> * <span style="color: #51afef;">FROM</span> `old_table_name`;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sql"> (<span style="color: #51afef;">select</span> * <span style="color: #51afef;">from</span> A) <span style="color: #51afef;">except</span> (<span style="color: #51afef;">select</span> * <span style="color: #51afef;">from</span> B) <span style="color: #51afef;">union</span> (<span style="color: #51afef;">select</span> * <span style="color: #51afef;">from</span> B) <span style="color: #51afef;">except</span> <span style="color: #51afef;">select</span> * <span style="color: #51afef;">from</span> A)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0821523" class="outline-4">
<h4 id="org0821523"><span class="section-number-4">5.10.5</span> dump</h4>
<div class="outline-text-4" id="text-5-10-5">
<p>
mysqldump -R &#x2013;triggers -u root -p culture &gt; file.sql
</p>
</div>
</div>
<div id="outline-container-org6435e1e" class="outline-4">
<h4 id="org6435e1e"><span class="section-number-4">5.10.6</span> indexes</h4>
<div class="outline-text-4" id="text-5-10-6">
<p>
select t.table<sub>name</sub>,
       t.table<sub>rows</sub>,
       count(distinct s.index<sub>name</sub>) indexes,
       case
	 when min(s.unicity) is null then 'N'
	 when min(s.unicity) = 0 then 'Y'
	 else 'N'
	   end unique<sub>index</sub>,
       sum(case s.columns
	     when 1 then 1
	     else 0
	       end) single<sub>column</sub>,
       sum(case
	     when s.columns is null then 0
	     when s.columns = 1 then 0
	     else 1
	       end) multi<sub>column</sub>
from information<sub>schema.tables</sub> t
       left outer join (select table<sub>schema</sub>,
			       table<sub>name</sub>,
			       index<sub>name</sub>,
			       max(seq<sub>in</sub><sub>index</sub>) columns,
			       min(non<sub>unique</sub>) unicity
			from information<sub>schema.statistics</sub>
			where table<sub>schema</sub> = schema( )
			group by table<sub>schema</sub>,
				 table<sub>name</sub>,
				 index<sub>name</sub>) s
	 on s.table<sub>schema</sub> = t.table<sub>schema</sub>
	      and s.table<sub>name</sub> = t.table<sub>name</sub>
where t.table<sub>schema</sub> = schema( )
group by t.table<sub>name</sub>,
	 t.table<sub>rows</sub>
order by 3, 1;
massive hardware injection
</p>

<p>
&#x2013;log-slow-queries
&#x2013;log-queries-not-using-indexes
</p>
</div>
</div>
<div id="outline-container-org01a5b95" class="outline-4">
<h4 id="org01a5b95"><span class="section-number-4">5.10.7</span> add foreign key</h4>
<div class="outline-text-4" id="text-5-10-7">
<p>
ALTER TABLE tag
ADD FOREIGN KEY (parent<sub>slug</sub><sub>id</sub>) REFERENCES tag(tag<sub>slug</sub><sub>id</sub>);
</p>
</div>
</div>
</div>
<div id="outline-container-orgda4f93b" class="outline-3">
<h3 id="orgda4f93b"><span class="section-number-3">5.11</span> ORM</h3>
<div class="outline-text-3" id="text-5-11">
<p>
<a href="https://odetocode.com/blogs/scott/archive/2010/06/13/repositories-and-the-save-method.aspx">Repositories and the Save Method</a>
Online Transaction Processing (OLTP)
ast prototaping
</p>
</div>
<div id="outline-container-org30ff0ec" class="outline-4">
<h4 id="org30ff0ec"><span class="section-number-4">5.11.1</span> Doctrine</h4>
<div class="outline-text-4" id="text-5-11-1">
</div>
<ol class="org-ol">
<li><a id="org2fb7246"></a>first last name search<br />
<div class="outline-text-5" id="text-5-11-1-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">where</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">andX</span>(
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">orX</span>(
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">like</span>(
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">concat</span>(<span style="color: #98be65;">'employee_alias.firstName'</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">concat</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">literal</span>(<span style="color: #98be65;">' '</span>), <span style="color: #98be65;">'employee_alias.lastName'</span>)),
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">literal</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">phrase</span>.<span style="color: #98be65;">'%'</span>)
        ),
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">like</span>(
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">concat</span>(<span style="color: #98be65;">'employee_alias.lastName'</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">concat</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">literal</span>(<span style="color: #98be65;">' '</span>), <span style="color: #98be65;">'employee_alias.firstName'</span>)),
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">qb</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expr</span>()<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">literal</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">phrase</span>.<span style="color: #98be65;">'%'</span>)
        )
    ))
);
</pre>
</div>
</div>
</li>
<li><a id="org6edb259"></a>rawSQL from query builder<br />
<div class="outline-text-5" id="text-5-11-1-2">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sql</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">query</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getSQL</span>();

<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">parameters</span> = [];
<span style="color: #51afef;">foreach</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">query</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getParameters</span>() <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">parameter</span>) {
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">parameters</span>[] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">parameter</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getValue</span>();
}

<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">connection</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">executeQuery</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sql</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">parameters</span>)
                     <span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">fetchAll</span>();
</pre>
</div>
</div>
</li>
<li><a id="org9bc7f72"></a>mariaDb error<br />
<div class="outline-text-5" id="text-5-11-1-3">
<p>
<a href="https://marenkay.com/2018/06/12/symfony-doctrine-mariadb/">https://marenkay.com/2018/06/12/symfony-doctrine-mariadb/</a>
</p>
</div>
</li>
<li><a id="org439cc7f"></a>all tables names<br />
<div class="outline-text-5" id="text-5-11-1-4">
<p>
$entities = array();
$em = $this-&gt;getDoctrine()-&gt;getManager();
$meta = $em-&gt;getMetadataFactory()-&gt;getAllMetadata();
foreach ($meta as $m) {
$entities[] = $m-&gt;getName();
//or getTableName()
}
</p>

<p>
$em = $this-&gt;getDoctrine()-&gt;getManager();
$entity<sub>fields</sub><sub>name</sub> = $em-&gt;getClassMetadata($selectedEntity)-&gt;getFieldNames();
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org05de204" class="outline-4">
<h4 id="org05de204"><span class="section-number-4">5.11.2</span> Benchmark</h4>
<div class="outline-text-4" id="text-5-11-2">
<p>
<a href="https://github.com/adrianmiu/forked-php-orm-benchmark">php-orm-benchmark</a>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Library</th>
<th scope="col" class="org-right">Insert</th>
<th scope="col" class="org-right">findPk</th>
<th scope="col" class="org-right">complex</th>
<th scope="col" class="org-right">hydrate</th>
<th scope="col" class="org-right">with</th>
<th scope="col" class="org-left">memory usage</th>
<th scope="col" class="org-right">time</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">PDO</td>
<td class="org-right">22</td>
<td class="org-right">3</td>
<td class="org-right">8</td>
<td class="org-right">52</td>
<td class="org-right">136</td>
<td class="org-left">1,674,776</td>
<td class="org-right">0.23</td>
</tr>

<tr>
<td class="org-left">AtlasOrm</td>
<td class="org-right">240</td>
<td class="org-right">39</td>
<td class="org-right">267</td>
<td class="org-right">202</td>
<td class="org-right">176</td>
<td class="org-left">12,160,896</td>
<td class="org-right">0.98</td>
</tr>

<tr>
<td class="org-left">CycleOrm</td>
<td class="org-right">410</td>
<td class="org-right">177</td>
<td class="org-right">347</td>
<td class="org-right">387</td>
<td class="org-right">839</td>
<td class="org-left">14,245,168</td>
<td class="org-right">2.23</td>
</tr>

<tr>
<td class="org-left">PHPixie</td>
<td class="org-right">598</td>
<td class="org-right">74</td>
<td class="org-right">342</td>
<td class="org-right">185</td>
<td class="org-right">256</td>
<td class="org-left">7,906,272</td>
<td class="org-right">1.47</td>
</tr>

<tr>
<td class="org-left">DoctrineM</td>
<td class="org-right">189</td>
<td class="org-right">37</td>
<td class="org-right">303</td>
<td class="org-right">315</td>
<td class="org-right">267</td>
<td class="org-left">18,874,368</td>
<td class="org-right">1.22</td>
</tr>

<tr>
<td class="org-left">DoctrineMWithCache</td>
<td class="org-right">201</td>
<td class="org-right">37</td>
<td class="org-right">260</td>
<td class="org-right">259</td>
<td class="org-right">226</td>
<td class="org-left">18,874,368</td>
<td class="org-right">1.09</td>
</tr>

<tr>
<td class="org-left">DoctrineMArrayHydrate</td>
<td class="org-right">197</td>
<td class="org-right">42</td>
<td class="org-right">250</td>
<td class="org-right">117</td>
<td class="org-right">130</td>
<td class="org-left">16,777,216</td>
<td class="org-right">0.84</td>
</tr>

<tr>
<td class="org-left">DoctrineMScalarHydrate</td>
<td class="org-right">194</td>
<td class="org-right">37</td>
<td class="org-right">241</td>
<td class="org-right">107</td>
<td class="org-right">112</td>
<td class="org-left">16,777,216</td>
<td class="org-right">0.79</td>
</tr>

<tr>
<td class="org-left">DoctrineMWithoutProxies</td>
<td class="org-right">206</td>
<td class="org-right">39</td>
<td class="org-right">302</td>
<td class="org-right">152</td>
<td class="org-right">336</td>
<td class="org-left">18,874,368</td>
<td class="org-right">1.14</td>
</tr>

<tr>
<td class="org-left">Eloquent</td>
<td class="org-right">528</td>
<td class="org-right">60</td>
<td class="org-right">279</td>
<td class="org-right">220</td>
<td class="org-right">356</td>
<td class="org-left">12,582,912</td>
<td class="org-right">1.48</td>
</tr>

<tr>
<td class="org-left">EloquentWithoutEvent</td>
<td class="org-right">507</td>
<td class="org-right">80</td>
<td class="org-right">320</td>
<td class="org-right">152</td>
<td class="org-right">311</td>
<td class="org-left">12,582,912</td>
<td class="org-right">1.40</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org41a49a9" class="outline-4">
<h4 id="org41a49a9"><span class="section-number-4">5.11.3</span> Notes</h4>
<div class="outline-text-4" id="text-5-11-3">
<p>
One of the criticisms of more raw SQL methods is that you end up with all these VOs (value objects) or DTOs (data transfer objects) that are used by simply one query. This is touted as an advantage of ORMs because you get rid of that.
</p>

<p>
Thing is those problems don't go away with ORMs, they simply move up to the presentation layer. Instead of creating VOs/DTOs for queries, you create custom presentation objects, typically one for every view. How is this better? IMHO it isn't.
</p>
</div>
</div>
</div>
<div id="outline-container-org9cb44ac" class="outline-3">
<h3 id="org9cb44ac"><span class="section-number-3">5.12</span> Mysqli</h3>
<div class="outline-text-3" id="text-5-12">
<p>
<a href="https://stackoverflow.com/questions/2552545/mysqli-prepared-statements-error-reporting">https://stackoverflow.com/questions/2552545/mysqli-prepared-statements-error-reporting</a>
</p>
</div>
</div>
<div id="outline-container-orgf145a3d" class="outline-3">
<h3 id="orgf145a3d"><span class="section-number-3">5.13</span> SLOW QUERY LOG</h3>
<div class="outline-text-3" id="text-5-13">
<ul class="org-ul">
<li>open my.cnf
slow<sub>query</sub><sub>log</sub> = ON
long<sub>query</sub> = 2
slow<sub>query</sub><sub>log</sub><sub>file</sub>=/path/to/file</li>
<li>queries taking 2s or longer will be logged</li>
<li>open the log file and analyze the queries</li>
</ul>


<p>
<a href="https://www.red-gate.com/simple-talk/sql/t-sql-programming/database-refactoring/">https://www.red-gate.com/simple-talk/sql/t-sql-programming/database-refactoring/</a>
</p>



<p>
TIPS
Avoid functions on an indexed columns
SELECT id, title FRMO PICTURE
WHERE YEAR(create<sub>date</sub>) &gt;= 2001
The index won't be used here
</p>

<p>
LIMIT
</p>

<p>
BETWEEN
AND picture.id BETWEEN 26 AND 50;
Only makes sense if that column is indexed
</p>

<p>
IN
AND picture.id IN (10,15,16)
</p>

<p>
Archive Tables?
Split Databases and tables
</p>

<p>
Remove unused index
</p>

<p>
B-Tree Index
</p>
<ul class="org-ul">
<li>each leaf node contains a link to the next node for the fast range traversals</li>
<li>values are stored in order</li>
<li>each leaf page is at the same distance from root level</li>
<li>InnoDB</li>

<li>storage engine traverses from root node to leaf node with the help of pointers</li>
<li>increase performance of following query patterns:
<ul class="org-ul">
<li>full value (e.g: Pluralsight, Pinal Dave)</li>
<li>leftmost value or column prefix (e.g: Plural from Pluralsight, Pinal from Pinal Dave)</li>
<li>range of value (e.g 1 to 99, AAron to Fritz, Aaron to Kei%)</li>
</ul></li>
<li><p>
helps ORDER BY clause to increase the performance
</p>

<p>
Clustered Index
</p>
<ul class="org-ul">
<li>rows with adjacent key values are stored close to each other</li>
<li>related data is stored close to each other leading less disk I/O while retrieving sequential or range data</li>
<li>faster data access as data and index are stored together at leaf node</li>

<li>data insertion speed is dependent on the order of the Primary Key</li>
<li>updating the clustered index column is expensive as data is moved based on its size to different on location
Secondary Index</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org14d62b2" class="outline-3">
<h3 id="org14d62b2"><span class="section-number-3">5.14</span> int vs varchar id</h3>
<div class="outline-text-3" id="text-5-14">
<p>
<a href="https://stackoverflow.com/questions/332300/is-there-a-real-performance-difference-between-int-and-varchar-primary-keys">https://stackoverflow.com/questions/332300/is-there-a-real-performance-difference-between-int-and-varchar-primary-keys</a>
</p>
</div>
</div>
<div id="outline-container-orgdd66ff6" class="outline-3">
<h3 id="orgdd66ff6"><span class="section-number-3">5.15</span> Information Schema</h3>
<div class="outline-text-3" id="text-5-15">
<p>
select t.table<sub>name</sub>, count(*)
from information<sub>schema.columns</sub> c
join information<sub>schema.tables</sub> t on t.table<sub>name</sub> = c.table<sub>name</sub>
where t.Table<sub>type</sub> = 'BASE TABLE'
group by t.TABLE<sub>NAME</sub>
</p>

<p>
select t.table<sub>name</sub>
from information<sub>schema.tables</sub> t
where t.Table<sub>type</sub> = 'BASE TABLE'
group by t.TABLE<sub>NAME</sub>
</p>
</div>
</div>
<div id="outline-container-org67656a6" class="outline-3">
<h3 id="org67656a6"><span class="section-number-3">5.16</span> Count</h3>
<div class="outline-text-3" id="text-5-16">
<p>
select lecture<sub>id</sub>, count(*) as Count
from customer<sub>service</sub><sub>contract</sub><sub>to</sub><sub>lecture</sub>
group by lecture<sub>id</sub>
having count(*) &gt; 1
</p>

<p>
&#x2013;log-slow-queries
&#x2013;log-queries-not-using-indexes
</p>
</div>
</div>
<div id="outline-container-orgd739691" class="outline-3">
<h3 id="orgd739691"><span class="section-number-3">5.17</span> Benchmark</h3>
<div class="outline-text-3" id="text-5-17">
</div>
<div id="outline-container-org5926850" class="outline-4">
<h4 id="org5926850"><span class="section-number-4">5.17.1</span> Percona Monitor</h4>
<div class="outline-text-4" id="text-5-17-1">
<p>
<a href="https://medium.com/@prasadjay/percona-monitoring-and-management-b10b6d84f89a">https://medium.com/@prasadjay/percona-monitoring-and-management-b10b6d84f89a</a>
</p>

<p>
yum install pmm-client
on error - <a href="https://jira.percona.com/browse/PMM-627">https://jira.percona.com/browse/PMM-627</a> yum install initscripts 
</p>

<p>
pmm.cnf 
[mysqld]
innodb<sub>monitor</sub><sub>enable</sub>=all
performance<sub>schema</sub>=ON
</p>

<p>
<a href="https://www.linuxjournal.com/content/if-software-funded-public-source-its-code-should-be-open-source">https://www.linuxjournal.com/content/if-software-funded-public-source-its-code-should-be-open-source</a>
</p>

<p>
conventions - are things that aren't forced software we using but user expect them
</p>
</div>
</div>
</div>
<div id="outline-container-orge47758c" class="outline-3">
<h3 id="orge47758c"><span class="section-number-3">5.18</span> testing</h3>
<div class="outline-text-3" id="text-5-18">
</div>
<div id="outline-container-orga287d34" class="outline-4">
<h4 id="orga287d34"><span class="section-number-4">5.18.1</span> compare output of 2 queries</h4>
<div class="outline-text-4" id="text-5-18-1">
<p>
If you want to copy the table structure including its keys, then you should use:
</p>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #51afef;">CREATE</span> <span style="color: #51afef;">TABLE</span> `new_table_name` <span style="color: #51afef;">LIKE</span> `old_table_name`;

<span style="color: #5B6268;">--view </span>
<span style="color: #51afef;">CREATE</span> <span style="color: #51afef;">TABLE</span> <span style="color: #c678dd;">query_invoice_first_positions_golden_master</span> <span style="color: #51afef;">AS</span> (
<span style="color: #51afef;">SELECT</span> *
<span style="color: #51afef;">FROM</span> query_invoice_first_positions
) 
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #51afef;">CREATE</span> <span style="color: #51afef;">TABLE</span> `new_table_name` <span style="color: #51afef;">SELECT</span> * <span style="color: #51afef;">FROM</span> `old_table_name`;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #5B6268;">--mardiadb 10.3</span>
(<span style="color: #51afef;">select</span> * <span style="color: #51afef;">from</span> A) <span style="color: #51afef;">except</span> (<span style="color: #51afef;">select</span> * <span style="color: #51afef;">from</span> B) <span style="color: #51afef;">union</span> (<span style="color: #51afef;">select</span> * <span style="color: #51afef;">from</span> B) <span style="color: #51afef;">except</span> <span style="color: #51afef;">select</span> * <span style="color: #51afef;">from</span> A)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #5B6268;">--mardiadb 10.3</span>
<span style="color: #51afef;">select</span> invoice_id, <span style="color: #51afef;">name</span>
<span style="color: #51afef;">from</span>(
<span style="color: #51afef;">select</span> qi.invoice_id, qi.<span style="color: #51afef;">name</span>
<span style="color: #51afef;">from</span> query_invoice_first_positions qi
<span style="color: #51afef;">union</span> <span style="color: #51afef;">all</span>
<span style="color: #51afef;">select</span> gold.invoice_id, gold.<span style="color: #51afef;">name</span>
<span style="color: #51afef;">from</span> query_invoice_first_positions_golden_master gold
) t
<span style="color: #51afef;">group</span> <span style="color: #51afef;">by</span> invoice_id, <span style="color: #51afef;">name</span>
<span style="color: #51afef;">having</span> <span style="color: #c678dd;">count</span>(*) = 1
<span style="color: #51afef;">order</span> <span style="color: #51afef;">by</span> invoice_id
</pre>
</div>

<p>
not case sensitive!
</p>
</div>
</div>
</div>
<div id="outline-container-orga7c6460" class="outline-3">
<h3 id="orga7c6460"><span class="section-number-3">5.19</span> cardinality</h3>
<div class="outline-text-3" id="text-5-19">
<p>
select t.table<sub>name</sub>,
t.table<sub>rows</sub>,
s.index<sub>name</sub>,
s.column<sub>name</sub>,
s.cardinality
from information<sub>schema.tables</sub> t
left outer join information<sub>schema.statistics</sub> s
on s.table<sub>schema</sub> = t.table<sub>schema</sub>
and s.table<sub>name</sub> = t.table<sub>name</sub>
where t.table<sub>schema</sub> = schema( )
order by t.table<sub>name</sub>,
s.index<sub>name</sub>,
s.seq<sub>in</sub><sub>index</sub>;
</p>
</div>
</div>
<div id="outline-container-orgcbe33e0" class="outline-3">
<h3 id="orgcbe33e0"><span class="section-number-3">5.20</span> SQL<sub>FOUND</sub><sub>ROWS</sub></h3>
<div class="outline-text-3" id="text-5-20">
<p>
<a href="http://developers-club.com/posts/81034/">http://developers-club.com/posts/81034/</a>
</p>
</div>
</div>
<div id="outline-container-org87128d3" class="outline-3">
<h3 id="org87128d3"><span class="section-number-3">5.21</span> Collation key length</h3>
<div class="outline-text-3" id="text-5-21">
<p>
<a href="https://stackoverflow.com/questions/1814532/1071-specified-key-was-too-long-max-key-length-is-767-bytes">https://stackoverflow.com/questions/1814532/1071-specified-key-was-too-long-max-key-length-is-767-bytes</a>
</p>
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #51afef;">ALTER</span> <span style="color: #51afef;">TABLE</span> <span style="color: #c678dd;">subscribe_user_tag</span> <span style="color: #51afef;">ADD</span> <span style="color: #51afef;">UNIQUE</span> `key_user_id_tag_slug_id` (user_id, tag_slug_id);

<span style="color: #51afef;">SELECT</span> * <span style="color: #51afef;">FROM</span> INFORMATION_SCHEMA.SCHEMATA;

<span style="color: #51afef;">SELECT</span> * <span style="color: #51afef;">FROM</span> INFORMATION_SCHEMA.COLUMNS <span style="color: #51afef;">WHERE</span> <span style="color: #51afef;">TABLE_NAME</span> <span style="color: #51afef;">LIKE</span> <span style="color: #98be65;">'%subscribe%'</span>

<span style="color: #51afef;">ALTER</span> <span style="color: #51afef;">TABLE</span> <span style="color: #c678dd;">subscribe_user_tag</span> <span style="color: #51afef;">MODIFY</span> <span style="color: #51afef;">COLUMN</span> tag_slug_id <span style="color: #ECBE7B;">varchar</span>(255) <span style="color: #51afef;">COLLATE</span> latin1_general_ci
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcfe9bfc" class="outline-3">
<h3 id="orgcfe9bfc"><span class="section-number-3">5.22</span> Not Empty</h3>
<div class="outline-text-3" id="text-5-22">
<p>
<a href="https://stackoverflow.com/questions/24424363/mysql-column-constraint-as-not-empty-required">https://stackoverflow.com/questions/24424363/mysql-column-constraint-as-not-empty-required</a>
</p>
</div>
</div>
<div id="outline-container-org36f62f2" class="outline-3">
<h3 id="org36f62f2"><span class="section-number-3">5.23</span> import/export</h3>
<div class="outline-text-3" id="text-5-23">
</div>
<div id="outline-container-org88c08f7" class="outline-4">
<h4 id="org88c08f7"><span class="section-number-4">5.23.1</span> import</h4>
<div class="outline-text-4" id="text-5-23-1">
<p>
mysql -u slk -p culture &lt; 28-12-2019<sub>tag</sub><sub>tree</sub><sub>path.sql</sub>
</p>
</div>
</div>
<div id="outline-container-org6602577" class="outline-4">
<h4 id="org6602577"><span class="section-number-4">5.23.2</span> export</h4>
<div class="outline-text-4" id="text-5-23-2">
<p>
mysqldump -R &#x2013;triggers -u root -p culture &gt; file.sql
</p>
</div>
</div>
</div>
<div id="outline-container-orgef69521" class="outline-3">
<h3 id="orgef69521"><span class="section-number-3">5.24</span> notes</h3>
<div class="outline-text-3" id="text-5-24">
<p>
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql<sub>native</sub><sub>password</sub> BY 'root';
</p>

<p>
SHOW GLOBAL VARIABLES
</p>

<p>
SHOW GLOBAL STATUS
</p>

<p>
optimizer<sub>max</sub><sub>permutations</sub> w Oraclu -&gt; co sie dzieje kiedy idzie zapytanie -&gt; wpierw optimizer probuje znalezc optimal
innodb<sub>buffer</sub><sub>pool</sub><sub>size</sub>    134217728 -&gt; 400M
join<sub>buffer</sub><sub>size</sub>    262144 -&gt; 1M
query<sub>cache</sub><sub>type</sub>    OFF -&gt; 1
query<sub>cache</sub><sub>size</sub>    1048576 -&gt; 50M
query<sub>cache</sub><sub>limit</sub>    1048576 -&gt; 4M
</p>

<p>
MariaDB [(none)]&gt; set global innodb<sub>buffer</sub><sub>pool</sub><sub>size</sub> = 419430400;
</p>

<p>
MariaDB [(none)]&gt; SET GLOBAL query<sub>cache</sub><sub>size</sub> = 1000000;
</p>

<p>
MariaDB [(none)]&gt; SET GLOBAL query<sub>cache</sub><sub>limit</sub> = (select 4*1024*1024);
</p>

<p>
MariaDB [(none)]&gt; SET GLOBAL join<sub>buffer</sub><sub>size</sub> = (select 4*1024*1024);
</p>

<p>
CREATE DATABASE testdb;
CREATE USER 'testuser'@'localhost' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON testdb.* TO testuser@localhost;
FLUSH PRIVILEGES;
quit
</p>

<p>
mysql&gt; source path/to/file.sql;
</p>
</div>
</div>
<div id="outline-container-org7c20553" class="outline-3">
<h3 id="org7c20553"><span class="section-number-3">5.25</span> Query</h3>
<div class="outline-text-3" id="text-5-25">
</div>
<div id="outline-container-orgf896667" class="outline-4">
<h4 id="orgf896667"><span class="section-number-4">5.25.1</span> NOT IN</h4>
<div class="outline-text-4" id="text-5-25-1">
<p>
SELECT  *
FROM    tag m
WHERE   NOT EXISTS
(
SELECT  1
FROM    video<sub>tag</sub> e
WHERE   e.tag<sub>slug</sub><sub>id</sub> = m.tag<sub>slug</sub><sub>id</sub>
)
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgdd4a176" class="outline-2">
<h2 id="orgdd4a176"><span class="section-number-2">6</span> Codebases</h2>
<div class="outline-text-2" id="text-6">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-right">Lines of Code</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Tutorials</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><a href="https://github.com/adamculp/refactoring101">Video Rental Shop</a></td>
<td class="org-right">132</td>
<td class="org-left">From Martin Fowler book "Refactoring: Improving the Design of Existing Code" converted to PHP</td>
<td class="org-left"><a href="https://youtu.be/0DYIJdX6kB4">Refactoring 101</a></td>
</tr>

<tr>
<td class="org-left"><a href="https://github.com/jbrains/trivia/tree/master/php">Legacy Code Retreat - Trivia Game</a></td>
<td class="org-right">196</td>
<td class="org-left">Designed for <a href="https://legacycoderetreat.typepad.com/">Legacy Code Retreat</a> events</td>
<td class="org-left"><a href="https://code.tutsplus.com/series/refactoring-legacy-code--cms-633">Refactoring Legacy Code</a></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://code.tutsplus.com/courses/techniques-for-refactoring-code">Techniques for Refactoring Code</a></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="http://blog.adrianbolboaca.ro/2014/04/legacy-coderetreat/#sessions">Legacy Coderetreat (Java)</a></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><a href="https://github.com/slk500/refactoring101">GitHub</a></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org3cdf8d3" class="outline-3">
<h3 id="org3cdf8d3"><span class="section-number-3">6.1</span> <a href="https://github.com/adamculp/refactoring101">Video Rental Shop</a></h3>
<div class="outline-text-3" id="text-6-1">
<p>
   phploc
Size
  Lines of Code (LOC)                              132
  Comment Lines of Code (CLOC)                      12 (9.09%)
  Non-Comment Lines of Code (NCLOC)                120 (90.91%)
  Logical Lines of Code (LLOC)                      48 (36.36%)
    Classes                                         40 (83.33%)
      Average Class Length                          13
        Minimum Class Length                         6
        Maximum Class Length                        24
      Average Method Length                          2
        Minimum Method Length                        1
        Maximum Method Length                       19
    Functions                                        0 (0.00%)
      Average Function Length                        0
    Not in classes or functions                      8 (16.67%)
</p>

<p>
Structure
  Namespaces                                         0
  Interfaces                                         0
  Traits                                             0
  Classes                                            3
    Abstract Classes                                 0 (0.00%)
    Concrete Classes                                 3 (100.00%)
  Methods                                           11
    Scope
      Non-Static Methods                            11 (100.00%)
      Static Methods                                 0 (0.00%)
    Visibility
      Public Methods                                11 (100.00%)
      Non-Public Methods                             0 (0.00%)
  Functions                                          0
    Named Functions                                  0 (0.00%)
    Anonymous Functions                              0 (0.00%)
  Constants                                          3
    Global Constants                                 0 (0.00%)
    Class Constants                                  3 (100.00%)
</p>

<p>
Cyclomatic Complexity
  Average Complexity per LLOC                     0.17
  Average Complexity per Class                    3.67
    Minimum Class Complexity                      1.00
    Maximum Class Complexity                      9.00
  Average Complexity per Method                   1.73
    Minimum Method Complexity                     1.00
    Maximum Method Complexity                     9.00
</p>

<p>
Dependencies
  Global Accesses                                    0
    Global Constants                                 0 (0.00%)
    Global Variables                                 0 (0.00%)
    Super-Global Variables                           0 (0.00%)
  Attribute Accesses                                15
    Non-Static                                      15 (100.00%)
    Static                                           0 (0.00%)
  Method Calls                                      14
    Non-Static                                      14 (100.00%)
    Static                                           0 (0.00%)
</p>
</div>
</div>
<div id="outline-container-orgf64f085" class="outline-3">
<h3 id="orgf64f085"><span class="section-number-3">6.2</span> <a href="https://github.com/jbrains/trivia/tree/master/php">Legacy Code Retreat - Trivia Game</a></h3>
<div class="outline-text-3" id="text-6-2">
<p>
   phploc
Size
  Lines of Code (LOC)                              196
  Comment Lines of Code (CLOC)                       0 (0.00%)
  Non-Comment Lines of Code (NCLOC)                196 (100.00%)
  Logical Lines of Code (LLOC)                      99 (50.51%)
    Classes                                         88 (88.89%)
      Average Class Length                          88
        Minimum Class Length                        88
        Maximum Class Length                        88
      Average Method Length                          7
        Minimum Method Length                        1
        Maximum Method Length                       17
    Functions                                        1 (1.01%)
      Average Function Length                        1
    Not in classes or functions                     10 (10.10%)
</p>

<p>
Cyclomatic Complexity
  Average Complexity per LLOC                     0.26
  Average Complexity per Class                   25.00
    Minimum Class Complexity                     25.00
    Maximum Class Complexity                     25.00
  Average Complexity per Method                   3.18
    Minimum Method Complexity                     1.00
    Maximum Method Complexity                    10.00
</p>

<p>
Dependencies
  Global Accesses                                    0
    Global Constants                                 0 (0.00%)
    Global Variables                                 0 (0.00%)
    Super-Global Variables                           0 (0.00%)
  Attribute Accesses                               115
    Non-Static                                     115 (100.00%)
    Static                                           0 (0.00%)
  Method Calls                                      21
    Non-Static                                      21 (100.00%)
    Static                                           0 (0.00%)
</p>

<p>
Structure
  Namespaces                                         0
  Interfaces                                         0
  Traits                                             0
  Classes                                            1
    Abstract Classes                                 0 (0.00%)
    Concrete Classes                                 1 (100.00%)
  Methods                                           11
    Scope
      Non-Static Methods                            11 (100.00%)
      Static Methods                                 0 (0.00%)
    Visibility
      Public Methods                                11 (100.00%)
      Non-Public Methods                             0 (0.00%)
  Functions                                          1
    Named Functions                                  1 (100.00%)
    Anonymous Functions                              0 (0.00%)
  Constants                                          0
    Global Constants                                 0 (0.00%)
    Class Constants                                  0 (0.00%)
</p>
</div>
</div>
<div id="outline-container-org595feaa" class="outline-3">
<h3 id="org595feaa"><span class="section-number-3">6.3</span> <a href="https://github.com/jbrains/trivia">Legacy Code Retreat - Trivia Game codebase</a></h3>
</div>
</div>
<div id="outline-container-org9ef90c4" class="outline-2">
<h2 id="org9ef90c4"><span class="section-number-2">7</span> Definitions</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org0be4183" class="outline-3">
<h3 id="org0be4183"><span class="section-number-3">7.1</span> Anemic Domain Model</h3>
<div class="outline-text-3" id="text-7-1">
<ul class="org-ul">
<li>focus on data</li>
<li>structured</li>
<li>easy to implement and to maintain</li>
<li>contains little or no logic</li>
<li>no guarantee to be valid or consisten</li>
</ul>
</div>
<div id="outline-container-org8f1b4ac" class="outline-4">
<h4 id="org8f1b4ac"><span class="section-number-4">7.1.1</span> use</h4>
<div class="outline-text-4" id="text-7-1-1">
<ul class="org-ul">
<li>prototyping</li>
<li>easy of use</li>
<li>easily generated</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org0882e00" class="outline-3">
<h3 id="org0882e00"><span class="section-number-3">7.2</span> Rich Domain Model</h3>
<div class="outline-text-3" id="text-7-2">
<ul class="org-ul">
<li>combines data and logic</li>
<li>valid by design</li>
<li>easy to test</li>
<li>defined state transistions</li>
</ul>
</div>
<div id="outline-container-orgd6d93c7" class="outline-4">
<h4 id="orgd6d93c7"><span class="section-number-4">7.2.1</span> use</h4>
<div class="outline-text-4" id="text-7-2-1">
<ul class="org-ul">
<li>clean code</li>
<li>testability</li>
<li>truly OOP</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org084d160" class="outline-3">
<h3 id="org084d160"><span class="section-number-3">7.3</span> Characterization Test</h3>
<div class="outline-text-3" id="text-7-3">
<p>
Test that characterizes the actual behavior of a piece of code. It acts as a change detector, protecting legacy code from unintended changes.
</p>
</div>
</div>
<div id="outline-container-org0a3d594" class="outline-3">
<h3 id="org0a3d594"><span class="section-number-3">7.4</span> Polymorphism</h3>
<div class="outline-text-3" id="text-7-4">
<p>
describes a pattern in object oriented programming in which classes have different functionality while sharing a common interface.
</p>
</div>
</div>
<div id="outline-container-orga54968a" class="outline-3">
<h3 id="orga54968a"><span class="section-number-3">7.5</span> Parameter vs. Argument</h3>
<div class="outline-text-3" id="text-7-5">
<p>
A parameter is the variable which is part of the method’s signature (method declaration). An argument is an expression used when calling the method.
</p>

<p>
Consider the following code:
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">Foo</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span>, <span style="color: #ECBE7B;">float</span> <span style="color: #dcaeea;">f</span>)
{
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Do things</span>
}

<span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">Bar</span>()
{
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">anInt</span> = 1;
    Foo(anInt, 2.0);
}
</pre>
</div>

<p>
Here i and f are the parameters, and anInt and 2.0 are the arguments.
</p>

<p>
<a href="https://stackoverflow.com/questions/1788923/parameter-vs-argument">https://stackoverflow.com/questions/1788923/parameter-vs-argument</a>
</p>
</div>
</div>
<div id="outline-container-orgd017c36" class="outline-3">
<h3 id="orgd017c36"><span class="section-number-3">7.6</span> Principle vs. Practices</h3>
<div class="outline-text-3" id="text-7-6">
<ul class="org-ul">
<li>The Boy scout motto – “Be prepared”–is a timeless principle. “Buy a plunger before you need a plunger” is a practice that applies this principle in a memorable way.</li>
<li>Principles are good ideas or good values stated in a context-independent manner. Practices are applications of theses principles stated in a context-dependent way.</li>
<li>Principle: a fundamental, primary or general law or truth</li>
<li>Practice: the action or process of performing or doing something</li>
</ul>
</div>
</div>
<div id="outline-container-orgbfedf4d" class="outline-3">
<h3 id="orgbfedf4d"><span class="section-number-3">7.7</span> Logical operators</h3>
<div class="outline-text-3" id="text-7-7">
<p>
They are used for different purposes and in fact have different operator precedences. The &amp;&amp; and || operators are intended for Boolean conditions, whereas and and or are intended for control flow.
</p>

<p>
For example, the following is a Boolean condition:
</p>

<p>
if ($foo <code>= $bar &amp;&amp; $baz !</code> $quxx) {
</p>

<p>
This differs from control flow:
</p>

<p>
doSomething() or die();
</p>
</div>
</div>
<div id="outline-container-org245b64e" class="outline-3">
<h3 id="org245b64e"><span class="section-number-3">7.8</span> Value Object</h3>
<div class="outline-text-3" id="text-7-8">
<ul class="org-ul">
<li>measures, quantifies or describe a thing in the domain</li>
<li>identity is based on composition of values</li>
<li>immutable</li>
<li>compared using all values</li>
<li>no side effects</li>
<li>value object should never be mocked</li>
</ul>
<p>
#+begin<sub>src</sub> php
final class PaymentInstrument
{
</p>

<p>
<i>** @var string *</i>
private $token;
</p>

<p>
private function _<sub>construct</sub>(string $token)
{
Assert::that($token)-&gt;lengt(32);
$this-&gt;token = $token;
}
</p>

<p>
public static function fromToken(string $token) : self 
{
return new self($token);
}
</p>

<p>
public function getToken() : string
{
return $this-token;
}
}
#+end<sub>src</sub>&gt;
<a href="https://www.youtube.com/watch?time_continue=221&amp;v=z3BDOoB8csA">https://www.youtube.com/watch?time_continue=221&amp;v=z3BDOoB8csA</a>
</p>
</div>
</div>
<div id="outline-container-orgfcff22a" class="outline-3">
<h3 id="orgfcff22a"><span class="section-number-3">7.9</span> Service</h3>
<div class="outline-text-3" id="text-7-9">
<p>
an object that dose work
</p>
</div>
</div>
<div id="outline-container-org25c8380" class="outline-3">
<h3 id="org25c8380"><span class="section-number-3">7.10</span> Technical Dept</h3>
<div class="outline-text-3" id="text-7-10">
<p>
is the debt that accumulate when you knowingly or unknowingly make
wrong or non-optimal design decisions.
</p>

<p>
<a href="http://blog.insight.sensiolabs.com/2014/11/04/technical-debt-relevant-projects.html">http://blog.insight.sensiolabs.com/2014/11/04/technical-debt-relevant-projects.html</a>
</p>
</div>
</div>
<div id="outline-container-org3be7681" class="outline-3">
<h3 id="org3be7681"><span class="section-number-3">7.11</span> Dead Code</h3>
<div class="outline-text-3" id="text-7-11">
<ul class="org-ul">
<li>code that is never used</li>
<li>data never delivered to the user</li>
</ul>
</div>
<div id="outline-container-org7840c31" class="outline-4">
<h4 id="org7840c31"><span class="section-number-4">7.11.1</span> Links</h4>
<div class="outline-text-4" id="text-7-11-1">
<p>
<a href="https://www.slideshare.net/dseguy/hunt-for-dead-code">https://www.slideshare.net/dseguy/hunt-for-dead-code</a>
</p>
</div>
</div>
<div id="outline-container-orgb3d46bf" class="outline-4">
<h4 id="orgb3d46bf"><span class="section-number-4">7.11.2</span> Tombstone</h4>
<div class="outline-text-4" id="text-7-11-2">
</div>
<ol class="org-ol">
<li><a id="org5265218"></a><a href="https://youtu.be/29UXzfQWOhQ">David Schnepper's Ignite talk, "Isn't That Code Dead?"</a><br />
<div class="outline-text-5" id="text-7-11-2-1">
<p>
<a href="https://github.com/scheb/tombstone">https://github.com/scheb/tombstone</a>
<a href="https://github.com/krakjoe/tombs">https://github.com/krakjoe/tombs</a>
<a href="https://github.com/SolidWorx/Burial">https://github.com/SolidWorx/Burial</a>
</p>

<p>
netstat -a -p &#x2013;unix
</p>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-org35a8c35" class="outline-3">
<h3 id="org35a8c35"><span class="section-number-3">7.12</span> <a href="https://en.wikipedia.org/wiki/Bus_factor">Bus Factor</a></h3>
</div>
</div>
<div id="outline-container-orgb61c498" class="outline-2">
<h2 id="orgb61c498"><span class="section-number-2">8</span> Practices</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-org8337751" class="outline-3">
<h3 id="org8337751"><span class="section-number-3">8.1</span> Always Use 'declare(stric<sub>types</sub>=1)'</h3>
<div class="outline-text-3" id="text-8-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">declare</span>(stric_types=1);

<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">var</span>  = <span style="color: #98be65;">'0'</span>;
<span style="color: #51afef;">if</span> ( <span style="color: #51afef; font-weight: bold;">!</span><span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">var</span> ) {
   <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'negation'</span>;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org7766785" class="outline-3">
<h3 id="org7766785"><span class="section-number-3">8.2</span> Avoid Else, Return Early (Guard Clause)</h3>
<div class="outline-text-3" id="text-8-2">
<p>
Return as soon as you know your method cannot do any more meaningful work.
</p>
<div class="org-src-container">
<pre class="src src-php"> <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">foo</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">x</span>): <span style="color: #ECBE7B;">string</span>
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span> = <span style="color: #a9a1e1;">null</span>;

        <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">x</span> === 1) {
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span> = <span style="color: #98be65;">'a'</span>;
        } <span style="color: #51afef;">elseif</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">x</span> === 2) {
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span> = <span style="color: #98be65;">'b'</span>;
        } <span style="color: #51afef;">else</span> {
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span> = <span style="color: #98be65;">'c'</span>;
        }

        <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span>;
    }
</pre>
</div>
<div class="org-src-container">
<pre class="src src-php"> <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">foo</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">x</span>): <span style="color: #ECBE7B;">string</span>
    {
        <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">x</span> === 1) {
            <span style="color: #51afef;">return</span> <span style="color: #98be65;">'a'</span>;
        }

        <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">x</span> === 2) {
            <span style="color: #51afef;">return</span> <span style="color: #98be65;">'b'</span>;
        }

        <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">x</span> === 3) {
            <span style="color: #51afef;">return</span> <span style="color: #98be65;">'c'</span>;
        }
    }
</pre>
</div>

<p>
Refactoring: Replace Nested Conditional with Guard Clauses
Guard clause provides an early exit from a subroutine. Removing one level of nesting and resulting in flatter code.
</p>

<p>
<a href="https://stackoverflow.com/questions/4838828/why-should-a-function-have-only-one-exit-point">https://stackoverflow.com/questions/4838828/why-should-a-function-have-only-one-exit-point</a>
</p>
</div>
</div>
<div id="outline-container-org7ea45be" class="outline-3">
<h3 id="org7ea45be"><span class="section-number-3">8.3</span> Avoid Negative Conditionals</h3>
<div class="outline-text-3" id="text-8-3">
<p>
It is much easier, for the human mind, to comprehend positive reasoning. So if you can avoid negative conditionals, you should always take that path.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">if</span> (<span style="color: #51afef; font-weight: bold;">!</span>count){
...
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">if</span> (count == 0){
...
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org05ecde7" class="outline-3">
<h3 id="org05ecde7"><span class="section-number-3">8.4</span> Don't Use 'clone'</h3>
<div class="outline-text-3" id="text-8-4">
</div>
<div id="outline-container-org70dafc1" class="outline-4">
<h4 id="org70dafc1"><span class="section-number-4">8.4.1</span> <a href="https://dcsg.me/articles/dont-clone-your-php-objects-deepcopy-them/">https://dcsg.me/articles/dont-clone-your-php-objects-deepcopy-them/</a></h4>
</div>
<div id="outline-container-org39ea4eb" class="outline-4">
<h4 id="org39ea4eb"><span class="section-number-4">8.4.2</span> <span class="todo TODO">TODO</span> show example with Doctrine</h4>
</div>
</div>
<div id="outline-container-orgb872005" class="outline-3">
<h3 id="orgb872005"><span class="section-number-3">8.5</span> Don't Use 'else if'</h3>
<div class="outline-text-3" id="text-8-5">
<p>
Else if is not compatible with the colon syntax for if|elseif blocks. For this reason, use elseif for conditionals
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef; font-weight: bold;">&lt;?php</span> <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span>) { <span style="color: #51afef; font-weight: bold;">?&gt;</span>
    &lt;span&gt;<span style="color: #a9a1e1;">OK</span>. Your registration is successful&lt;/span&gt;
<span style="color: #51afef; font-weight: bold;">&lt;?php</span> } <span style="color: #51afef;">else</span> { <span style="color: #51afef; font-weight: bold;">?&gt;</span>
    &lt;span&gt;Something went wrong<span style="color: #51afef; font-weight: bold;">!</span> Please <span style="color: #51afef;">try</span> again later<span style="color: #51afef; font-weight: bold;">!</span> &lt;/span&gt;
<span style="color: #51afef; font-weight: bold;">&lt;?php</span> } <span style="color: #51afef; font-weight: bold;">?&gt;</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-php"> <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span>) : <span style="color: #51afef; font-weight: bold;">?&gt;</span>
    &lt;div&gt;<span style="color: #a9a1e1;">OK</span>. Your registration is successful&lt;/div&gt;
<span style="color: #51afef; font-weight: bold;">&lt;?php</span> <span style="color: #51afef;">else</span> : <span style="color: #51afef; font-weight: bold;">?&gt;</span>
    &lt;div&gt;Something went wr+ong<span style="color: #51afef; font-weight: bold;">!</span> Please <span style="color: #51afef;">try</span> again later<span style="color: #51afef; font-weight: bold;">!</span>&lt;/div&gt;
<span style="color: #51afef; font-weight: bold;">&lt;?php</span> <span style="color: #51afef;">endif</span> <span style="color: #51afef; font-weight: bold;">?&gt;</span>
</pre>
</div>

<p>
Most of the time the alternative (endif) syntax is used in view scripts. It's often hard to see/notice the end of an if statement since a curly brace only takes up one character, when you're at the bottom of a file, it's hard to tell if it's the end of an if or a foreach. For example:
</p>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef; font-weight: bold;">&lt;?php</span> <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">condition</span>): <span style="color: #51afef; font-weight: bold;">?&gt;</span>

    &lt;div&gt;a huge block of html&lt;/div&gt;

<span style="color: #51afef; font-weight: bold;">&lt;?php</span> <span style="color: #51afef;">endif</span>; <span style="color: #51afef; font-weight: bold;">?&gt;</span>
</pre>
</div>


<p>
<a href="https://www.mediawiki.org/wiki/Manual:Coding_conventions/PHP">https://www.mediawiki.org/wiki/Manual:Coding_conventions/PHP</a>
And the latter has poorer performance.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #5B6268;">// </span><span style="color: #5B6268;">This:</span>
<span style="color: #51afef;">if</span> ( <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">foo</span> == <span style="color: #98be65;">'bar'</span> ) {
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Hello world'</span>;
} <span style="color: #51afef;">else</span> <span style="color: #51afef;">if</span> ( <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">foo</span> == <span style="color: #98be65;">'Bar'</span> ) {
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Hello world'</span>;
} <span style="color: #51afef;">else</span> <span style="color: #51afef;">if</span> ( <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">baz</span> == <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">foo</span> ) {
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Hello baz'</span>;
} <span style="color: #51afef;">else</span> {
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Eh?'</span>;
}

<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Is actually equivalent to:</span>
<span style="color: #51afef;">if</span> ( <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">foo</span> == <span style="color: #98be65;">'bar'</span> ) {
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Hello world'</span>;
} <span style="color: #51afef;">else</span> {
    <span style="color: #51afef;">if</span> ( <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">foo</span> == <span style="color: #98be65;">'Bar'</span> ) {
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Hello world'</span>;
    } <span style="color: #51afef;">else</span> {
        <span style="color: #51afef;">if</span> ( <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">baz</span> == <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">foo</span> ) {
            <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Hello baz'</span>;
        } <span style="color: #51afef;">else</span> {
            <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Eh?'</span>;
        }
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb0d0d52" class="outline-3">
<h3 id="orgb0d0d52"><span class="section-number-3">8.6</span> Don't Use Globals</h3>
<div class="outline-text-3" id="text-8-6">
<p>
EVIL in pure form ;)
</p>
</div>
</div>
<div id="outline-container-org43e9371" class="outline-3">
<h3 id="org43e9371"><span class="section-number-3">8.7</span> Don't Use Magic Numbers</h3>
<div class="outline-text-3" id="text-8-7">
<p>
   Raw numbers in code. Like 86400 - that's a number of seconds per day. But it is not so obvious for every one whats that number means
Refactoring: Replace Magic Number with Symbolic Constant
</p>
</div>
</div>
<div id="outline-container-orgfc4c7e0" class="outline-3">
<h3 id="orgfc4c7e0"><span class="section-number-3">8.8</span> Don't Use Method Chaining Syntax</h3>
<div class="outline-text-3" id="text-8-8">
<p>
Violating CQS
</p>
</div>
</div>
<div id="outline-container-org7526dd7" class="outline-3">
<h3 id="org7526dd7"><span class="section-number-3">8.9</span> Don't Use Optional Dependencies</h3>
<div class="outline-text-3" id="text-8-9">
<p>
Use Constructor Injection not Setter Injection. Constructor Injection gives you a valid object with all its dependencies, upon construction.
</p>
</div>
</div>
<div id="outline-container-org56e327c" class="outline-3">
<h3 id="org56e327c"><span class="section-number-3">8.10</span> Don't Use Switch Parameter</h3>
<div class="outline-text-3" id="text-8-10">
<p>
A method runs different code depending on the values of an parameter
Refactoring: Replace Parameter with Method
</p>
</div>
</div>
<div id="outline-container-orgc5cc806" class="outline-3">
<h3 id="orgc5cc806"><span class="section-number-3">8.11</span> Don't Use Traits</h3>
<div class="outline-text-3" id="text-8-11">
<p>
Further Reading: <a href="https://dev.to/barryosull/why-i-dont-like-traits">https://dev.to/barryosull/why-i-dont-like-traits</a>
</p>
</div>
</div>
<div id="outline-container-orgcb724f4" class="outline-3">
<h3 id="orgcb724f4"><span class="section-number-3">8.12</span> Eliminate or Reduce Number of Comments</h3>
</div>
<div id="outline-container-orgc3025fc" class="outline-3">
<h3 id="orgc3025fc"><span class="section-number-3">8.13</span> Eliminate or Reduce Number of Parameters</h3>
<div class="outline-text-3" id="text-8-13">
<p>
Functions should have a small number of arguments. No argument is best, followed by one, two, and three. More than three is very questionable and should be avoided with prejudice.
</p>
</div>
</div>
<div id="outline-container-org53fa5a1" class="outline-3">
<h3 id="org53fa5a1"><span class="section-number-3">8.14</span> Eliminate or Reduce Number of Setters</h3>
<div class="outline-text-3" id="text-8-14">
<p>
Further Reading: <a href="https://beberlei.de/2012/08/22/building_an_object_model__no_setters_allowed.html">https://beberlei.de/2012/08/22/building_an_object_model__no_setters_allowed.html</a> 
<a href="http://williamdurand.fr/2013/06/03/object-calisthenics/#9-no-getterssettersproperties">http://williamdurand.fr/2013/06/03/object-calisthenics/#9-no-getterssettersproperties</a>
</p>
</div>
</div>
<div id="outline-container-orga8fe864" class="outline-3">
<h3 id="orga8fe864"><span class="section-number-3">8.15</span> Make Class Constants &amp; Variables Always Private</h3>
</div>
<div id="outline-container-orgfbf9a15" class="outline-3">
<h3 id="orgfbf9a15"><span class="section-number-3">8.16</span> Make Classes Always Final</h3>
<div class="outline-text-3" id="text-8-16">
<p>
Force to use composition over inheritance principle
Further Reading: <a href="https://ocramius.github.io/blog/when-to-declare-classes-final">https://ocramius.github.io/blog/when-to-declare-classes-final</a> <a href="https://matthiasnoback.nl/2018/09/final-classes-by-default-why/">https://matthiasnoback.nl/2018/09/final-classes-by-default-why/</a>
</p>
</div>
</div>
<div id="outline-container-org170d27f" class="outline-3">
<h3 id="org170d27f"><span class="section-number-3">8.17</span> Sprout Class</h3>
</div>
<div id="outline-container-orgc3b6d48" class="outline-3">
<h3 id="orgc3b6d48"><span class="section-number-3">8.18</span> Sprout Method</h3>
<div class="outline-text-3" id="text-8-18">
<p>
When adding new functionality, write the code in a new method with TDD and then call this method from the old code. So even if you can’t test the code where your method is being called, at least the new code has tests.
</p>
<ol class="org-ol">
<li>Identify where you need to make your code change.</li>
<li>If the change can be formulated as a single sequence of statements in one place in a method, write down a call for a new method that will do the work involved and then comment it out. (I like to do this before I even write the method so that I can get a sense of what the method call will look like in context.)</li>
<li>Determine what local variables you need from the source method, and make them arguments to the call.</li>
</ol>
<p>
4.Determine whether the sprouted method will need to return values to source method. If so, change the call so that its return value is assigned to a variable. 
</p>
<ol class="org-ol">
<li>Develop the sprout method using test-driven development.</li>
<li>Remove the comment in the source method to enable the call.</li>
</ol>
</div>
</div>
<div id="outline-container-orge70ba8f" class="outline-3">
<h3 id="orge70ba8f"><span class="section-number-3">8.19</span> Use parentheses</h3>
<div class="outline-text-3" id="text-8-19">
<p>
Parentheses help clarify the order of operators&#x2026;etc. PHP won’t get confused if you don’t use parentheses because it knows the order of operators table very well. However, a person looking at your program has to figure out which is done first, and parentheses help group operations together.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">if</span> (age &lt; 20 || sales &lt; 1200 &amp;&amp; hrsWorked &gt; 15) {}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">if</span> ((age &lt; 20) || ((sales &lt; 1200) &amp;&amp; (hrsWorked &gt; 15))) {}
</pre>
</div>
</div>
</div>
<div id="outline-container-org9b16517" class="outline-3">
<h3 id="org9b16517"><span class="section-number-3">8.20</span> Wrap Class</h3>
<div class="outline-text-3" id="text-8-20">
<p>
Choosing to use Wrap Class is a whole other issue. There is a higher thresh- old for this pattern. Generally two cases tip me toward using Wrap Class: 1. The behavior that I want to add is completely independent, and I don’t want to pollute the existing class with behavior that is low level or unre- lated. 2. The class has grown so large that I really can’t stand to make it worse. In a case like this, I wrap just to put a stake in the ground and provide a roadmap for later changes.
</p>
</div>
</div>
<div id="outline-container-orge335ecd" class="outline-3">
<h3 id="orge335ecd"><span class="section-number-3">8.21</span> Wrap Method</h3>
</div>
<div id="outline-container-org3480751" class="outline-3">
<h3 id="org3480751"><span class="section-number-3">8.22</span> Naming</h3>
<div class="outline-text-3" id="text-8-22">
</div>
<div id="outline-container-org61b2db1" class="outline-4">
<h4 id="org61b2db1"><span class="section-number-4">8.22.1</span> variable</h4>
</div>
<div id="outline-container-org9424a1b" class="outline-4">
<h4 id="org9424a1b"><span class="section-number-4">8.22.2</span> method</h4>
<div class="outline-text-4" id="text-8-22-2">
<ul class="org-ul">
<li>isX() or hasX() for bool return type</li>
</ul>
</div>
</div>
<div id="outline-container-org75f34c3" class="outline-4">
<h4 id="org75f34c3"><span class="section-number-4">8.22.3</span> snake<sub>case</sub></h4>
<div class="outline-text-4" id="text-8-22-3">
</div>
<ol class="org-ol">
<li><a id="orgdaa1479"></a>Clients must use API with snake<sub>case</sub> (keys in JSON object sent in request body are in snake<sub>case</sub>).<br /></li>
<li><a id="org0b4c05b"></a>Database column names are also snake<sub>case</sub>.<br />
<div class="outline-text-5" id="text-8-22-3-2">
<p>
Based on an eye tracking study on camelCase and snake<sub>case</sub> (PDF) from 2010, snake<sub>case</sub> is 20% easier to read than camelCase!
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">name</td>
<td class="org-left">psr</td>
<td class="org-left">comunnity</td>
<td class="org-left">description</td>
</tr>

<tr>
<td class="org-left">method names</td>
<td class="org-left">camelCase() 21/22. lower<sub>under</sub> 1/22</td>
<td class="org-left">camelCase()</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Properties names</td>
<td class="org-left">$StudlyCaps or $camelCase or $under<sub>score</sub></td>
<td class="org-left">$camelCase</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
XMLHttpRequest is still a great tragedy
</p>

<p>
Based on an  <a href="http://www.cs.kent.edu/~jmaletic/papers/ICPC2010-CamelCaseUnderScoreClouds.pdf">(PDF)</a> from 2010, snake<sub>case</sub> is 20% easier to read than camelCase!
<a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&amp;arnumber=5521745">eye tracking study on camelCase and snake<sub>case</sub></a>
<a href="https://stitcher.io/blog/have-you-thought-about-casing">https://stitcher.io/blog/have-you-thought-about-casing</a>
<a href="http://www.cs.loyola.edu/~binkley/papers/icpc09-clouds.pdf?fbclid=IwAR2lZJWpYcV-TK2HNpy-JmB3A9g0nSeCeSaDr2ZVh30hSlS41n5O48YoiWc">http://www.cs.loyola.edu/~binkley/papers/icpc09-clouds.pdf?fbclid=IwAR2lZJWpYcV-TK2HNpy-JmB3A9g0nSeCeSaDr2ZVh30hSlS41n5O48YoiWc</a>
</p>
</div>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org1b9ddb1" class="outline-2">
<h2 id="org1b9ddb1"><span class="section-number-2">9</span> Principles</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-org1e8ad4f" class="outline-3">
<h3 id="org1e8ad4f"><span class="section-number-3">9.1</span> SOLID</h3>
<div class="outline-text-3" id="text-9-1">
<p>
There is a strong relationship beetween each of those principles. If you take each of those principles in isolation and try to apply them in your codebase you will get limited benefit out of that. it's only when you take enterly package apply it in it entarity. Applying it all at once. Strong sinergy efect.
</p>
</div>
<div id="outline-container-org3dfa7ec" class="outline-4">
<h4 id="org3dfa7ec"><span class="section-number-4">9.1.1</span> Single Responsibilty (SRP)</h4>
<div class="outline-text-4" id="text-9-1-1">
<p>
A class should have only one reason to change - doing one thing, and do it well The object should be able to do the job completely The class has only one well-defined responsibility which is exclusively handling user data. No more, no less.
</p>
</div>
</div>
<div id="outline-container-org31bf298" class="outline-4">
<h4 id="org31bf298"><span class="section-number-4">9.1.2</span> Open/Closed Principle (OCP)</h4>
<div class="outline-text-4" id="text-9-1-2">
<p>
Software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification. Interface is open for extension but closed for modification.
</p>
</div>
</div>
<div id="outline-container-orge7dad5d" class="outline-4">
<h4 id="orge7dad5d"><span class="section-number-4">9.1.3</span> Liskov Substitution (LSP)</h4>
<div class="outline-text-4" id="text-9-1-3">
<p>
Metody do klas bazowych, muszą być w stanie używać również obiektów klas dziedziczących po klasach bazowych.	Program to an, interface, not an implementation.
</p>
</div>
</div>
<div id="outline-container-org6eb10d9" class="outline-4">
<h4 id="org6eb10d9"><span class="section-number-4">9.1.4</span> Interface Segregation (ISP)</h4>
<div class="outline-text-4" id="text-9-1-4">
<p>
A client should never be forced to implement an interface that it doesn't use or clients shouldn't be forced to depend on methods they do not use.
</p>
</div>
</div>
<div id="outline-container-org1a97412" class="outline-4">
<h4 id="org1a97412"><span class="section-number-4">9.1.5</span> Dependency Inversion (DIP)</h4>
<div class="outline-text-4" id="text-9-1-5">
<p>
Depend on abstractions, not concretions. Program to an, interface, not an implementation.
</p>
</div>
</div>
</div>
<div id="outline-container-org6021786" class="outline-3">
<h3 id="org6021786"><span class="section-number-3">9.2</span> GRASP General Responsibility Assignment Software Patterns</h3>
<div class="outline-text-3" id="text-9-2">
<ul class="org-ul">
<li>Craig Larman 1997 - Applying UML and Patterns (BN)</li>
</ul>
</div>
</div>
<div id="outline-container-org617fafa" class="outline-3">
<h3 id="org617fafa"><span class="section-number-3">9.3</span> Design</h3>
<div class="outline-text-3" id="text-9-3">
</div>
<div id="outline-container-org6bd4f82" class="outline-4">
<h4 id="org6bd4f82"><span class="section-number-4">9.3.1</span> Separation of Concerns (SoC)</h4>
<div class="outline-text-4" id="text-9-3-1">
<p>
The no.1 - the most important
</p>
</div>
<ol class="org-ol">
<li><a id="org949a118"></a>opposite<br />
<div class="outline-text-5" id="text-9-3-1-1">
<p>
Big Ball of Mud
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org2533834" class="outline-4">
<h4 id="org2533834"><span class="section-number-4">9.3.2</span> Big Ball of Mud</h4>
<div class="outline-text-4" id="text-9-3-2">
<p>
<a href="http://www.laputan.org/mud/">http://www.laputan.org/mud/</a>
</p>
</div>
</div>
<div id="outline-container-orgaa1d378" class="outline-4">
<h4 id="orgaa1d378"><span class="section-number-4">9.3.3</span> Command Query Separation (CQS)</h4>
</div>
<div id="outline-container-orgdc91418" class="outline-4">
<h4 id="orgdc91418"><span class="section-number-4">9.3.4</span> Composition Over Inheritance</h4>
</div>
<div id="outline-container-org8b72254" class="outline-4">
<h4 id="org8b72254"><span class="section-number-4">9.3.5</span> YAGNI</h4>
</div>
<div id="outline-container-orge418968" class="outline-4">
<h4 id="orge418968"><span class="section-number-4">9.3.6</span> Don't Repeat Yourself (DRY)</h4>
<div class="outline-text-4" id="text-9-3-6">
<p>
<a href="http://web-techno.net/dry-principle-explained/">http://web-techno.net/dry-principle-explained/</a>
</p>
</div>
</div>
<div id="outline-container-orgf92d9cd" class="outline-4">
<h4 id="orgf92d9cd"><span class="section-number-4">9.3.7</span> The Law of Demeter (LoD)</h4>
<div class="outline-text-4" id="text-9-3-7">
<p>
Each unit should only talk to its friends; don't talk to strangers.	
</p>
<ul class="org-ul">
<li>Object Calisthenics - One Arrow Per Line</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgcbfaf89" class="outline-3">
<h3 id="orgcbfaf89"><span class="section-number-3">9.4</span> Architectural</h3>
<div class="outline-text-3" id="text-9-4">
</div>
<div id="outline-container-orgc91a5f8" class="outline-4">
<h4 id="orgc91a5f8"><span class="section-number-4">9.4.1</span> Model-View-Controller</h4>
<div class="outline-text-4" id="text-9-4-1">
<p>
• The Model: Captures and centralizes all the domain model behaviour. This layer manages all the data, logic and business rules independently of the data representation. It can be said that the Model layer is the heart and soul of every MVC application. • The Controller: Orchestrates interactions between the other layers. Triggers actions on the model in order to update its state and refreshes the representations associated to the model. Additionally, the Controller can also send messages to the View layer in order to change the specific Model representation. • The View: A layer whose main purpose is to expose the differing representations of the Model layer and to give a way to trigger changes on the Model’s state.
</p>
</div>
</div>
<div id="outline-container-orge5aadb2" class="outline-4">
<h4 id="orge5aadb2"><span class="section-number-4">9.4.2</span> Api</h4>
<div class="outline-text-4" id="text-9-4-2">
</div>
<ol class="org-ol">
<li><a id="orgdbb4902"></a>Tools<br />
<div class="outline-text-5" id="text-9-4-2-1">
<p>
<a href="https://github.com/Crell/ApiProblem">APIProblem</a>
<a href="https://medium.com/@ideneal/symfony-4-a-good-way-to-deal-with-exceptions-for-rest-api-afd8b615c923">https://medium.com/@ideneal/symfony-4-a-good-way-to-deal-with-exceptions-for-rest-api-afd8b615c923</a>
</p>
</div>
</li>
<li><a id="orgd6ff397"></a>under<sub>score</sub> vs camelCase vs kebab<br />
<div class="outline-text-5" id="text-9-4-2-2">
<ul class="org-ul">
<li><a href="https://github.com/json-api/json-api/issues/1255">https://github.com/json-api/json-api/issues/1255</a></li>
<li><a href="https://stackoverflow.com/questions/10302179/hyphen-underscore-or-camelcase-as-word-delimiter-in-uris">https://stackoverflow.com/questions/10302179/hyphen-underscore-or-camelcase-as-word-delimiter-in-uris</a></li>
</ul>
</div>
</li>
<li><a id="org3ae69e3"></a>Info<br />
<div class="outline-text-5" id="text-9-4-2-3">
<p>
Pluralization of resource names in REST URIs is the widely adopted standard followed by the overwhelming majority of public and private APIs.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">method</th>
<th scope="col" class="org-left">endpoint</th>
<th scope="col" class="org-left">controller</th>
<th scope="col" class="org-left">info</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">GET</td>
<td class="org-left">/resources</td>
<td class="org-left">list</td>
<td class="org-left">returns a list of resource items</td>
</tr>

<tr>
<td class="org-left">POST</td>
<td class="org-left">/resources</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">creates one or many resource items</td>
</tr>

<tr>
<td class="org-left">PUT</td>
<td class="org-left">/resources</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">updates one or many resource items</td>
</tr>

<tr>
<td class="org-left">PATCH</td>
<td class="org-left">/resources</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">partially updates one or many resource items</td>
</tr>

<tr>
<td class="org-left">DELETE</td>
<td class="org-left">/resources</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">deletes all resource items And for single resource items:</td>
</tr>

<tr>
<td class="org-left">GET</td>
<td class="org-left"><i>resources</i>:id</td>
<td class="org-left">show</td>
<td class="org-left">returns a specific resource item based on :id parameter</td>
</tr>

<tr>
<td class="org-left">POST</td>
<td class="org-left"><i>resources</i>:id</td>
<td class="org-left">create</td>
<td class="org-left">creates one resource item with specified id (requires validation)</td>
</tr>

<tr>
<td class="org-left">PUT</td>
<td class="org-left"><i>resources</i>:id</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">updates a specific resource item</td>
</tr>

<tr>
<td class="org-left">PATCH</td>
<td class="org-left"><i>resources</i>:id</td>
<td class="org-left">update</td>
<td class="org-left">partially updates a specific resource item</td>
</tr>

<tr>
<td class="org-left">DELETE</td>
<td class="org-left"><i>resources</i>:id</td>
<td class="org-left">delete</td>
<td class="org-left">deletes a specific resource item</td>
</tr>
</tbody>
</table>
</div>


<ol class="org-ol">
<li><a id="orgb67d252"></a><a href="https://tools.ietf.org/id/draft-ietf-httpbis-semantics-01.txt">HTTP Semantics</a><br />
<ol class="org-ol">
<li><a id="org88ded48"></a>DELETE<br />
<div class="outline-text-7" id="text-9-4-2-3-1-1">
<p>
If a DELETE method is successfully applied, the origin server SHOULD send a 202 (Accepted) status code if the action will likely succeed but has not yet been enacted, a 204 (No Content) status code if the action has been enacted and no further information is to be supplied, or a 200 (OK) status code if the action has been enacted and the response message includes a representation describing the status.
</p>
</div>
</li>

<li><a id="orgd2fde8c"></a>PATCH<br />
<div class="outline-text-7" id="text-9-4-2-3-1-2">
<p>
???
</p>
</div>
</li>
</ol>
</li>


<li><a id="org279bcd5"></a>Sorting<br />
<div class="outline-text-6" id="text-9-4-2-3-2">
<p>
We can also add a sort parameter to sort by field. The sort field in turn contains a list of
comma separated columns to sort on; the first in the list is the highest sort priority. In order
to negatively sort you prefix a column with a negative sign -
GET /tickets?sort=-amount: sort orders by descending order of amount
(highest first).
GET /tickets?sort=-amount,created<sub>at</sub>: sort orders by descending order
of amount (highest first). Within those amounts (with orders of equal amounts),
older orders are listed first.
</p>
</div>
</li>

<li><a id="orgf4a6e4c"></a>Searching<br />
<div class="outline-text-6" id="text-9-4-2-3-3">
<p>
We can then search using a simple parameter that applies a search query that can then be
routed through a search service (for example, ElasticSearch).
Suppose we want to search orders for the phrase refund, we can define a field for search
queries:
GET /orders?q=refund
</p>
</div>
</li>

<li><a id="orge5f8c52"></a>Limiting fields<br />
<div class="outline-text-6" id="text-9-4-2-3-4">
<p>
Additionally, using a fields parameter we can query for specific fields:
GET /orders?fields=amount,created<sub>at,customer</sub><sub>name,shipping</sub><sub>address</sub>
</p>
</div>
</li>
</ol>
</li>
<li><a id="org137fe63"></a>How to pack data<br />
<div class="outline-text-5" id="text-9-4-2-4">
<p>
<a href="https://jsonapi.org/format/">https://jsonapi.org/format/</a>
</p>


<p>
A JSON object MUST be at the root of every JSON:API request and response containing data. This object defines a document’s “top level”.
</p>

<p>
A document MUST contain at least one of the following top-level members:
</p>

<p>
data: the document’s “primary data”
errors: an array of error objects
meta: a meta object that contains non-standard meta-information.
</p>

<p>
The members data and errors MUST NOT coexist in the same document.
</p>
</div>
</li>
<li><a id="orga3e724b"></a>Links<br />
<div class="outline-text-5" id="text-9-4-2-5">
<ul class="org-ul">
<li><a href="http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api">http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api</a></li>
<li><a href="http://blog.restcase.com/7-rules-for-rest-api-uri-design/">http://blog.restcase.com/7-rules-for-rest-api-uri-design/</a></li>
<li><a href="https://www.loggly.com/blog/http-status-code-diagram/">https://www.loggly.com/blog/http-status-code-diagram/</a></li>
<li><a href="https://github.com/sendgrid/php-http-client">https://github.com/sendgrid/php-http-client</a></li>
<li><a href="https://www.reddit.com/r/PHP/comments/40u74q/how_to_write_a_sdk_for_our_rest_api_best_practices/">https://www.reddit.com/r/PHP/comments/40u74q/how_to_write_a_sdk_for_our_rest_api_best_practices/</a></li>
<li><a href="https://seegatesite.com/php-json-web-token-tutorial-for-beginners/">PHP JSON Web Token Tutorial For Beginners</a></li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org83b0c87" class="outline-2">
<h2 id="org83b0c87"><span class="section-number-2">10</span> Paradigm</h2>
<div class="outline-text-2" id="text-10">
</div>
<div id="outline-container-org8de3b9b" class="outline-3">
<h3 id="org8de3b9b"><span class="section-number-3">10.1</span> Imperative</h3>
<div class="outline-text-3" id="text-10-1">
<ul class="org-ul">
<li>uses statements that change a program's state</li>
<li>focuses on describing how a program operates</li>
<li>The term is often used in contrast to declarative programming, which focuses on what the program should accomplish without specifying how the program should achieve the result.</li>
</ul>
</div>
<div id="outline-container-orga0091d0" class="outline-4">
<h4 id="orga0091d0"><span class="section-number-4">10.1.1</span> Procedural</h4>
</div>
<div id="outline-container-orgd19c6aa" class="outline-4">
<h4 id="orgd19c6aa"><span class="section-number-4">10.1.2</span> OOP</h4>
<div class="outline-text-4" id="text-10-1-2">
<p>
data before action vs. procedual action before data
<a href="https://www.youtube.com/watch?v=lbXsrHGhBAU">https://www.youtube.com/watch?v=lbXsrHGhBAU</a>
</p>
</div>
<ol class="org-ol">
<li><a id="org069d3a1"></a>definition<br />
<ol class="org-ol">
<li><a id="org7443e65"></a>class (data type definition)<br />
<ol class="org-ol">
<li><a id="orgccbabbc"></a>field (data member)<br /></li>
<li><a id="orgc123a3f"></a>method (function member) - function associate woth class<br />
<div class="outline-text-7" id="text-10-1-2-1-1-2">
<p>
object/instance (piece of data)
</p>
</div>
</li>
</ol>
</li>
</ol>
</li>

<li><a id="org2efba34"></a>Principles<br />
<ol class="org-ol">
<li><a id="org357d8d3"></a>encapsulution - methods act as 'interface' to object's fields.<br />
<div class="outline-text-6" id="text-10-1-2-2-1">
<p>
Fields of an object and instance should only be read or written by methods of that instances class.
</p>
</div>
</li>
<li><a id="orgb1c9b36"></a>inheritance<br />
<div class="outline-text-6" id="text-10-1-2-2-2">
<p>
My design goals are :
</p>
<ul class="org-ul">
<li>The simples code that does what he needs to.</li>
<li>complexity has to justyfiy itself</li>
</ul>

<p>
OOP Tutorial
</p>

<p>
OOP Tutorial 
4 APIE
Abstraction
Polymorphism
Innheritance
Encapsulation
</p>

<p>
<a href="https://www.youtube.com/watch?v=QM1iUe6IofM">Object-Oriented Programming is Bad</a>
</p>

<p>
procedural &amp; imperative (the default)
procedural &amp; functional (minimize state)
object-oriented &amp; imperative (segregate state)
object-oriented &amp; functional (do both)
</p>

<p>
Can't find the answear on internet. I would like to play offline, set broadcast to lan, play offline. Then when I join the server I see only console. How I can jump in to the game? 
</p>
</div>
</li>
</ol>
</li>
</ol>
</div>
</div>

<div id="outline-container-orgcf3440d" class="outline-3">
<h3 id="orgcf3440d"><span class="section-number-3">10.2</span> Declarative</h3>
<div class="outline-text-3" id="text-10-2">
</div>
<div id="outline-container-orgd345247" class="outline-4">
<h4 id="orgd345247"><span class="section-number-4">10.2.1</span> Functional Programming</h4>
<div class="outline-text-4" id="text-10-2-1">
<p>
that treats computation as the evaluation of mathematical functions and avoids changing-state and mutable data. It is a declarative programming paradigm in that programming is done with expressions or declarations instead of statements. Here are some important properties of mathematical functions that we’ll
want our Lisp functions to obey as well:
</p>

<ul class="org-ul">
<li>The function always returns the same result, as long as the same arguments are passed into it. (This is often referred to as referential transparency.)</li>
<li>The function never references variables that are defined outside the function, unless we are certain that these variables will remain constant.</li>
<li>No variables are modified (or mutated, as functional programmers like to say) by the function.
<ul class="org-ul">
<li>The purpose of the function is to do nothing other than to return a result.</li>
<li>The function doesn’t do anything that is visible to the outside world, such as pop up a dialog box on the screen or make your computer go “Bing!”</li>
<li>The function doesn’t take information from an outside source, such as the keyboard or the hard drive.</li>
</ul></li>
</ul>

<p>
If we obey these rules whenever possible, we can say that our code is written in the functional style.
</p>

<p>
This leads us to the central philosophy of functional programming. It states that you should break your program into two parts:
</p>

<ul class="org-ul">
<li>The first, and biggest part, should be completely functional and free of side effects. This is the clean part of your program.</li>
<li>The second, smaller part of your program is the part that has all the side effects, interacting with the user and the rest of the outside world. This code is dirty and should be kept as small as possible.</li>
</ul>

<p>
Furthermore, sharing of structures can be done safely, since one of the tenets of functional programming is to never modify old pieces of data.
</p>
</div>

<ol class="org-ol">
<li><a id="org4e32758"></a>Functional Programming Reduces Bugs<br />
<div class="outline-text-6" id="text-10-2-1-0-1">
<p>
Bugs in computer programs usually happen because, under certain circum-stances, the code behaves in ways the programmer didn’t expect when the code was written. In functional programming, the behavior of your functions depends on one and only one thing: the arguments explicitly passed into the function. This makes it much easier for a programmer to appreciate all the circumstances a program could possibly encounter, including circumstances that could lead to errors. Writing functions that depend on only their arguments for their behavior also makes bugs easy to duplicate. If you call a function with the same data passed in through its arguments, it should do the same exact thing every time. This is the property we called referential transparency.
</p>
</div>
</li>
<li><a id="org7a68b23"></a>Functional Code Is More Elegant<br />
<div class="outline-text-6" id="text-10-2-1-0-2">
<p>
The biggest advantage of functional programming is that it brings all of computer programming back to the domain of mathematics. It wouldn’t make sense for a math equation to pop up a dialog box or write to the hard drive. It can be argued that if we get our computer code back to this same level of purity, it will be far more elegant. Additionally, if our code is closer to the world of mathematics, we may be able to use tools in mathematics to write better computer code. In fact, a lot of research continues to be done in using mathematical proofs to check for the correctness of functional computer programs. Although this research still isn’t to the point where a practical programmer would use such techniques, they may be more common in the future. And, almost cer- tainly, a functional programming style will be essential in making correctness proofs on your code possible
</p>
</div>
</li>
<li><a id="org256e0af"></a>Functional Programs Are More Compact<br />
<div class="outline-text-6" id="text-10-2-1-0-3">
<p>
It turns out a lot of the work in run-of-the-mill computer programs involves creating, initializing, and updating variables. Functional programs don’t do any of this. As we discussed earlier, functional programs make use of higher order functions, which don’t require us to create tons of temporary variables in our code, and that makes our code more compact.
</p>
</div>
</li>
</ol>
<li><a id="org21b4f01"></a>links<br />
<div class="outline-text-5" id="text-10-2-1-1">
<ul class="org-ul">
<li><a href="https://apiumhub.com/tech-blog-barcelona/functional-php/">FUNCTIONAL PHP: A FIRST APPROACH</a></li>
<li><a href="http://scott.sauyet.com/Javascript/Talk/2014/01/FuncProgTalk/">http://scott.sauyet.com/Javascript/Talk/2014/01/FuncProgTalk/</a></li>
</ul>
</div>
</li>
<li><a id="orgc077633"></a>tutorials<br />
<ol class="org-ol">
<li><a id="orga725c07"></a><a href="https://www.youtube.com/watch?v=7Zlp9rKHGD4">Robert C Martin - Functional Programming; What? Why? When?</a><br />
<ol class="org-ol">
<li><a id="org684098b"></a>what is state?<br />
<div class="outline-text-7" id="text-10-2-1-2-1-1">
<p>
1; <i>/ a value
int x = /</i> x is an id that has a value
x = x + 1 //now x has changed state 
</p>
</div>
</li>
<li><a id="org53e7362"></a>is this stateless?<br />
<div class="outline-text-7" id="text-10-2-1-2-1-2">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">main</span>() {
    printf(<span style="color: #98be65;">"Hello, world\n"</span>);
}
</pre>
</div>
<p>
Yes, there is no state being change anywhere. But it does hava a side effect it prints something on the screen.
</p>
</div>
</li>
<li><a id="org1c1dfa8"></a>squares of integers<br />
<ol class="org-ol">
<li><a id="org8bc76ad"></a>statefull<br />
<div class="outline-text-8" id="text-10-2-1-2-1-3-1">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #51afef;">public</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Squint</span> {
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">static</span> <span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">main</span>(<span style="color: #ECBE7B;">String</span>[] <span style="color: #dcaeea;">args</span>) {
        <span style="color: #51afef;">for</span> (<span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span>=1; i&lt;=20; i++)
            System.out.format(<span style="color: #98be65;">"%d, \t%d\n"</span>), i, i*i)
}
}
</pre>
</div>
<p>
for loop change a state of variable i
</p>
</div>
</li>
<li><a id="orgf3e503c"></a>stateless<br />
<div class="outline-text-8" id="text-10-2-1-2-1-3-2">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #51afef;">public</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Squint</span> {
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">static</span> <span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">main</span>(<span style="color: #ECBE7B;">String</span>[] <span style="color: #dcaeea;">args</span>){
        printSquares(20);
    }
}

<span style="color: #51afef;">private</span> <span style="color: #51afef;">static</span> <span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">printSquares</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">n</span>){
    <span style="color: #51afef;">if</span>(n &gt; 0) {
        printSquares(n-1);
        System.out.format(<span style="color: #98be65;">"%d, \t%d\n"</span>, n, n*n);
            }
}
</pre>
</div>
<p>
stateles. No variable is altered. Squint calls itself. New variable is being recreated but it dosent change state.
</p>
</div>
</li>
</ol>
</li>
<li><a id="org82b02dc"></a>side effect<br />
<div class="outline-text-7" id="text-10-2-1-2-1-4">
<p>
its assignment statement, all side effects are result of assignment statements, if there are not assignments statements there cannot be side effects. Only assignment statements change the state of variable. When you have a function that gives you a side effect you need another function to undo the side effect.
Open-&gt;Close malloc-&gt;free - they are seperated in time, one must come before other first open then close. 
</p>
</div>
</li>
<li><a id="org3fb0a60"></a>multi core problem<br /></li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</div>
<div id="outline-container-orga9d18ea" class="outline-3">
<h3 id="orga9d18ea"><span class="section-number-3">10.3</span> Structured</h3>
<div class="outline-text-3" id="text-10-3">
<p>
Aimed at improving the clarity, quality, and development time of a computer program by making extensive use of the structured control flow constructs of selection (if/then/else) and repetition (while and for), block structures, and subroutines.
</p>
</div>
</div>
<div id="outline-container-orgdbf81b3" class="outline-3">
<h3 id="orgdbf81b3"><span class="section-number-3">10.4</span> Non-structured</h3>
<div class="outline-text-3" id="text-10-4">
<p>
A program in a non-structured language uses unstructured jumps to labels or instruction addresses. The lines are usually numbered or may have labels: this allows the flow of execution to jump to any line in the program. This is in contrast to structured programming which uses structured constructs of selection (if/then/else) and repetition (while and for).
</p>
</div>
</div>
<div id="outline-container-orge125802" class="outline-3">
<h3 id="orge125802"><span class="section-number-3">10.5</span> Links</h3>
<div class="outline-text-3" id="text-10-5">
</div>
<div id="outline-container-org251e7ea" class="outline-4">
<h4 id="org251e7ea"><span class="section-number-4">10.5.1</span> <a href="https://youtu.be/cgVVZMfLjEI">4 Programming Paradigms In 40 Minutes</a></h4>
<div class="outline-text-4" id="text-10-5-1">
</div>
<ol class="org-ol">
<li><a id="org27128dc"></a>OOP<br />
<div class="outline-text-5" id="text-10-5-1-1">
<ul class="org-ul">
<li>everything is an object</li>
<li>state (properties) &amp; behaviour (methods)</li>
<li>modyfing it's own internal state</li>
</ul>
</div>
</li>
<li><a id="org90f8ee5"></a>Functional<br />
<div class="outline-text-5" id="text-10-5-1-2">
<ul class="org-ul">
<li>function take data &amp; output data</li>
<li>Pure Functional
<ul class="org-ul">
<li>don't store state</li>
<li>don't mutate incoming data</li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgc9c34f1" class="outline-2">
<h2 id="orgc9c34f1"><span class="section-number-2">11</span> Config</h2>
<div class="outline-text-2" id="text-11">
<p>
php -i | grep "Loaded Configuration File"
</p>
</div>
</div>
<div id="outline-container-org6181478" class="outline-2">
<h2 id="org6181478"><span class="section-number-2">12</span> Patterns</h2>
<div class="outline-text-2" id="text-12">
<ul class="org-ul">
<li>Patterns are formalized best practices.</li>
<li>is a named description of a problem and solution that can be applied to new contexts</li>
</ul>
</div>
<div id="outline-container-org24b6f5c" class="outline-3">
<h3 id="org24b6f5c"><span class="section-number-3">12.1</span> Software design patterns</h3>
<div class="outline-text-3" id="text-12-1">
</div>
<div id="outline-container-orgcd98f1d" class="outline-4">
<h4 id="orgcd98f1d"><span class="section-number-4">12.1.1</span> Creational</h4>
<div class="outline-text-4" id="text-12-1-1">
<p>
Creation of objects themselves - separate the construction of a complex object from its representation
</p>
</div>
<ol class="org-ol">
<li><a id="org5c93a80"></a>Factory<br />
<div class="outline-text-5" id="text-12-1-1-1">
<p>
Separating the creation of an object from the actual implementation. If creating the object is a complicated job you can do all of the work in the factory, instead of repeating it every time you want to create a new instance.
</p>
</div>
<ol class="org-ol">
<li><a id="org378a5e0"></a>Simple Factory<br />
<div class="outline-text-6" id="text-12-1-1-1-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Bicycle</span>
{
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">SimpleFactory</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">createBicycle</span>(): <span style="color: #ECBE7B;">Bicycle</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Bicycle</span>();
    }
}      
</pre>
</div>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">SimpleFactoryTest</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">TestCase</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">testCanCreateBicycle</span>()
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">bicycle</span> = (<span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">SimpleFactory</span>())<span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">createBicycle</span>();
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">assertInstanceOf</span>(<span style="color: #a9a1e1;">Bicycle</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #c678dd;">class</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">bicycle</span>);
    }
}
</pre>
</div>
</div>
</li>
<li><a id="org4e58af7"></a>Method Factory<br />
<div class="outline-text-6" id="text-12-1-1-1-2">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">interface</span> <span style="color: #ECBE7B;">CarFactory</span> 
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">makeCar</span>();
}

<span style="color: #51afef;">interface</span> <span style="color: #ECBE7B;">Car</span> 
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getType</span>();
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">SedanFactory</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">CarFactory</span> 
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">makeCar</span>() 
    {
        <span style="color: #51afef;">return</span> <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Sedan</span>();
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Sedan</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">Car</span> 
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getType</span>() 
    {
        <span style="color: #51afef;">return</span> <span style="color: #98be65;">'Sedan'</span>;
    }
}

<span style="color: #5B6268;">/* </span><span style="color: #5B6268;">Client</span><span style="color: #5B6268;"> */</span>
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">factory</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">SedanFactory</span>();
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">car</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">factory</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">makeCar</span>();
</pre>
</div>
</div>
</li>
<li><a id="org67a6238"></a>Abstract Factory<br />
<ol class="org-ol">
<li><a id="org1ca08a1"></a><a href="https://stackoverflow.com/questions/2280170/why-do-we-need-abstract-factory-design-pattern">https://stackoverflow.com/questions/2280170/why-do-we-need-abstract-factory-design-pattern</a><br /></li>
</ol>
</li>
<li><a id="org75f0442"></a>Links<br />
<div class="outline-text-6" id="text-12-1-1-1-4">
<ul class="org-ul">
<li><a href="https://stackify.com/static-factory-methods/">Abstract Factory Cleaner Code with Static Factory Methods</a></li>
</ul>
</div>
</li>
</ol>
</li>
<li><a id="org0e96ec8"></a>Builder<br />
<div class="outline-text-5" id="text-12-1-1-2">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Car</span>
{
    ...
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">CarBuilder</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>()
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">car</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Car</span>;
    }
    
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">build</span>(): <span style="color: #ECBE7B;">Car</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">car</span>;   
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setSeats</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">seats</span>)
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">car</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">setSeats</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">seats</span>);
    }
}
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="org34948cb"></a>links<br />
<div class="outline-text-6" id="text-12-1-1-2-1">
<ul class="org-ul">
<li><a href="http://blog.codeleak.pl/2014/06/test-data-builders-and-object-mother.html">http://blog.codeleak.pl/2014/06/test-data-builders-and-object-mother.html</a></li>
<li><a href="https://davedevelopment.co.uk/2015/01/28/test-data-builders.html">https://davedevelopment.co.uk/2015/01/28/test-data-builders.html</a></li>
</ul>
</div>
</li>
</ol>
</li>
<li><a id="org0d47f41"></a>Prototype<br />
<div class="outline-text-5" id="text-12-1-1-3">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">abstract</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Prototype</span>{
    <span style="color: #51afef;">protected</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;
 
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>) {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">name</span>=<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;
    }
    <span style="color: #51afef;">abstract</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__clone</span>();
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getName</span>() {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">name</span>;
    }
}
 
<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">ConcretePrototype</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">Prototype</span>{
 
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>) {
        <span style="color: #51afef;">parent</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #bbc2cf; background-color: #282c34;">__construct</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>);
    }
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__clone</span>() {}
}
 
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">testy</span>
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">prototype</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">ConcretePrototype</span>(<span style="color: #98be65;">"nazwa"</span>);
<span style="color: #51afef;">echo</span>  <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">prototype</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getName</span>(); <span style="color: #5B6268;">// </span><span style="color: #5B6268;">wyswietli "nazwa"</span>
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">prototype2</span> = <span style="color: #51afef;">clone</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">prototype</span>;
<span style="color: #51afef;">echo</span>  <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">prototype2</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getName</span>(); <span style="color: #5B6268;">// </span><span style="color: #5B6268;">wyswietli "nazwa"</span>

</pre>
</div>
</div>
</li>
<li><a id="org4a6d477"></a>Dependency Injection<br />
<div class="outline-text-5" id="text-12-1-1-4">
<p>
A class receives its dependencies from external sources rather than creating them itself. It's a method of decoupling code &amp; following the Dependency Inversion principle.
</p>
</div>
<ol class="org-ol">
<li><a id="orgb928cda"></a>Types of injection:<br />
<ol class="org-ol">
<li><a id="org90c929a"></a>Construction injection:<br />
<div class="outline-text-7" id="text-12-1-1-4-1-1">
<p>
dependencies are injected when creating the object. It can be used for required and optional dependencies.
</p>
</div>
</li>
<li><a id="org316fc41"></a>Setter injection:<br />
<div class="outline-text-7" id="text-12-1-1-4-1-2">
<p>
dependencies are injected through setters, and they are always optional.
</p>
</div>
</li>
<li><a id="org605612a"></a>Property injection:<br />
<div class="outline-text-7" id="text-12-1-1-4-1-3">
<p>
dependencies are injected directly through public properties. This type of injection is not recommended as there is no control at all of what is being injected.
</p>
</div>
</li>
</ol>
</li>
<li><a id="orga824afa"></a>Links<br />
<div class="outline-text-6" id="text-12-1-1-4-2">
<ul class="org-ul">
<li><a href="https://www.sitepoint.com/php-dependency-injection-container-performance-benchmarks/">PHP Dependency Injection Container Performance Benchmarks</a></li>
<li><a href="http://joebubna.github.io/Cora/documentation/v2/dependency-injection/overview/#avoiding-the-antipattern">http://joebubna.github.io/Cora/documentation/v2/dependency-injection/overview/#avoiding-the-antipattern</a></li>
</ul>
</div>
</li>
<li><a id="org8d6f68b"></a>Books<br />
<ol class="org-ol">
<li><a id="orgfec4480"></a>Dependency Injection Principles, Practices, and Patterns Mark Seemann, Steven van Deursen<br /></li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
<div id="outline-container-orgaf4ae93" class="outline-4">
<h4 id="orgaf4ae93"><span class="section-number-4">12.1.2</span> Structural</h4>
<div class="outline-text-4" id="text-12-1-2">
<p>
They act as interconnectors between entities. It serves as a blueprint for how basic classes can be combined to form bigger  entities. Structural patterns describe the static architecture of a design;
</p>
</div>

<ol class="org-ol">
<li><a id="org22057f0"></a>Bridge<br />
<div class="outline-text-5" id="text-12-1-2-1">
<p>
The Bridge pattern can be quite straightforward; it effectively allows us to decouple an abstraction from an implementation so the two can vary independently.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">interface</span> <span style="color: #ECBE7B;">FormatterInterface</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">format</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">text</span>);
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">PlainTextFormatter</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">FormatterInterface</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">format</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">text</span>)
    {
        <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">text</span>;
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">HtmlFormatter</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">FormatterInterface</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">format</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">text</span>)
    {
        <span style="color: #51afef;">return</span> sprintf(<span style="color: #98be65;">'&lt;p&gt;%s&lt;/p&gt;'</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">text</span>);
    }
}

<span style="color: #51afef;">abstract</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Service</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">FormatterInterface</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">protected</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">implementation</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@param</span><span style="color: #83898d;"> </span><span style="color: #98be65;">FormatterInterface</span><span style="color: #83898d;"> </span><span style="color: #dcaeea;">$</span><span style="color: #dcaeea;">printer</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">FormatterInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">printer</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">implementation</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">printer</span>;
    }

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@param</span><span style="color: #83898d;"> </span><span style="color: #98be65;">FormatterInterface</span><span style="color: #83898d;"> </span><span style="color: #dcaeea;">$</span><span style="color: #dcaeea;">printer</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setImplementation</span>(<span style="color: #ECBE7B;">FormatterInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">printer</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">implementation</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">printer</span>;
    }

    <span style="color: #51afef;">abstract</span> <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">get</span>();
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">HelloWorldService</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">Service</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">get</span>()
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">implementation</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">format</span>(<span style="color: #98be65;">'Hello World'</span>);
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">BridgeTest</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">TestCase</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">testCanPrintUsingThePlainTextPrinter</span>()
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">service</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">HelloWorldService</span>(<span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">PlainTextFormatter</span>());
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">assertEquals</span>(<span style="color: #98be65;">'Hello World'</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">service</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">get</span>());

        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">now change the implementation and use the HtmlFormatter instead</span>
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">service</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">setImplementation</span>(<span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">HtmlFormatter</span>());
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">assertEquals</span>(<span style="color: #98be65;">'&lt;p&gt;Hello World&lt;/p&gt;'</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">service</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">get</span>());
    }
}
</pre>
</div>
</div>
</li>
<li><a id="org9bd012a"></a>Facade<br />
<div class="outline-text-5" id="text-12-1-2-2">
<ul class="org-ul">
<li>A Facade is meant to decouple a client and a sub-system by embedding many (but sometimes just one) interface, and of course to reduce complexity.</li>
<li>That’s why a good facade has no new in it. If there are multiple creations for each method, it is not a Facade, it’s a Builder or a [Abstract|Static|Simple] Factory [Method].</li>
<li>The best facade has no new and a constructor with interface-type-hinted parameters. If you need creation of new instances, use a Factory as argument.</li>
<li>A Facade design pattern works providing a single class that in itself instantiates other classes and provides a simple interface to use those functions. A warning when using such pattern is that, as classes are instantiated within the Facade, you are essentially tightly coupling the classes that it utilizes. There are cases where you want this, but there are cases where you do not. Where do you do not want this behavior, you are better suited to using dependency injection. I have found this to be useful when wrapping a set of poor APIs into a single unified API. It reduces external dependencies, allowing complexity to be internalized; this process can make your code more readable. In other situations, where the various classes were loosely coupled together, we may find it better to use dependency injection. By injecting objects that perform various actions into the ToyFactory class we can benefit from making testing easier by being able to inject fake classes that the ToyFactory class can manipulate. Personally, I am a huge believer in making code as easily testable as possible; hence why I don't like this approach.</li>
</ul>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Facade</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">OsInterface</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">os</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">BiosInterface</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">bios</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@param</span><span style="color: #83898d;"> </span><span style="color: #98be65;">BiosInterface</span><span style="color: #83898d;"> </span><span style="color: #dcaeea;">$</span><span style="color: #dcaeea;">bios</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@param</span><span style="color: #83898d;"> </span><span style="color: #98be65;">OsInterface</span><span style="color: #83898d;">   </span><span style="color: #dcaeea;">$</span><span style="color: #dcaeea;">os</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">BiosInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">bios</span>, <span style="color: #ECBE7B;">OsInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">os</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">bios</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">bios</span>;
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">os</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">os</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">turnOn</span>()
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">bios</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">execute</span>();
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">bios</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">waitForKeyPress</span>();
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">bios</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">launch</span>(<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">os</span>);
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">turnOff</span>()
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">os</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">halt</span>();
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">bios</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">powerDown</span>();
    }
}

<span style="color: #51afef;">interface</span> <span style="color: #ECBE7B;">OsInterface</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">halt</span>();

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getName</span>(): <span style="color: #ECBE7B;">string</span>;
}

<span style="color: #51afef;">interface</span> <span style="color: #ECBE7B;">BiosInterface</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">execute</span>();

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">waitForKeyPress</span>();

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">launch</span>(<span style="color: #ECBE7B;">OsInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">os</span>);

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">powerDown</span>();
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">FacadeTest</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">TestCase</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">testComputerOn</span>()
    {
        <span style="color: #83898d;">/** </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">OsInterface|\PHPUnit_Framework_MockObject_MockObject</span><span style="color: #83898d;"> </span><span style="color: #dcaeea;">$</span><span style="color: #dcaeea;">os</span><span style="color: #83898d;"> */</span>
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">os</span> = <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">createMock</span>(<span style="color: #98be65;">'DesignPatterns\Structural\Facade\OsInterface'</span>);

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">os</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">method</span>(<span style="color: #98be65;">'getName'</span>)
            <span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">will</span>(<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">returnValue</span>(<span style="color: #98be65;">'Linux'</span>));

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">bios</span> = <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getMockBuilder</span>(<span style="color: #98be65;">'DesignPatterns\Structural\Facade\BiosInterface'</span>)
            <span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">setMethods</span>([<span style="color: #98be65;">'launch'</span>, <span style="color: #98be65;">'execute'</span>, <span style="color: #98be65;">'waitForKeyPress'</span>])
            <span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">disableAutoload</span>()
            <span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getMock</span>();

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">bios</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expects</span>(<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">once</span>())
            <span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">method</span>(<span style="color: #98be65;">'launch'</span>)
            <span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">with</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">os</span>);

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">facade</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Facade</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">bios</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">os</span>);

        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">the facade interface is simple</span>
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">facade</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">turnOn</span>();

        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">but you can also access the underlying components</span>
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">assertEquals</span>(<span style="color: #98be65;">'Linux'</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">os</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getName</span>());
    }
}

</pre>
</div>
</div>
</li>
<li><a id="org41bdd27"></a>Composite<br />
<div class="outline-text-5" id="text-12-1-2-3">
<p>
To treat a group of objects the same way as a single instance of the object.
</p>


<p>
Composite Imagine an audio system consisting of individual songs and also playlists of songs. Yes, playlists consist of songs, but we want both to be treated individually. Both are types of music, both can be played. The Composite design pattern can help here; it allows us to ignore the differences between compositions of objects and individual objects. It allows us to treat both with identical or nearly-identical code. Let's put together a little example; a song is our example of a leaf, with playlists being composites. Music is our abstraction of playlists and songs; therefore, we can call this our component. The client of all this is our index.php file. By not discriminating between leaf-nodes and branches, our code becomes less complex and therefore less error prone.
</p>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">interface</span> <span style="color: #ECBE7B;">RenderableInterface</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">render</span>(): <span style="color: #ECBE7B;">string</span>;
}

<span style="color: #83898d;">/**</span>
<span style="color: #83898d;"> * The composite node MUST extend the component contract. This is mandatory for building</span>
<span style="color: #83898d;"> * a tree of components.</span>
<span style="color: #83898d;"> */</span>
<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Form</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">RenderableInterface</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">RenderableInterface[]</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">elements</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * runs through all elements and calls render() on them, then returns the complete representation</span>
<span style="color: #83898d;">     * of the form.</span>
<span style="color: #83898d;">     *</span>
<span style="color: #83898d;">     * from the outside, one will not see this and the form will act like a single </span><span style="color: #ECBE7B;">object</span><span style="color: #83898d;"> instance</span>
<span style="color: #83898d;">     *</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@return</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">string</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">render</span>(): <span style="color: #ECBE7B;">string</span>
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">formCode</span> = <span style="color: #98be65;">'&lt;form&gt;'</span>;

        <span style="color: #51afef;">foreach</span> (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">elements</span> <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">element</span>) {
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">formCode</span> .= <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">element</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">render</span>();
        }

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">formCode</span> .= <span style="color: #98be65;">'&lt;/form&gt;'</span>;

        <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">formCode</span>;
    }

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@param</span><span style="color: #83898d;"> </span><span style="color: #98be65;">RenderableInterface</span><span style="color: #83898d;"> </span><span style="color: #dcaeea;">$</span><span style="color: #dcaeea;">element</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">addElement</span>(<span style="color: #ECBE7B;">RenderableInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">element</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">elements</span>[] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">element</span>;
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">InputElement</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">RenderableInterface</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">render</span>(): <span style="color: #ECBE7B;">string</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #98be65;">'&lt;input type="text" /&gt;'</span>;
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">TextElement</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">RenderableInterface</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">string</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">text</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">text</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">text</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">text</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">render</span>(): <span style="color: #ECBE7B;">string</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">text</span>;
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">CompositeTest</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">TestCase</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">testRender</span>()
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">form</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Composite\Form</span>();
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">form</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">addElement</span>(<span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Composite\TextElement</span>(<span style="color: #98be65;">'Email:'</span>));
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">form</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">addElement</span>(<span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Composite\InputElement</span>());
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">embed</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Composite\Form</span>();
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">embed</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">addElement</span>(<span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Composite\TextElement</span>(<span style="color: #98be65;">'Password:'</span>));
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">embed</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">addElement</span>(<span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Composite\InputElement</span>());
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">form</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">addElement</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">embed</span>);

        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">This is just an example, in a real world scenario it is important to remember that web browsers do not</span>
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">currently support nested forms</span>

        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">assertEquals</span>(
            <span style="color: #98be65;">'&lt;form&gt;Email:&lt;input type="text" /&gt;&lt;form&gt;Password:&lt;input type="text" /&gt;&lt;/form&gt;&lt;/form&gt;'</span>,
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">form</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">render</span>()
        );
    }
}
</pre>
</div>
</div>
</li>
<li><a id="org087f6f2"></a>Adapter (Wrapper)<br />
<div class="outline-text-5" id="text-12-1-2-4">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #5B6268;">// </span><span style="color: #5B6268;">Concrete Implementation of PayPal Class</span>
<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">PayPal</span> {
     
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>() {
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Your Code here //</span>
    }
     
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">sendPayment</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>) {
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Paying via Paypal //</span>
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Paying via PayPal: "</span>. <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>;
    }
}
 
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Simple Interface for each Adapter we create</span>
<span style="color: #51afef;">interface</span> <span style="color: #ECBE7B;">paymentAdapter</span> {
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">pay</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>);
}
 
<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">paypalAdapter</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">paymentAdapter</span> {
     
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">paypal</span>;
 
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">PayPal</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">paypal</span>) {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">paypal</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">paypal</span>;
    }
     
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">pay</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>) {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">paypal</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">sendPayment</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">amount</span>);
    }
}

<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Client Code</span>
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">paypal</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">paypalAdapter</span>(<span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">PayPal</span>());
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">paypal</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">pay</span>(<span style="color: #98be65;">'2629'</span>);
</pre>
</div>

<p>
 getData and
setData (not as “pretty”).
</p>
</div>
</li>
<li><a id="org01e5473"></a>Container<br />
<div class="outline-text-5" id="text-12-1-2-5">
<p>
<a href="https://de.wikipedia.org/wiki/Container_(Entwurfsmuster)">It is classified in the group of structural patterns.</a>
</p>

<ul class="org-ul">
<li><a href="http://krasimirtsonev.com/blog/article/Dependency-Injection-in-PHP-example-how-to-DI-create-your-own-dependency-injection-container">Dependency Injection in PHP. Create your own DI container</a></li>
<li><a href="https://www.sitepoint.com/how-to-build-your-own-dependency-injection-container/">How to Build Your Own Dependency Injection Container</a></li>
<li><a href="https://medium.com/tech-tajawal/dependency-injection-di-container-in-php-a7e5d309ccc6">Tutorial with 100 line example</a></li>
</ul>
</div>

<ol class="org-ol">
<li><a id="orged6361b"></a>Benchmark<br />
<div class="outline-text-6" id="text-12-1-2-5-1">
<p>
<a href="https://www.sitepoint.com/php-dependency-injection-container-performance-benchmarks/">PHP Dependency Injection Container Performance Benchmarks</a>
</p>
</div>
</li>
</ol>
</li>
</ol>
</div>
<div id="outline-container-org861b7d4" class="outline-4">
<h4 id="org861b7d4"><span class="section-number-4">12.1.3</span> Behavioral</h4>
<div class="outline-text-4" id="text-12-1-3">
<p>
They work to explain how objects interact with each other; how they can send messages between each of the objects and how you can divide the steps of various tasks up among classes. Describe a flowing process.
</p>
</div>

<ol class="org-ol">
<li><a id="org955dc79"></a>Chain Of Responsibility<br />
<div class="outline-text-5" id="text-12-1-3-1">
<p>
Is an object oriented version of the if &#x2026; else if &#x2026; else if &#x2026;&#x2026;. else &#x2026; endif idiom
</p>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">interface</span> <span style="color: #ECBE7B;">PurchaserInterface</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setNextPurchaser</span>(<span style="color: #ECBE7B;">PurchaserInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">nextPurchaser</span>): <span style="color: #ECBE7B;">void</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">buy</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span>): <span style="color: #ECBE7B;">void</span>;
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">AssociatePurchaser</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">PurchaserInterface</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">PurchaserInterface</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">nextPurchaser</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setNextPurchaser</span>(<span style="color: #ECBE7B;">PurchaserInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">nextPurchaser</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">nextPurchaser</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">nextPurchaser</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">buy</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span> &lt; 100) {
            <span style="color: #51afef;">echo</span>(<span style="color: #98be65;">'Associate purchased'</span>);
            <span style="color: #51afef;">return</span>;
        }

        <span style="color: #51afef;">if</span> (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">nextPurchaser</span>) {
            <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">nextPurchaser</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">buy</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span>);
            <span style="color: #51afef;">return</span>;
        }

        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Associate could not buy'</span>;
    }
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">ManagerPurchaser</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">PurchaserInterface</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">PurchaserInterface</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">nextPurchaser</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setNextPurchaser</span>(<span style="color: #ECBE7B;">PurchaserInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">nextPurchaser</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">nextPurchaser</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">nextPurchaser</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">buy</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span> &lt; 200) {
            <span style="color: #51afef;">echo</span>(<span style="color: #98be65;">'Manager purchased'</span>);
            <span style="color: #51afef;">return</span>;
        }

        <span style="color: #51afef;">if</span>(<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">nextPurchaser</span>) {
            <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">nextPurchaser</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">buy</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span>);
            <span style="color: #51afef;">return</span>;
        }

        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Manager could not buy'</span>;
    }
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">DirectorPurchaser</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">PurchaserInterface</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">PurchaserInterface</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">nextPurchaser</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setNextPurchaser</span>(<span style="color: #ECBE7B;">PurchaserInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">nextPurchaser</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">nextPurchaser</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">nextPurchaser</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">buy</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span> &lt; 300) {
            <span style="color: #51afef;">echo</span>(<span style="color: #98be65;">'Director purchased'</span>);
            <span style="color: #51afef;">return</span>;
        }

        <span style="color: #51afef;">if</span>(<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">nextPurchaser</span>) {
            <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">nextPurchaser</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">buy</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span>);
            <span style="color: #51afef;">return</span>;
        }

        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">'Director could not buy'</span>;
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">ChainOfResponsibilityTest</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">TestCase</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">testOne</span>()
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expectOutputString</span>(<span style="color: #98be65;">'Director purchased'</span>);

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">associate</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">AssociatePurchaser</span>();
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">manager</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">ManagerPurchaser</span>();
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">director</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">DirectorPurchaser</span>();
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">associate</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">setNextPurchaser</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">manager</span>);
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">manager</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">setNextPurchaser</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">director</span>);

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">associate</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">buy</span>(299);
    }
}

</pre>
</div>
</div>
</li>
<li><a id="orgb08ad3c"></a>Observer<br />
<div class="outline-text-5" id="text-12-1-3-2">
<p>
The Observer design pattern essentially allows an object (the subject) to maintain a list of observers that are automatically notified when the state of the that object changes. This pattern applies a one-to-many dependency between objects; there is always one subject that updates many observers. This pattern applies a one-to-many dependency between objects; there is always one subject that updates many observers.
</p>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">User</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">\SplSubject</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">string</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">email</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">\SplObjectStorage</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">observers</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>()
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">observers</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">\SplObjectStorage</span>();
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">attach</span>(<span style="color: #ECBE7B;">\SplObserver</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">observer</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">observers</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">attach</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">observer</span>);
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">detach</span>(<span style="color: #ECBE7B;">\SplObserver</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">observer</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">observers</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">detach</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">observer</span>);
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">changeEmail</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">email</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">email</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">email</span>;
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">notify</span>();
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">notify</span>()
    {
        <span style="color: #83898d;">/** </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">\SplObserver</span><span style="color: #83898d;"> </span><span style="color: #dcaeea;">$</span><span style="color: #dcaeea;">observer</span><span style="color: #83898d;"> */</span>
        <span style="color: #51afef;">foreach</span> (<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">observers</span> <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">observer</span>) {
            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">observer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">update</span>(<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span>);
        }
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">UserObserver</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">\SplObserver</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">User[]</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">changedUsers</span> = [];

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * It is called by the Subject, usually by SplSubject::notify()</span>
<span style="color: #83898d;">     *</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@param</span><span style="color: #83898d;"> </span><span style="color: #98be65;">\SplSubject</span><span style="color: #83898d;"> </span><span style="color: #dcaeea;">$</span><span style="color: #dcaeea;">subject</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">update</span>(<span style="color: #ECBE7B;">\SplSubject</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">subject</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">changedUsers</span>[] = <span style="color: #51afef;">clone</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">subject</span>;
    }

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@return</span><span style="color: #83898d;"> </span><span style="color: #98be65;">User[]</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getChangedUsers</span>(): <span style="color: #ECBE7B;">array</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">changedUsers</span>;
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">ObserverTest</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">TestCase</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">testChangeInUserLeadsToUserObserverBeingNotified</span>()
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">observer</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">UserObserver</span>();

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">User</span>();
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">attach</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">observer</span>);

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">changeEmail</span>(<span style="color: #98be65;">'foo@bar.com'</span>);
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">assertCount</span>(1, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">observer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getChangedUsers</span>());
    }
}
</pre>
</div>
</div>
</li>
<li><a id="org28b69fd"></a>Strategy<br />
<div class="outline-text-5" id="text-12-1-3-3">
<p>
Allow us to alter the behavior of an object at runtime.
We defined a family of algorithms, bound by one common interface
These algorithms are interchangeable; they can be swapped in and out without affecting the client implementation
We encapsulated each algorithm within a class                
</p>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Customer</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">bill</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #98be65;">BillingStrategyInterface</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">strategy</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">BillingStrategyInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">strategy</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">strategy</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">strategy</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setStrategy</span>(<span style="color: #ECBE7B;">BillingStrategyInterface</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">strategy</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">strategy</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">strategy</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">addBeer</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span>): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">bill</span> += <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">strategy</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getPrice</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">price</span>);
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">printBill</span>(): <span style="color: #ECBE7B;">void</span>
    {
        <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Total: </span><span style="color: #dcaeea;">$this</span><span style="color: #98be65;">-&gt;bill"</span>;
    }
}

<span style="color: #51afef;">interface</span> <span style="color: #ECBE7B;">BillingStrategyInterface</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getPrice</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">rawPrice</span>): <span style="color: #ECBE7B;">float</span>;
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">NormalStrategy</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">BillingStrategyInterface</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getPrice</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">rawPrice</span>): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">rawPrice</span>;
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">HappyHourStrategy</span> <span style="color: #51afef;">implements</span> <span style="color: #ECBE7B;">BillingStrategyInterface</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getPrice</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">rawPrice</span>): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">rawPrice</span> * 0.5;
    }
}

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">StrategyTest</span> <span style="color: #51afef;">extends</span> <span style="color: #ECBE7B;">TestCase</span>
{
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">testOne</span>()
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">expectOutputString</span>(<span style="color: #98be65;">'Total: 15'</span>);

        <span style="color: #5B6268;">//</span><span style="color: #5B6268;">Normal billing</span>
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Customer</span>(<span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">NormalStrategy</span>());
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">addBeer</span>(10);

        <span style="color: #5B6268;">//</span><span style="color: #5B6268;">Start Happy Hour</span>
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">setStrategy</span>(<span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">HappyHourStrategy</span>());
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">addBeer</span>(10);

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">customer</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">printBill</span>();
    }
}
</pre>
</div>
</div>
</li>
<li><a id="orgdf4f2da"></a>Command<br />
<div class="outline-text-5" id="text-12-1-3-4">
<p>
Command objects encapsulate an action and its parameters. We have an Invoker and a Receiver
</p>
</div>
</li>
<li><a id="org660c5b0"></a>Iterator<br />
<div class="outline-text-5" id="text-12-1-3-5">
<p>
Iterators are used to access the elements of an aggregate object sequentially without exposing its underlying representation
</p>
</div>
</li>
<li><a id="org154b836"></a>Interpreter<br />
<div class="outline-text-5" id="text-12-1-3-6">
<p>
GOF
</p>
</div>
<ol class="org-ol">
<li><a id="org109609a"></a>Query Builder<br /></li>
</ol>
</li>

<li><a id="org3296dde"></a>Null Object<br />
<div class="outline-text-5" id="text-12-1-3-7">
<p>
Designed to act as a default value of an object
</p>
</div>
</li>
<li><a id="orgb135297"></a>Template method:<br />
<div class="outline-text-5" id="text-12-1-3-8">
<p>
Describes the program skeleton of a program
</p>
</div>
</li>
<li><a id="org7dd3438"></a>State<br />
<div class="outline-text-5" id="text-12-1-3-9">
<p>
<a href="https://stitcher.io/blog/laravel-beyond-crud-05-states">https://stitcher.io/blog/laravel-beyond-crud-05-states</a>
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org51a5bc3" class="outline-4">
<h4 id="org51a5bc3"><span class="section-number-4">12.1.4</span> Concurrency</h4>
</div>
</div>

<div id="outline-container-org6dcdf67" class="outline-3">
<h3 id="org6dcdf67"><span class="section-number-3">12.2</span> Architectural patterns</h3>
<div class="outline-text-3" id="text-12-2">
<p>
   This is not strictly a design pattern (but the Gang of Four didn't cover Architectural patterns
in their book); but it is incredibly relevant for PHP developers due to the web-oriented
nature of PHP. Architectural patterns address various different constraints in computer
systems through addressing performance limitations, high availability, and also
minimization of business risk.
Most developers will be familiar with the Model-View-Controller architecture when it
comes to web frameworks, more recently other architectures have started to emerge; for
example, a microservices architecture works by a set of RESTful APIs that are independent
and interconnected. Some people believe microservices move problems from the software
development layer to the systems architecture layer. The opposite of microservices often
referred to as a monolithic architecture, is where all the code is together in one application.
</p>
</div>
<div id="outline-container-org9d7c4e6" class="outline-4">
<h4 id="org9d7c4e6"><span class="section-number-4">12.2.1</span> Active Record</h4>
<div class="outline-text-4" id="text-12-2-1">
<p>
Problem: Accessing data in a database
prevent duplication &amp; centralize access
don't have to add any properties to class, just add new column to table
objects are tightly coupled to the database schema - hard to test without actually using database
breaking SOLID's Single Responsibility Principle - object is responsible for knowing how to create, retrieve, update and delete database entry
</p>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef; font-weight: bold;">&lt;?php</span> <span style="color: #51afef;">declare</span>(<span style="color: #51afef;">strict_types</span>=1);

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">User</span>
{

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">int</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">id</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">string</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getId</span>(): <span style="color: #ECBE7B;">int</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">id</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setId</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">id</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">id</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">id</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getName</span>(): <span style="color: #ECBE7B;">string</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">name</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">setName</span>(<span style="color: #ECBE7B;">string</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">name</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>;
    }

}

<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">id</span> = 1;
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">pdo</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">PDO</span>(<span style="color: #98be65;">'sqlite:test.db'</span>);
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sth</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">pdo</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">prepare</span>(<span style="color: #98be65;">"SELECT * FROM user WHERE id =:id"</span>);
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sth</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">bindParam</span>(<span style="color: #98be65;">":id"</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">id</span>, <span style="color: #a9a1e1;">PDO</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">PARAM_INT</span>);
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sth</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">execute</span>();
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sth</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">fetch</span>(<span style="color: #a9a1e1;">PDO</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">FETCH_ASSOC</span>);
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">User</span>();
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">SetId</span>((<span style="color: #ECBE7B;">int</span>) <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'id'</span>]);
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">SetName</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'name'</span>]);
</pre>
</div>


<p>
cons: hardcoded columns name, every time we add new column to database we have to manually add it in code in multiple places, hard to maintain,
</p>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef; font-weight: bold;">&lt;?php</span> <span style="color: #51afef;">declare</span>(<span style="color: #51afef;">strict_types</span>=1);

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">User</span>
{
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">pdo</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">PDO</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">pdo</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">pdo</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">pdo</span>;
    }
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">load</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">id</span>)
    {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sth</span> = <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">pdo</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">prepare</span>(<span style="color: #98be65;">"SELECT * FROM user WHERE id =:id"</span>);

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sth</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">bindParam</span>(<span style="color: #98be65;">":id"</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">id</span>, <span style="color: #a9a1e1;">PDO</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">PARAM_INT</span>);
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sth</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">execute</span>();
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sth</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">fetch</span>(<span style="color: #a9a1e1;">PDO</span><span style="color: #bbc2cf; background-color: #282c34;">::</span><span style="color: #a9a1e1;">FETCH_ASSOC</span>);

        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span> = 0;
        <span style="color: #51afef;">foreach</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span> <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">column</span> =&gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">value</span>) {

            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">meta</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">sth</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">getColumnMeta</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span>);

            <span style="color: #51afef;">if</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">meta</span>[<span style="color: #98be65;">'sqlite:decl_type'</span>] === <span style="color: #98be65;">'INTEGER'</span>)
            {
                <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span>-&gt;<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">column</span> = (<span style="color: #ECBE7B;">int</span>) <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">value</span>;
            }<span style="color: #51afef;">else</span>{
                <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span>-&gt;<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">column</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">value</span>;
            }

            <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span>++;
        }
    }
}

<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">pdo</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">PDO</span>(<span style="color: #98be65;">'sqlite:test.db'</span>);
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">User</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">pdo</span>);
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">user</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">load</span>(1);
</pre>
</div>


<p>
pros: you don’t have to specify the properties of the object and how they relate to the database. The model is able to determine the properties automatically by looking at the schema of the database.
</p>
</div>
</div>
<div id="outline-container-org3fb54b5" class="outline-4">
<h4 id="org3fb54b5"><span class="section-number-4">12.2.2</span> Data Transfer Object DTO</h4>
<div class="outline-text-4" id="text-12-2-2">
<p>
"a class with public variables and no functions" clean code p. 100. 
But in PHP we still can't declare type of variable, just type-hint parameters of methods. Like setters, so we can do it indirectly. Another great benefit it the standard rule is to not have public properties so we can stay consisten with this one. But more of great adventage of if we can make our DTO object immutable. So create only getters, without setters. Add all in constructor.
</p>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">IssResponse</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">latitude</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">     * </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">     */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">longitude</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">array</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">array</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">latitude</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">array</span>[<span style="color: #98be65;">'latitude'</span>];
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">longitude</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">array</span>[<span style="color: #98be65;">'longitude'</span>];
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getLatitude</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">latitude</span>;
    }


    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getLongitude</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">longitude</span>;
    }

}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">PositionDTO</span>
{
    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">       </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">    */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">latitude</span>;

    <span style="color: #83898d;">/**</span>
<span style="color: #83898d;">       </span><span style="color: #a9a1e1;">@var</span><span style="color: #83898d;"> </span><span style="color: #ECBE7B;">float</span>
<span style="color: #83898d;">    */</span>
    <span style="color: #51afef;">private</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">longitude</span>;

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__construct</span>(<span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">latitude</span>, <span style="color: #ECBE7B;">float</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">longitude</span>)
    {
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">latitude</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">latitude</span>;
        <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">longitude</span> = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">longitude</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getLatitude</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">latitude</span>;
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getLongitude</span>(): <span style="color: #ECBE7B;">float</span>
    {
        <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #dcaeea;">longitude</span>;
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org9be1f59" class="outline-4">
<h4 id="org9be1f59"><span class="section-number-4">12.2.3</span> ADR</h4>
<div class="outline-text-4" id="text-12-2-3">
<p>
<a href="http://martinbean.co.uk/blog/2016/10/20/implementing-adr-in-laravel/">http://martinbean.co.uk/blog/2016/10/20/implementing-adr-in-laravel/</a>
</p>
</div>
</div>

<div id="outline-container-orgc6d6ef6" class="outline-4">
<h4 id="orgc6d6ef6"><span class="section-number-4">12.2.4</span> MVC</h4>
<div class="outline-text-4" id="text-12-2-4">
</div>
<ol class="org-ol">
<li><a id="orge6208f1"></a>Controllers<br />
<ol class="org-ol">
<li><a id="orged67c03"></a>are what the user interacts with<br /></li>
<li><a id="orgb4e83e6"></a>they receive a request from the user, decide what to do, and send request back<br /></li>
<li><a id="org26b4b39"></a>it's the only component that interacts with the models<br /></li>
</ol>
</li>
<li><a id="org75f9683"></a>Models<br />
<ol class="org-ol">
<li><a id="orge76aed1"></a>classes that are designed to work with information in your database<br /></li>
<li><a id="orgb281815"></a>are where an anpplication's data are stored<br /></li>
<li><a id="org1ab86ac"></a>responsible for storing and retrieving data<br /></li>
<li><a id="org84def00"></a>know nothing about the user interface<br /></li>
</ol>
</li>
<li><a id="org3a4a9ff"></a>Views<br />
<ol class="org-ol">
<li><a id="orgd462e4c"></a>are what the user sees on the screen<br /></li>
<li><a id="org6adba31"></a>they present the data to the user<br /></li>
<li><a id="org20a0f8b"></a>kno nothing about the models<br /></li>
</ol>
</li>
<li><a id="org7aa2495"></a>Why use MVC?<br />
<ol class="org-ol">
<li><a id="org13124f9"></a>business logic separate from presentation: Separation Of Concerns<br /></li>
<li><a id="org9b6d102"></a>developer specialisation<br />
<ol class="org-ol">
<li><a id="orgb4f36dc"></a>designers can focus on the front end without worrying about the business logic<br /></li>
<li><a id="org86bdde8"></a>developers of the models can focus on the business logic or back end without worrying about the look and feel<br /></li>
</ol>
</li>
</ol>
</li>
<li><a id="org4c02403"></a>Front controller<br />
<ol class="org-ol">
<li><a id="org0c5c6e3"></a>provide a central entry point for all request. All request are sent through one page<br /></li>
</ol>
</li>

<li><a id="org55951f6"></a>Action suffix<br />
<ol class="org-ol">
<li><a id="orge7ff3bb"></a>_call is exectued for a non-existent or non-public method call<br /></li>
<li><a id="org4a7b2fa"></a>Stack<br />
<div class="outline-text-6" id="text-12-2-4-6-2">
<p>
   No it wasn't just a naming convention. It was used to execute some code before or after every controller 'action' method. Like checking is user has logged in. 
It is based on magic _<sub>call</sub> function which is executed for a non-existent or non-public method call.
</p>
<div class="org-src-container">
<pre class="src src-php">
  <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">controller</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">Posts</span>();
  <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">controller</span><span style="color: #bbc2cf; background-color: #282c34;">-&gt;</span><span style="color: #bbc2cf; background-color: #282c34;">index</span>();

  <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Posts</span>
  {
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">__call</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">args</span>)
  {
  <span style="color: #5B6268;">//</span><span style="color: #5B6268;">run code before</span>
  call_user_func_array()[<span style="color: #a9a1e1;">$</span><span style="color: #a9a1e1;">this</span>, <span style="color: #98be65;">"</span><span style="color: #dcaeea;">$nameAction</span><span style="color: #98be65;">"</span>], <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">args</span>);
  <span style="color: #5B6268;">//</span><span style="color: #5B6268;">run code after</span>
  }
    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">indexAction</span>()
  {
  }
  }
</pre>
</div>


<p>
tutorial ended on 31 video
</p>
</div>
</li>
</ol>
</li>
</ol>
</div>
<div id="outline-container-org3c9b0b7" class="outline-4">
<h4 id="org3c9b0b7"><span class="section-number-4">12.2.5</span> MVVM</h4>
<div class="outline-text-4" id="text-12-2-5">
<p>
Magento was here.
</p>
</div>
</div>
</div>
<div id="outline-container-org3801f1e" class="outline-3">
<h3 id="org3801f1e"><span class="section-number-3">12.3</span> Antipatterns</h3>
<div class="outline-text-3" id="text-12-3">
</div>
<div id="outline-container-org8bb6818" class="outline-4">
<h4 id="org8bb6818"><span class="section-number-4">12.3.1</span> God objects</h4>
<div class="outline-text-4" id="text-12-3-1">
<p>
Essentially, a God object is an object with either too many methods or too many properties;
essentially, it's a class that knows too much or does too much. The God object soon becomes
tightly coupled to (referenced by) lots of other bits of code in the application.
So what's actually wrong with this? Well, in short, when you have one bit of code tied into
every single other bit of code, you quickly find a maintenance disaster. If you adjust the
logic for a method in a God object for one use case, you might find it having unintended
consequences for another element.
</p>

<p>
The flip side to God objects being an anti-pattern is when developing embedded systems.
Embedded systems are used to process data on anything from a calculator to LED signage;
they are small chips that are essentially self-contained computers and quite low cost. In this
use case, with restricted computational power you can often find that programming
elegance and maintainability become peripheral concerns. Slight performance increase and
centralization of control can be more important, meaning using God objects can be
somewhat sensible. Fortunately, PHP is incredibly seldom used to program embedded
systems, so you are incredibly unlikely to find yourself in this particular situation.
</p>

<p>
Another anti-pattern, called Fear of Adding Classes,
</p>
</div>
</div>
<div id="outline-container-orgad84b7e" class="outline-4">
<h4 id="orgad84b7e"><span class="section-number-4">12.3.2</span> Singleton</h4>
<div class="outline-text-4" id="text-12-3-2">
<p>
&lt;?php
class{
Singleton
private static $instance;
public static function getInstance()
{
if (null <code>=</code> static::$instance) {
static::$instance = new static();
}
}
return static::$instance;
protected function _<sub>construct</sub>()
{
}
private function _<sub>clone</sub>()
{
}
private function _<sub>wakeup</sub>()
{
}
}
</p>

<p>
So here are the reasons why this should be avoided:
They are inherently tightly coupled meaning they are difficult to test, for example
using unit tests. They even maintain their state throughout the life cycle of the
application.
They violate the Single Responsibility Principle by controlling their own creation
and life cycle.
Fundamentally, it results in you hiding the dependencies of your application in a
global instance. You can no longer effectively follow your dependencies around
your code as you can't follow where they are injected as function arguments.
They make it ineffective to find the dependency chain should you need to
analyze it.
</p>


<p>
 Objects should typically be self-contained; they should
only know problems about themselves and also should only solve one set of problems, its
own problems. Anything that isn't relevant to this aim doesn't belong in that class.
</p>
</div>
</div>

<div id="outline-container-org71d9175" class="outline-4">
<h4 id="org71d9175"><span class="section-number-4">12.3.3</span> Database as IPC</h4>
<div class="outline-text-4" id="text-12-3-3">
<p>
<a href="https://blog.engineyard.com/5-subtle-ways-youre-using-mysql-as-a-queue-and-why-itll-bite-you">https://blog.engineyard.com/5-subtle-ways-youre-using-mysql-as-a-queue-and-why-itll-bite-you</a>
 Let me clear this up for you; your database isn't a message queuing system. You don't use it
 schedule jobs or queue up tasks to be completed. If you need something to do that, use a
 queuing system. Your database is for data&#x2026;the clue is in the name; don't shove temporary
 messages in there.
 There are many reasons why this is a bad idea. One major issue is the fact that in databases
 there is no real way to not enforce a policy by which you can guarantee that a double-read
 will not occur, and that is by utilizing row locks. This in turn, results in processes (either
 incoming out outgoing) being blocked, which in turn results in processing only being able
 to be done in a serial fashion.
 Furthermore, in order to check if there is any work to do you end up essentially counting
 the rows of data in the database to see if there is work to do; you run this on a continuous
 basis. MySQL doesn't support push notifications; unlike PostgreSQL it doesn't have the
 NOTIFY command to pair with a LISTEN channel.
 Also note that when you merge a job queue with a database table that stores real data, you
 also invalidate the cache every time you complete a job and update a flag, in turn making
 MySQL far slower.
 In short, it results in your database performing worse and can force it to slow critical
 messages to a standstill. You must be careful not to turn your database into a job queue by
 having this functionality sneak up on you; instead, use the database exclusively for data,
 and bear this in mind when extending your database.
 RabbitMQ provides an open source queuing system with some great PHP SDKs.
</p>

<p>
Interface Bloat
Interfaces shouldn't contain thousands of methods that reference internal operations of the
class. They should be lightweight and considered a way of guaranteeing that when
something is queried that it is definitely there.
</p>

<p>
Interfaces should be used sparingly; do you actually need an interface if the class is only
ever going to be implemented once and once alone (and realistically, no one is never going
to need to tamper with such code?). If so, you might want to consider avoiding an interface
in such a situation.
</p>

<p>
So, let me draw you to one implementation of Interface Bloat. Let's take a look at the
Pheanstalk interface class in the Pheanstalk open source library (note I have stripped the
comments to make it more readable):
&lt;?php
namespace Pheanstalk;
interface PheanstalkInterface
{
const DEFAULT<sub>PORT</sub> = 11300;
const DEFAULT<sub>DELAY</sub> = 0;
const DEFAULT<sub>PRIORITY</sub> = 1024;
const DEFAULT<sub>TTR</sub> = 60;
const DEFAULT<sub>TUBE</sub> = 'default';
public function setConnection(Connection $connection);
public function getConnection();
public function bury($job, $priority = self::DEFAULT<sub>PRIORITY</sub>);
public function delete($job);
[ 49 ]
Anti-Patterns
public function ignore($tube);
public function kick($max);
public function kickJob($job);
public function listTubes();
public function listTubesWatched($askServer = false);
public function listTubeUsed($askServer = false);
public function pauseTube($tube, $delay);
public function resumeTube($tube);
public function peek($jobId);
public function peekReady($tube = null);
public function peekDelayed($tube = null);
public function peekBuried($tube = null);
public function put($data, $priority = self::DEFAULT<sub>PRIORITY</sub>, $delay =
self::DEFAULT<sub>DELAY</sub>, $ttr = self::DEFAULT<sub>TTR</sub>);
public function putInTube($tube, $data, $priority =
self::DEFAULT<sub>PRIORITY</sub>, $delay = self::DEFAULT<sub>DELAY</sub>, $ttr =
self::DEFAULT<sub>TTR</sub>);
public function release($job, $priority = self::DEFAULT<sub>PRIORITY</sub>,
$delay = self::DEFAULT<sub>DELAY</sub>);
public function reserve($timeout = null);
public function reserveFromTube($tube, $timeout = null);
public function statsJob($job);
public function statsTube($tube);
public function stats();
public function touch($job);
public function useTube($tube);
public function watch($tube);
public function watchOnly($tube);
}
Yuck! Notice how even constants have been put in the implement, the one thing you might
actually want to change. Clearly, this is an interface for a class that can only be
implemented one way, making the Interface useless.
</p>


<p>
Bloated optimization
Often, developers may trip over themselves trying to optimize their code or their design
artifacts to a ridiculous extent, often before their code even performs basic functions, or
even before any code has been created at all. This can rapidly perform issues in production.
In this section, I wish to discuss three anti-patterns specifically relating to this topic:
Analysis paralysis
Bikeshedding
Premature optimization
[ 62 ]
Anti-Patterns
Analysis paralysis
In short, this is where a strategy is over-analyzed to the point where progress is slowed
down, or even stopped entirely in extreme cases. Not only can such solutions become
obsolete rapidly, they can be made in under-educated circumstances, for example, in a
meeting where an over-analytic boss tries to dig too deep into detail in advance without
allowing their developers to actually do some research.
Over-analyzing a problem and seeking a perfect solution upfront just does not work;
programmers should seek to refine their solution, not come up with the refined solution up
front.
Bikeshedding
Essentially, this is where analysis paralysis can occur on the basis of some very trivial
decisions, for example, the color of a log in page. The only fix that's required is to not waste
time on trivial decisions. Avoid design by committee where possible as the majority of
people, regardless of how good they think their design skills are, are largely incompetent at
design.
Premature optimization
In this section, so far, I've largely beaten up project managers; no time to beat up
developers. Often, developers will seek to optimize their code prematurely without having
educated data-led conclusions to drive where and when optimizations should be made.
Writing clean and readable code is your first priority; then you can use some great profiling
tools to determine where your bottlenecks are. XDebug and New Relic are just some of the
tools that are good at this.
That said, there are some cases where optimization must be done, particularly on some long
computational tasks where it can be mission-critical to reduce something from O(N2) time
to O(N). This said, most simple PHP web apps will have no real need to use this
consideration.
</p>
</div>
</div>
<div id="outline-container-orgb324d8e" class="outline-4">
<h4 id="orgb324d8e"><span class="section-number-4">12.3.4</span> Is storing types in the database an anti pattern?</h4>
<div class="outline-text-4" id="text-12-3-4">
<p>
You're then binding the type name to outside data, limiting your refactoring capabilities and making people change stuff in two places when they make a new class.
<a href="https://stackoverflow.com/questions/336958/how-bad-is-it-to-store-class-and-assembly-names-in-the-database">https://stackoverflow.com/questions/336958/how-bad-is-it-to-store-class-and-assembly-names-in-the-database</a>
My hesitation over doing this is that I think it introduces a higher degree of coupling between the layers.
</p>
</div>
</div>
</div>
<div id="outline-container-orgfea7355" class="outline-3">
<h3 id="orgfea7355"><span class="section-number-3">12.4</span> Links</h3>
<div class="outline-text-3" id="text-12-4">
<ul class="org-ul">
<li><a href="https://designpatternsphp.readthedocs.io/en/latest/">https://designpatternsphp.readthedocs.io/en/latest/</a></li>
<li><a href="https://blog.pragmaticengineer.com/software-architecture-is-overrated/">Software Architecture is Overrated, Clear and Simple Design is Underrated</a></li>
<li><a href="http://www.wmrichards.com/">http://www.wmrichards.com/</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgbd02445" class="outline-3">
<h3 id="orgbd02445"><span class="section-number-3">12.5</span> Is it a pattern?</h3>
<div class="outline-text-3" id="text-12-5">
</div>
<div id="outline-container-org3912254" class="outline-4">
<h4 id="org3912254"><span class="section-number-4">12.5.1</span> Cache</h4>
<div class="outline-text-4" id="text-12-5-1">
<p>
<a href="https://coderwall.com/p/ry1y0a/improve-doctrine-performance-up-to-100-on-your-symfony2-project">https://coderwall.com/p/ry1y0a/improve-doctrine-performance-up-to-100-on-your-symfony2-project</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgf84001a" class="outline-3">
<h3 id="orgf84001a"><span class="section-number-3">12.6</span> Enum</h3>
<div class="outline-text-3" id="text-12-6">
<p>
<a href="https://stitcher.io/blog/php-enums">https://stitcher.io/blog/php-enums</a>
composer require myclabs/php-enum
</p>
</div>
</div>
<div id="outline-container-orga0c1549" class="outline-3">
<h3 id="orga0c1549"><span class="section-number-3">12.7</span> Errors</h3>
<div class="outline-text-3" id="text-12-7">
<p>
<a href="https://kevinsmith.io/a-better-way-to-handle-validation-errors">A Better Way to Handle Validation Errors</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgb782b12" class="outline-2">
<h2 id="orgb782b12"><span class="section-number-2">13</span> Tests</h2>
<div class="outline-text-2" id="text-13">
</div>
<div id="outline-container-org767a0fa" class="outline-3">
<h3 id="org767a0fa"><span class="section-number-3">13.1</span> Fixtures</h3>
<div class="outline-text-3" id="text-13-1">
<ol class="org-ol">
<li><a href="http://blog.codeleak.pl/2014/06/test-data-builders-and-object-mother.html">http://blog.codeleak.pl/2014/06/test-data-builders-and-object-mother.html</a></li>
<li><a href="https://davedevelopment.co.uk/2015/01/28/test-data-builders.html">https://davedevelopment.co.uk/2015/01/28/test-data-builders.html</a></li>
<li><a href="http://blog.code4hire.com/2017/07/loading-sql-sequentially-with-doctrine-fixtures-in-symfony-project/">Loading SQL sequentially with doctrine fixtures in Symfony project</a></li>
</ol>
</div>
</div>
<div id="outline-container-org68c033a" class="outline-3">
<h3 id="org68c033a"><span class="section-number-3">13.2</span> Links</h3>
<div class="outline-text-3" id="text-13-2">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=_LeCyU1X5bY">Anna Filina - Test Doubles with PHPUnit</a></li>
<li><a href="https://afilina.com/testing-legacy-php-scripts">Anna Filina - Testing Legacy PHP Scripts</a></li>
<li><a href="http://martinsson-johan.blogspot.ro/2014/01/golden-master-and-legacy-few-insights.html">Golden Master and legacy - a few insights</a></li>
<li><a href="https://logansbailey.com/ramsey-uuid-and-unit-tests">Ramsey UUID and Unit Tests</a></li>
</ul>
</div>
</div>
<div id="outline-container-org2a565ae" class="outline-3">
<h3 id="org2a565ae"><span class="section-number-3">13.3</span> TDD</h3>
<div class="outline-text-3" id="text-13-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Tests</th>
<th scope="col" class="org-left">Focus on</th>
<th scope="col" class="org-left">Require</th>
<th scope="col" class="org-left">Speed</th>
<th scope="col" class="org-left">Complexity</th>
<th scope="col" class="org-left">Setup Needed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Unit Tests</td>
<td class="org-left">a class/method</td>
<td class="org-left">the source code</td>
<td class="org-left">very fast</td>
<td class="org-left">low</td>
<td class="org-left">no</td>
</tr>

<tr>
<td class="org-left">Integration Tests</td>
<td class="org-left">a component/service</td>
<td class="org-left">part of the running system</td>
<td class="org-left">slow</td>
<td class="org-left">medium</td>
<td class="org-left">yes</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org33440b5" class="outline-3">
<h3 id="org33440b5"><span class="section-number-3">13.4</span> Behat</h3>
<div class="outline-text-3" id="text-13-4">
</div>
<div id="outline-container-org7fba2c2" class="outline-4">
<h4 id="org7fba2c2"><span class="section-number-4">13.4.1</span> install</h4>
<div class="outline-text-4" id="text-13-4-1">
<p>
behat/mink-extension
</p>
</div>
</div>
<div id="outline-container-org56acc67" class="outline-4">
<h4 id="org56acc67"><span class="section-number-4">13.4.2</span> config</h4>
<div class="outline-text-4" id="text-13-4-2">
<p>
base<sub>url</sub>: 'http://localhost' Remember that have to be with <a href="http://">http://</a> 
</p>
</div>
</div>
</div>
<div id="outline-container-org53ebbfa" class="outline-3">
<h3 id="org53ebbfa"><span class="section-number-3">13.5</span> Notes</h3>
<div class="outline-text-3" id="text-13-5">
<p>
There are numerous benefits to writing unit tests; they help with regression, provide documentation, and facilitate good design. 
</p>

<p>
Two Approach
Test First 
Test After
</p>

<p>
Test doubles are tools you can use when you need to create substitute dependencies]
</p>

<p>
Legacy codebases are not ready for isolated unit tests.
</p>

<p>
ARRANGE-ACT-ASSERT
a pattern for arranging and formatting code in UnitTest methods:
Each method should group these functional sections, separated by blank lines:
Arrange all necessary preconditions and inputs.
Act on the object or method under test.
Assert that the expected results have occurred.
</p>

<p>
'bit by bit you rewrite your code to be testable'
</p>

<p>
A double is a substitue for a real dependency
</p>

<p>
Assertions base test - most framework
</p>

<p>
dummies, spies, stubs, mocks, fakes
</p>

<p>
dummies - a stand-in for a dependency when class signatures or functionality don't matter, like PHP stdObject - but fail on type hints :/
stubs - substitue for a dependency and it matches the class signature, use stubs if you use type hints
mocks - a stub that uses the framework tools - most common
</p>

<p>
fakes - dependency built without the use of framework tools
</p>

<p>
feedback loop
</p>

<p>
'your decision to not build systems to catch mistakes will cost you more money
</p>

<p>
Chris???
</p>

<p>
<a href="https://github.com/opencfp/opencfp">https://github.com/opencfp/opencfp</a>
</p>

<p>
Dependencies that you are unable to set at runtime can cause a problem -&gt;
</p>

<p>
What to test ?
Critical Functionality - First the most valuable parts - like register form if it ncessary.
Bug Fixes - Every Bug that was found.
New Features - New Functionality
</p>

<p>
<a href="https://github.com/kahlan/kahlan">https://github.com/kahlan/kahlan</a>
</p>

<ul class="org-ul">
<li>use real dependencies when you can</li>
<li>when you can't use real dependencies, try test doubles</li>
<li>if you have significant amounts of code that would be burdensome to refactor, consider monkey patching</li>
<li>keep doubles in sync with real dependencies</li>
</ul>


<p>
Manual or Automate Testing
</p>

<p>
-avoid regressions
</p>

<p>
Permutations != Execution Paths - you only nee to write a test case for each execution path, not for each permutation.
The number of possible paths grows with each new decision branch.
</p>

<p>
<a href="https://www.brandonsavage.net/dont-write-useless-unit-tests/">https://www.brandonsavage.net/dont-write-useless-unit-tests/</a>
</p>

<p>
<a href="http://www.ifdattic.com/mock-test-double-using-prophecy/">http://www.ifdattic.com/mock-test-double-using-prophecy/</a>
</p>

<p>
<a href="http://stakeholderwhisperer.com/posts/2015/1/economy-of-tests">http://stakeholderwhisperer.com/posts/2015/1/economy-of-tests</a>
</p>

<p>
First, create the test.
Second, write the minimum amount of code to get that test to pass.
And third, now that your tests are passing, you can safely refactor your code to make it fancier.
</p>

<p>
Test. Code. Refactor.
</p>

<p>
You should write the tests first and then write your code.
</p>

<p>
unit - test one specific method on a class. Fake any needed database connections. One class in complete isolation.
</p>

<p>
integration - just like a unit test. Except it uses the real database connection.
</p>

<p>
functional - write a test to command a browser. Browser surfs your site, clicks links, fills out forms &amp; asserts things is sees on the page. Testing the interface that users actually use!
</p>


<p>
Mock services. But don't mock simple model objects.
</p>

<p>
Let me say it a different way: if you're organizing your code well, then all classes will fall into one of two types. The first type - a model class - is a class whose job is basically to hold data&#x2026; but not do much work. Our entities are model classes. The second type - a service class - is a class whose main job is to do work, but it doesn't hold much data, other than maybe some configuration. DinosaurFactory is a service class.
</p>

<p>
As a rule, you will want to mock service classes, but you do not need to mock model classes. Why not? Well, you can&#x2026; but usually it's overkill. Since model classes tend to be simple and just hold data, it's easy enough to create those objects and set their data to whatever you want.
</p>

<p>
<a href="https://github.com/humbug/humbug">https://github.com/humbug/humbug</a>
</p>

<p>
<a href="https://github.com/beberlei/assert">https://github.com/beberlei/assert</a>
</p>

<p>
You need tests; yes, automated tests can be slow to write, but they are crucial for ensuring
things don't break when you rewrite or refactor them.
</p>

<p>
Isoloate One Method
</p>

<p>
Pinpointing the problem
</p>
</div>
</div>

<div id="outline-container-org1e80568" class="outline-3">
<h3 id="org1e80568"><span class="section-number-3">13.6</span> naming</h3>
<div class="outline-text-3" id="text-13-6">
<p>
<a href="https://www.petrikainulainen.net/programming/testing/writing-clean-tests-naming-matters/">https://www.petrikainulainen.net/programming/testing/writing-clean-tests-naming-matters/</a>
<a href="https://docs.microsoft.com/en-us/dotnet/core/testing/unit-testing-best-practices">https://docs.microsoft.com/en-us/dotnet/core/testing/unit-testing-best-practices</a>
</p>
</div>
</div>
<div id="outline-container-org05efc32" class="outline-3">
<h3 id="org05efc32"><span class="section-number-3">13.7</span> anitpatterns</h3>
<div class="outline-text-3" id="text-13-7">
<p>
<a href="http://blog.codepipes.com/testing/software-testing-antipatterns.html">http://blog.codepipes.com/testing/software-testing-antipatterns.html</a>
</p>
</div>
</div>
<div id="outline-container-org3834dd7" class="outline-3">
<h3 id="org3834dd7"><span class="section-number-3">13.8</span> Why?</h3>
<div class="outline-text-3" id="text-13-8">
</div>
<div id="outline-container-orgf25bc66" class="outline-4">
<h4 id="orgf25bc66"><span class="section-number-4">13.8.1</span> Less coupled code</h4>
<div class="outline-text-4" id="text-13-8-1">
<p>
When code is tightly coupled, it can be difficult to unit test. Without creating unit tests for the code that you're writing, coupling may be less apparent.
Writing tests for your code will naturally decouple your code, because it would be more difficult to test otherwise.
</p>
</div>
</div>
</div>
<div id="outline-container-org54373de" class="outline-3">
<h3 id="org54373de"><span class="section-number-3">13.9</span> PHPUnit</h3>
<div class="outline-text-3" id="text-13-9">
<p>
$this-&gt;getMockBuilder(Object:class)
-&gt;setMethodExcept(['someMethod'])
-&gt;getMock();
<a href="https://devstyle.pl/2013/04/22/testy-jednostkowe-materialy-do-nauki/">https://devstyle.pl/2013/04/22/testy-jednostkowe-materialy-do-nauki/</a>
</p>
</div>
<div id="outline-container-org7b5ca5a" class="outline-4">
<h4 id="org7b5ca5a"><span class="section-number-4">13.9.1</span> xdebug</h4>
<div class="outline-text-4" id="text-13-9-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">private</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">getDebugQuery</span>()
{
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">debuggingQuerystring</span> = <span style="color: #98be65;">''</span>;
    <span style="color: #51afef;">if</span> (<span style="color: #51afef;">isset</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">_GET</span>[<span style="color: #98be65;">'XDEBUG_SESSION_START'</span>])) { <span style="color: #5B6268;">// </span><span style="color: #5B6268;">xdebug</span>
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">debuggingQuerystring</span> = <span style="color: #98be65;">'XDEBUG_SESSION_START='</span> . <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">_GET</span>[<span style="color: #98be65;">'XDEBUG_SESSION_START'</span>];
    }
    <span style="color: #51afef;">if</span> (<span style="color: #51afef;">isset</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">_COOKIE</span>[<span style="color: #98be65;">'XDEBUG_SESSION'</span>])) { <span style="color: #5B6268;">// </span><span style="color: #5B6268;">xdebug (cookie)</span>
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">debuggingQuerystring</span> = <span style="color: #98be65;">'XDEBUG_SESSION_START=PHPSTORM'</span>;
    }
    <span style="color: #51afef;">if</span> (<span style="color: #51afef;">isset</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">_GET</span>[<span style="color: #98be65;">'start_debug'</span>])) { <span style="color: #5B6268;">// </span><span style="color: #5B6268;">zend debugger</span>
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">debuggingQuerystring</span> = <span style="color: #98be65;">'start_debug='</span> . <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">_GET</span>[<span style="color: #98be65;">'start_debug'</span>];
    }
    <span style="color: #51afef;">if</span> (<span style="color: #51afef;">empty</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">debuggingQuerystring</span>)) {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">debuggingQuerystring</span> = <span style="color: #98be65;">'XDEBUG_SESSION_START=PHPSTORM'</span>;
    }

    <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">debuggingQuerystring</span>;
}
</pre>
</div>

<p>
php -dxdebug.remote<sub>enable</sub>=1 -dxdebug.remote<sub>autostart</sub>=1 &#x2013;stop-on-failure vendor/bin/phpunit &#x2013;colors=always
</p>
</div>
</div>
<div id="outline-container-org4083bf3" class="outline-4">
<h4 id="org4083bf3"><span class="section-number-4">13.9.2</span> install</h4>
</div>




<div id="outline-container-orgef6a526" class="outline-4">
<h4 id="orgef6a526"><span class="section-number-4">13.9.3</span> naming</h4>
<div class="outline-text-4" id="text-13-9-3">
<p>
<a href="https://dzone.com/articles/7-popular-unit-test-naming">https://dzone.com/articles/7-popular-unit-test-naming</a>
</p>
</div>
<ol class="org-ol">
<li><a id="orge9ca2ce"></a>MethodName<sub>StateUnderTest</sub><sub>ExpectedBehavior</sub><br />
<ol class="org-ol">
<li><a id="orga252bc8"></a>MethodName - method name that being tested<br /></li>
<li><a id="org48dd469"></a>StateUnderTest - input value<br /></li>
<li><a id="orgcc2d59a"></a>ExpectedBehaviour - what methods returns for specified input<br /></li>
</ol>
</li>
<li><a id="orge561cca"></a>Feature to be tested: Many suggests that it is better to simply write the feature to be tested because one is anyway using annotations to identify method as test methods. It is also recommended for the reason that it makes unit tests as alternate form of documentation and avoid code smells. Following is how tests in first example would read like if named using this technique:<br />
<ol class="org-ol">
<li><a id="org6926154"></a>IsNotAnAdultIfAgeLessThan18<br /></li>
<li><a id="org0b00d16"></a>FailToWithdrawMoneyIfAccountIsInvalid<br /></li>
<li><a id="org2833427"></a>StudentIsNotAdmittedIfMandatoryFieldsAreMissing<br /></li>
</ol>
</li>
</ol>
</div>
<div id="outline-container-org3d00729" class="outline-4">
<h4 id="org3d00729"><span class="section-number-4">13.9.4</span> Types of Test Doubles:</h4>
<div class="outline-text-4" id="text-13-9-4">
</div>
<ol class="org-ol">
<li><a id="org8a3cbb7"></a>Dummy<br />
<div class="outline-text-5" id="text-13-9-4-1">
<p>
Used only as a placeholder when an argument needs to be filled in.
</p>
</div>
</li>
<li><a id="orgd933869"></a>Stub<br />
<div class="outline-text-5" id="text-13-9-4-2">
<p>
Provides fake data to the System Under Test
</p>
</div>
</li>
<li><a id="org8feacc3"></a>Spy<br />
<div class="outline-text-5" id="text-13-9-4-3">
<p>
Records information about how it is used, and can provide that information back to the test.
</p>
</div>
</li>
<li><a id="orgbd36284"></a>Mock<br />
<div class="outline-text-5" id="text-13-9-4-4">
<p>
Defines an expectation on how it will be used, and with what parameters. Will cause a test to fail automatically if the expectation isn’t met.
</p>
</div>
</li>
<li><a id="org2e9f6a7"></a>Fake<br />
<div class="outline-text-5" id="text-13-9-4-5">
<p>
An actual implementation of the contract, but is unsuitable for production.
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-orga6bde00" class="outline-4">
<h4 id="orga6bde00"><span class="section-number-4">13.9.5</span> Static vs. Non-Static Usage of Assertion Methods</h4>
<div class="outline-text-4" id="text-13-9-5">
<ul class="org-ul">
<li><a href="https://phpunit.de/manual/6.5/en/appendixes.assertions.html#appendixes.assertions.static-vs-non-static-usage-of-assertion-methods">https://phpunit.de/manual/6.5/en/appendixes.assertions.html#appendixes.assertions.static-vs-non-static-usage-of-assertion-methods</a></li>
<li><a href="https://github.com/sebastianbergmann/phpunit/issues/1914">https://github.com/sebastianbergmann/phpunit/issues/1914</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org976c310" class="outline-3">
<h3 id="org976c310"><span class="section-number-3">13.10</span> Codeception</h3>
</div>
<div id="outline-container-org42c8fc9" class="outline-3">
<h3 id="org42c8fc9"><span class="section-number-3">13.11</span> Mockery</h3>
<div class="outline-text-3" id="text-13-11">
<p>
Mockery mocks out only the method which we specifically told it to. This means that the original constructor of the class we are mocking will be called.
</p>
</div>
</div>
<div id="outline-container-orge4f7baf" class="outline-3">
<h3 id="orge4f7baf"><span class="section-number-3">13.12</span> structure/organize tests</h3>
<div class="outline-text-3" id="text-13-12">
<p>
tests/
\ unit/
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">- module1</td>
</tr>

<tr>
<td class="org-left">- module2</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>integration/</li>
<li>functional/</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org483efa4" class="outline-2">
<h2 id="org483efa4"><span class="section-number-2">14</span> Tools</h2>
<div class="outline-text-2" id="text-14">
</div>
<div id="outline-container-org3926f69" class="outline-3">
<h3 id="org3926f69"><span class="section-number-3">14.1</span> Frameworks</h3>
<div class="outline-text-3" id="text-14-1">
</div>
<div id="outline-container-orga5dd2c4" class="outline-4">
<h4 id="orga5dd2c4"><span class="section-number-4">14.1.1</span> Symfony</h4>
<div class="outline-text-4" id="text-14-1-1">
</div>
<ol class="org-ol">
<li><a id="orgd99b5b0"></a>Serializer<br />
<div class="outline-text-5" id="text-14-1-1-1">
<ul class="org-ul">
<li><a href="https://thomas.jarrand.fr/blog/serialization/">https://thomas.jarrand.fr/blog/serialization/</a></li>
<li><a href="https://matthiasnoback.nl/2017/07/designing-a-json-serializer/">https://matthiasnoback.nl/2017/07/designing-a-json-serializer/</a></li>
<li><a href="https://stackoverflow.com/questions/35365141/symfony-serializer-set-circular-reference-global/35365239">https://stackoverflow.com/questions/35365141/symfony-serializer-set-circular-reference-global/35365239</a></li>
<li><a href="https://speakerdeck.com/dunglas/mastering-the-symfony-serializer?slide=1">https://speakerdeck.com/dunglas/mastering-the-symfony-serializer?slide=1</a></li>
</ul>
</div>
</li>
<li><a id="org6b03b15"></a>Form<br />
<div class="outline-text-5" id="text-14-1-1-2">
<ul class="org-ul">
<li><a href="https://webmozart.io/blog/2015/09/09/value-objects-in-symfony-forms/#data-mappers">https://webmozart.io/blog/2015/09/09/value-objects-in-symfony-forms/#data-mappers</a></li>
<li><a href="https://stovepipe.systems/post/rethinking-form-development">https://stovepipe.systems/post/rethinking-form-development</a></li>
<li><a href="https://blog.martinhujer.cz/symfony-forms-with-request-objects/">https://blog.martinhujer.cz/symfony-forms-with-request-objects/</a></li>
<li><a href="https://speakerdeck.com/webmozart/symfony-forms-101">https://speakerdeck.com/webmozart/symfony-forms-101</a></li>
<li><a href="http://verraes.net/2013/04/decoupling-symfony2-forms-from-entities/">http://verraes.net/2013/04/decoupling-symfony2-forms-from-entities/</a></li>
</ul>
</div>
</li>
<li><a id="org1ba53fd"></a>Problems<br />
<div class="outline-text-5" id="text-14-1-1-3">
<p>
After update to Symfony 4 - blank page - remove var/bootstrap.php.cache
</p>
</div>
</li>
<li><a id="org621cc2b"></a>Links<br />
<div class="outline-text-5" id="text-14-1-1-4">
<ul class="org-ul">
<li><a href="https://medium.com/@peter.lafferty/converting-a-json-post-in-symfony-13a24c98fc0e">Converting a json request to an array in Symfony</a></li>
<li><a href="http://blog.code4hire.com/2017/07/loading-sql-sequentially-with-doctrine-fixtures-in-symfony-project/">Loading SQL sequentially with doctrine fixtures in Symfony project</a></li>
</ul>
</div>
</li>
<li><a id="org4255231"></a>KernelBrowser<br />
<div class="outline-text-5" id="text-14-1-1-5">
<p>
$client-&gt;request('GET', 'api/clubs', [], [], [
'HTTP<sub>X</sub>-Requested-With' =&gt; 'XMLHttpRequest',
]);
</p>

<p>
$client-&gt;request('POST', '<i>foo</i>', array(), array(), array(
'HTTP<sub>X</sub>-Requested-With' =&gt; 'XMLHttpRequest',
'CONTENT<sub>TYPE</sub>' =&gt; 'application/json',
), '{"param": "value"}');
</p>
</div>
</li>
<li><a id="org0be94a9"></a>Request<br />
<div class="outline-text-5" id="text-14-1-1-6">
<p>
// $<sub>GET</sub> parameters
$request-&gt;query-&gt;get('name');
</p>

<p>
albo wszystko -&gt;all()
// $<sub>POST</sub> parameters
$request-&gt;request-&gt;get('name');
</p>
</div>
</li>
<li><a id="org222f172"></a>Config<br />
<div class="outline-text-5" id="text-14-1-1-7">
<ul class="org-ul">
<li><a href="https://www.andrew-kirkpatrick.com/2014/08/example-use-symfony-config-component-standalone/">EXAMPLE OF HOW TO USE SYMFONY CONFIG COMPONENT STANDALONE</a></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgabb0fc8" class="outline-4">
<h4 id="orgabb0fc8"><span class="section-number-4">14.1.2</span> CodeIgniter</h4>
</div>
<div id="outline-container-org1a95a7b" class="outline-4">
<h4 id="org1a95a7b"><span class="section-number-4">14.1.3</span> Laravel</h4>
<div class="outline-text-4" id="text-14-1-3">
</div>
<ol class="org-ol">
<li><a id="orgd5b9d00"></a>tests<br />
<div class="outline-text-5" id="text-14-1-3-1">
<p>
<a href="https://www.youtube.com/watch?v=0Rjsuw1ScXg&amp;list=PLpzy7FIRqpGAbkfdxo1MwOS9xjG3O3z1y">https://www.youtube.com/watch?v=0Rjsuw1ScXg&amp;list=PLpzy7FIRqpGAbkfdxo1MwOS9xjG3O3z1y</a>
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org9811560" class="outline-4">
<h4 id="org9811560"><span class="section-number-4">14.1.4</span> Cora</h4>
<div class="outline-text-4" id="text-14-1-4">
<p>
<a href="http://joebubna.github.io/Cora/">http://joebubna.github.io/Cora/</a>
</p>
</div>
</div>
<div id="outline-container-org8822ae3" class="outline-4">
<h4 id="org8822ae3"><span class="section-number-4">14.1.5</span> Links</h4>
<div class="outline-text-4" id="text-14-1-5">
<ul class="org-ul">
<li><a href="https://github.com/PatrickLouys/no-framework-tutorial">no-framework-tutorial</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org5c8d858" class="outline-3">
<h3 id="org5c8d858"><span class="section-number-3">14.2</span> Code Analize</h3>
<div class="outline-text-3" id="text-14-2">
</div>
<div id="outline-container-orgbee28a9" class="outline-4">
<h4 id="orgbee28a9"><span class="section-number-4">14.2.1</span> Code City</h4>
<div class="outline-text-4" id="text-14-2-1">
<p>
<a href="https://www.reddit.com/r/PHP/comments/a079r6/php_implementation_of_code_city/">https://www.reddit.com/r/PHP/comments/a079r6/php_implementation_of_code_city/</a>
</p>
</div>
</div>
<div id="outline-container-org4a16e28" class="outline-4">
<h4 id="org4a16e28"><span class="section-number-4">14.2.2</span> <a href="https://www.phpmetrics.org/">https://www.phpmetrics.org/</a></h4>
</div>
<div id="outline-container-org88dc89d" class="outline-4">
<h4 id="org88dc89d"><span class="section-number-4">14.2.3</span> phploc</h4>
<div class="outline-text-4" id="text-14-2-3">
<div class="org-src-container">
<pre class="src src-shell">wget https://phar.phpunit.de/phploc.phar
chmod +x phploc.phar
sudo mv phploc.phar /usr/local/bin/phploc
</pre>
</div>
</div>
</div>
<div id="outline-container-org4fb5c02" class="outline-4">
<h4 id="org4fb5c02"><span class="section-number-4">14.2.4</span> rector</h4>
<div class="outline-text-4" id="text-14-2-4">
<p>
<a href="https://github.com/rectorphp/rector">https://github.com/rectorphp/rector</a>
</p>
</div>
</div>
<div id="outline-container-org9ba5133" class="outline-4">
<h4 id="org9ba5133"><span class="section-number-4">14.2.5</span> <a href="https://github.com/nunomaduro/phpinsights">phpinsights</a></h4>
</div>
</div>

<div id="outline-container-orgb825735" class="outline-3">
<h3 id="orgb825735"><span class="section-number-3">14.3</span> Composer</h3>
<div class="outline-text-3" id="text-14-3">
<ul class="org-ul">
<li><a href="https://getcomposer.org/doc/articles/autoloader-optimization.md">https://getcomposer.org/doc/articles/autoloader-optimization.md</a></li>
<li><a href="http://mouf-php.com/optimizing-composer-autoloader-performance">http://mouf-php.com/optimizing-composer-autoloader-performance</a></li>
<li><a href="https://blobfolio.com/2017/03/benchmark-composer-autoloader/">https://blobfolio.com/2017/03/benchmark-composer-autoloader/</a></li>
<li><a href="https://semver.org/">https://semver.org/</a></li>
</ul>

<p>
php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
php -r "if (hash<sub>file</sub>('sha384', 'composer-setup.php') <code>=</code> 'c5b9b6d368201a9db6f74e2611495f369991b72d9c8cbd3ffbc63edff210eb73d46ffbfce88669ad33695ef77dc76976') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP<sub>EOL</sub>;"
php composer-setup.php &#x2013;install-dir=/usr/bin &#x2013;filename=composer
php -r "unlink('composer-setup.php');"
</p>

<p>
composer global require [package<sub>name</sub>]
</p>
</div>

<div id="outline-container-orge2d2420" class="outline-4">
<h4 id="orge2d2420"><span class="section-number-4">14.3.1</span> when compsoer update ?</h4>
<div class="outline-text-4" id="text-14-3-1">
<p>
Projekt nie jest jeszcze na produkcji, ciągle w fazie development to można raz na jakiś czas odpalić composer update, czyli podnieść wszystkie paczki.
</p>
</div>
</div>
</div>
<div id="outline-container-org255a08c" class="outline-3">
<h3 id="org255a08c"><span class="section-number-3">14.4</span> Git</h3>
<div class="outline-text-3" id="text-14-4">
<ul class="org-ul">
<li>git reset HEAD~1 - move back to recent commit</li>
</ul>
</div>
</div>
<div id="outline-container-org69ab0c5" class="outline-3">
<h3 id="org69ab0c5"><span class="section-number-3">14.5</span> Twig</h3>
<div class="outline-text-3" id="text-14-5">
</div>
<div id="outline-container-org0d0d067" class="outline-4">
<h4 id="org0d0d067"><span class="section-number-4">14.5.1</span> comma</h4>
<div class="outline-text-4" id="text-14-5-1">
<p>
{% for role in user.roles %}
{{ role.name }}
{% if not loop.last %},{% endif %}
{% endfor %}
</p>
</div>
</div>
</div>
<div id="outline-container-orgd4b0804" class="outline-3">
<h3 id="orgd4b0804"><span class="section-number-3">14.6</span> Linux</h3>
<div class="outline-text-3" id="text-14-6">
<p>
sudo lsof -i -P -n | grep LISTEN
sudo lsof -i:22 ## see a specific port such as 22 ##
</p>
</div>
</div>
</div>
<div id="outline-container-org3b3a27b" class="outline-2">
<h2 id="org3b3a27b"><span class="section-number-2">15</span> Style</h2>
<div class="outline-text-2" id="text-15">
<ul class="org-ul">
<li><a href="https://shkspr.mobi/blog/2014/11/why-i-vertically-align-my-code-and-you-should-too/">Why I vertically align my code (and you should too!)</a></li>
<li><a href="https://www.huridocs.org/2016/07/file-naming-conventions-why-you-want-them-and-how-to-create-them/">file-naming-conventions-why-you-want-them-and-how-to-create-them</a></li>
</ul>
</div>
</div>
<div id="outline-container-org660a992" class="outline-2">
<h2 id="org660a992"><span class="section-number-2">16</span> Jokes</h2>
<div class="outline-text-2" id="text-16">
<ul class="org-ul">
<li>There is so much spaghetti I might as well open a restaurant!</li>
<li>I echo all of my code as a string in the command line and then use "&gt;" to redirect it in to a new file. I don't have time to open an edit</li>
<li>We draw exceptional people from exception</li>
</ul>
</div>
</div>
<div id="outline-container-org2232c55" class="outline-2">
<h2 id="org2232c55"><span class="section-number-2">17</span> Metrics</h2>
<div class="outline-text-2" id="text-17">
</div>
<div id="outline-container-org2dfdd1f" class="outline-3">
<h3 id="org2dfdd1f"><span class="section-number-3">17.1</span> Cyclomatic Complexity Number (CCN)</h3>
<div class="outline-text-3" id="text-17-1">
<p>
Counts the available decision paths in a source code to determine it's complexity.
Each decision path starts with one of the conditional statements from the following list:
</p>
<ul class="org-ul">
<li>?</li>
<li>&amp;&amp;</li>
<li>||</li>
<li>or</li>
<li>and</li>
<li>xor</li>
<li>case</li>
<li>catch</li>
<li>elseif</li>
<li>for</li>
<li>foreach</li>
<li>if</li>
<li>while</li>
</ul>

<p>
Cyclomatic Complexity Number is never less than 1, because there’s always at least one code path.
</p>
<ul class="org-ul">
<li>1-4 has low complexity.</li>
<li>5-7 is moderate and still easy to understand.</li>
<li>6-10 has a high complexity.</li>
<li>10+ is very complex and hard to understand.</li>
</ul>
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">CyclomaticComplexityNumber</span>
{
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Class Cyclomatic Complexity = 1</span>
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">CyclomaticComplexityNumber</span>
{

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">one</span>()
    {
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Function Cyclomatic Complexity = 1</span>
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">two</span>()
    {
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Function Cyclomatic Complexity = 1</span>
    }

    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Class Cyclomatic Complexity = 1</span>
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">CyclomaticComplexityNumber</span>
{

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">one</span>()
    {
        <span style="color: #51afef;">if</span>(<span style="color: #a9a1e1;">true</span>){

        }
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Function Cyclomatic Complexity = 2</span>
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">two</span>()
    {
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Function Cyclomatic Complexity = 1</span>
    }

    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Class Cyclomatic Complexity = 1 + 1 = 2</span>
}

<span style="color: #51afef;">final</span> <span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">CyclomaticComplexityNumber</span>
{

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">one</span>()
    {
        <span style="color: #51afef;">if</span>(<span style="color: #a9a1e1;">true</span>){

        }
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Function Cyclomatic Complexity = 2</span>
    }

    <span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">two</span>()
    {
        <span style="color: #51afef;">if</span>(<span style="color: #a9a1e1;">true</span>){

        }
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Function Cyclomatic Complexity = 2</span>
    }

    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Class Cyclomatic Complexity = 1 + 1 + 1 = 3</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf89aa3a" class="outline-3">
<h3 id="orgf89aa3a"><span class="section-number-3">17.2</span> NPath Complexity</h3>
<div class="outline-text-3" id="text-17-2">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">foo</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">a</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">b</span>)
{
    <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">a</span> &gt; 10) {
        <span style="color: #51afef;">echo</span> 1;
    } <span style="color: #51afef;">else</span> {
        <span style="color: #51afef;">echo</span> 2;
    }
    <span style="color: #51afef;">if</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">a</span> &gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">b</span>) {
        <span style="color: #51afef;">echo</span> 3;
    } <span style="color: #51afef;">else</span> {
        <span style="color: #51afef;">echo</span> 4;
    }
}
</pre>
</div>
<p>
So here we have function with 4 possible outcomes, since we have 2 statements that have 2 possible outcomes each (2 * 2 = 4). That means that the functions Npath complexity is 4. If we would add another statement with 2 possible outcomes we would get a complexity of 8 since 2 * 2 * 2 = 8.
</p>
</div>
</div>
</div>
<div id="outline-container-orge29f31d" class="outline-2">
<h2 id="orge29f31d"><span class="section-number-2">18</span> Notepad</h2>
<div class="outline-text-2" id="text-18">
<ol class="org-ol">
<li>Accurate predictions are an oxymoron in the real world. You can't predict accurately for things that aren't certain, and in almost all cases, developers won't know the systems they are dealing with fully enough. Moreover, they don't know their own personal efficiency from day to day; it just can't be foreseen accurately.</li>
<li>A good property of software is the ability to change</li>
<li>Anyone can take a chance at improving code, but refactoring brings a discipline of safely making changes (with tests) and leveraging the knowledge accumulated by the software development community (through refactorings).</li>
<li>After all, like beauty, complexity is in the eye of the beholder.</li>
<li>Using new programming languages will bring you new insights and ideas to already known languages. You get a better understanding.</li>
<li>It's not about clever, crAFTY, PREETY CODE. iT'S ABOUT FAST AND EFFECTIVE COMMUNICATION. It's about communication beetween people.</li>
<li>Any time someone sees some code that isn't as clear as  it should be, they should take the opportunity to fix it right there and then — or at least within a few minutes. This opportunistic refactoring is referred to by Uncle Bob as following the boy-scout rule — always leave the code behind in a better state than you found it.</li>
</ol>
</div>
<div id="outline-container-org49e6874" class="outline-3">
<h3 id="org49e6874"><span class="section-number-3">18.1</span> Routing</h3>
<div class="outline-text-3" id="text-18-1">
<p>
from most specific at the top to less specific at the bottom
</p>
</div>
<div id="outline-container-org729e659" class="outline-4">
<h4 id="org729e659"><span class="section-number-4">18.1.1</span> yml vs. annotations</h4>
<div class="outline-text-4" id="text-18-1-1">
<p>
It's always have been a war about this. But I would simply divide them in to two options. Using annotations is quickier and kind of easier to use but it's increase noise in the code. I think it's great for prototyping small application, when you absolutly sure that app would not grow. Annotations become a tottaly mess when you have big application, it's hard to manage all routing compare to central routing like yaml.
So I would go with word prototyping. Doctrine it's kind the same. It's great for prototyping but when you application finally reach maximum of what can you squize from ORM, you would have to leave it to pure SQL.
</p>
</div>
</div>
<div id="outline-container-orga471afe" class="outline-4">
<h4 id="orga471afe"><span class="section-number-4">18.1.2</span> benchmarks</h4>
<div class="outline-text-4" id="text-18-1-2">
<p>
<a href="http://nikic.github.io/2014/02/18/Fast-request-routing-using-regular-expressions.html">http://nikic.github.io/2014/02/18/Fast-request-routing-using-regular-expressions.html</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orga6bfe5a" class="outline-3">
<h3 id="orga6bfe5a"><span class="section-number-3">18.2</span> Notes</h3>
<div class="outline-text-3" id="text-18-2">
<p>
Extracting statistical information from hundreds of processes without adversely affecting their performance is not a simple task.
</p>
</div>
</div>
<div id="outline-container-orgc765f96" class="outline-3">
<h3 id="orgc765f96"><span class="section-number-3">18.3</span> Mario</h3>
<div class="outline-text-3" id="text-18-3">
<p>
<a href="http://jamie-wong.com/2013/07/12/grep-test/">http://jamie-wong.com/2013/07/12/grep-test/</a> Grep Test
</p>
</div>
</div>
</div>
<div id="outline-container-org65923c1" class="outline-2">
<h2 id="org65923c1"><span class="section-number-2">19</span> Data Structures</h2>
<div class="outline-text-2" id="text-19">
</div>
<div id="outline-container-org72f7a1e" class="outline-3">
<h3 id="org72f7a1e"><span class="section-number-3">19.1</span> Array</h3>
<div class="outline-text-3" id="text-19-1">
</div>
<div id="outline-container-org7e94fd7" class="outline-4">
<h4 id="org7e94fd7"><span class="section-number-4">19.1.1</span> Avoid complex arrays</h4>
<div class="outline-text-4" id="text-19-1-1">
<p>
<a href="http://mamchenkov.net/wordpress/2018/11/27/avoid-complex-arrays-in-php/">http://mamchenkov.net/wordpress/2018/11/27/avoid-complex-arrays-in-php/</a>
</p>
</div>
</div>
<div id="outline-container-org1167646" class="outline-4">
<h4 id="org1167646"><span class="section-number-4">19.1.2</span> <a href="https://stackoverflow.com/questions/10057671/how-does-php-foreach-actually-work">How does PHP 'foreach' actually work?</a></h4>
</div>
<div id="outline-container-orge13cc49" class="outline-4">
<h4 id="orge13cc49"><span class="section-number-4">19.1.3</span> <a href="https://szymonkrajewski.pl/why-you-should-use-array-functions-instead-of-basic-loops/#comment-365">Why you should use array functions instead of basic loops</a></h4>
</div>
<div id="outline-container-orgbe46f51" class="outline-4">
<h4 id="orgbe46f51"><span class="section-number-4">19.1.4</span> array is empty</h4>
<div class="outline-text-4" id="text-19-1-4">
</div>
<ol class="org-ol">
<li><a id="orgf755c86"></a>empty<br />
<div class="outline-text-5" id="text-19-1-4-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #5B6268;">// </span><span style="color: #5B6268;">Declare an array and initialize it </span>
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">non_empty_array</span> = <span style="color: #51afef;">array</span>(<span style="color: #98be65;">'URL'</span> =&gt; <span style="color: #98be65;">'https://www.geeksforgeeks.org/'</span>); 
  
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Declare an empty array </span>
<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">empty_array</span> = <span style="color: #51afef;">array</span>(); 
  
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Condition to check array is empty or not </span>
<span style="color: #51afef;">if</span>(<span style="color: #51afef; font-weight: bold;">!</span><span style="color: #51afef;">empty</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">non_empty_array</span>)) 
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Given Array is not empty &lt;br&gt;"</span>; 
  
<span style="color: #51afef;">if</span>(<span style="color: #51afef;">empty</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">empty_array</span>)) 
    <span style="color: #51afef;">echo</span> <span style="color: #98be65;">"Given Array is empty"</span>; 

</pre>
</div>
</div>
</li>
<li><a id="org30d0b7e"></a>count<br />
<div class="outline-text-5" id="text-19-1-4-2">
<p>
// Declare an empty array  
$empty<sub>array</sub> = array(); 
</p>

<p>
<i>/ Function to count array  
/</i> element and use condition 
if(count($empty<sub>array</sub>) == 0) 
echo "Array is empty"; 
else
echo "Array is non- empty"; 
</p>
</div>
</li>
<li><a id="orgef105e3"></a>sizeof<br />
<div class="outline-text-5" id="text-19-1-4-3">
<p>
// Declare an empty array 
$empty<sub>array</sub> = array(); 
</p>

<p>
<i>/ Use array index to check 
/</i> array is empty or not 
if( sizeof($empty<sub>array</sub>) == 0 ) 
echo "Empty Array"; 
else
echo "Non-Empty Array"; 
</p>
</div>
</li>
<li><a id="orgd40aa00"></a>if<br />
<div class="outline-text-5" id="text-19-1-4-4">
<p>
$playerList = array();
if (!$playerList) {
echo "No players";
} else {
echo "Explode stuff&#x2026;";
}
</p>
</div>
</li>
<li><a id="org57c72af"></a>compare to empty array<br />
<div class="outline-text-5" id="text-19-1-4-5">
<p>
if ($variableToTest <code>=</code> array()) {
echo 'this is explicitly an empty array!';
}
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org4ed2dc7" class="outline-4">
<h4 id="org4ed2dc7"><span class="section-number-4">19.1.5</span> <a href="https://stackoverflow.com/questions/2477496/php-sort-array-by-subarray-value">PHP Sort Array By SubArray Value</a></h4>
<div class="outline-text-4" id="text-19-1-5">
<p>
usort($array, function ($a, $b) {
return $a['optionNumber'] &lt;=&gt; $b['optionNumber'];
});
</p>

<p>
array<sub>multisort</sub>(array<sub>map</sub>(function($element) {
return $element['optionNumber'];
}, $array), SORT<sub>ASC</sub>, $array);
</p>
</div>
</div>
</div>
<div id="outline-container-org685db75" class="outline-3">
<h3 id="org685db75"><span class="section-number-3">19.2</span> String</h3>
<div class="outline-text-3" id="text-19-2">
</div>
<div id="outline-container-orgde2cc50" class="outline-4">
<h4 id="orgde2cc50"><span class="section-number-4">19.2.1</span> empty</h4>
<div class="outline-text-4" id="text-19-2-1">
<p>
<a href="https://thisinterestsme.com/whitespace-php-empty-function/">https://thisinterestsme.com/whitespace-php-empty-function/</a>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc8a1903" class="outline-2">
<h2 id="orgc8a1903"><span class="section-number-2">20</span> Functions Core</h2>
<div class="outline-text-2" id="text-20">
</div>
<div id="outline-container-org33e6a5b" class="outline-3">
<h3 id="org33e6a5b"><span class="section-number-3">20.1</span> SPL Library</h3>
<div class="outline-text-3" id="text-20-1">
<p>
Great job on the implementation!
</p>

<p>
For larger training jobs, wondering if it's worthwhile to investigate implementing SplFixedArray in to the class? While I'm not sure of the PHP7 impacts, for PHP &lt; 7 this resulted in a memory reduction of 144 bytes per array element to 56 bytes per array element.
</p>

<p>
If you were working with 50M data points total, this would reduce the memory requirements from 7.2GB to 2.8GB.
</p>
</div>
</div>
<div id="outline-container-org8be1123" class="outline-3">
<h3 id="org8be1123"><span class="section-number-3">20.2</span> As opposed with isset(), property<sub>exists</sub>() returns TRUE even if the property has the value NULL.</h3>
</div>
<div id="outline-container-orgfe8f4f5" class="outline-3">
<h3 id="orgfe8f4f5"><span class="section-number-3">20.3</span> isset() vs array<sub>key</sub><sub>exist</sub></h3>
<div class="outline-text-3" id="text-20-3">
<p>
In simple terms, isset() checks whether a variable exists or its been declared or not. This can be anything, an array, a particular key in an array or a variable. It also checks if a declared variable, array or array key has null value, if it does, isset() returns false, it returns true otherwise.
</p>

<p>
On the other hand, array<sub>key</sub><sub>exists</sub>() checks whether a particular key or index exists in an array. It does not evaluate the value of the key for any null values. It returns false if it does not find the key in the array and true otherwise.
</p>

<p>
from the PHP manual: isset() does not return TRUE for array keys that correspond to a NULL value, while array<sub>key</sub><sub>exists</sub>() does
</p>
</div>
</div>

<div id="outline-container-orgb36b024" class="outline-3">
<h3 id="orgb36b024"><span class="section-number-3">20.4</span> foreach vs array<sub>map</sub></h3>
<div class="outline-text-3" id="text-20-4">
<p>
<a href="https://stackoverflow.com/questions/18144782/performance-of-foreach-array-map-with-lambda-and-array-map-with-static-function">https://stackoverflow.com/questions/18144782/performance-of-foreach-array-map-with-lambda-and-array-map-with-static-function</a>
<a href="https://www.reddit.com/r/PHP/comments/65ihba/re_array_map_vs_foreach/">https://www.reddit.com/r/PHP/comments/65ihba/re_array_map_vs_foreach/</a>
</p>

<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef; font-weight: bold;">&lt;?php</span>

<span style="color: #5B6268;">// </span><span style="color: #5B6268;">test a simple array_map in the real world.</span>
<span style="color: #51afef;">function</span> <span style="color: #c678dd;">test_array_map</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">data</span>){
    <span style="color: #51afef;">return</span> array_map(<span style="color: #51afef;">function</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>){
        <span style="color: #51afef;">return</span> <span style="color: #51afef;">array</span>(
            <span style="color: #98be65;">'productId'</span> =&gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'id'</span>] + 1,
            <span style="color: #98be65;">'productName'</span> =&gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'name'</span>],
            <span style="color: #98be65;">'desc'</span> =&gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'remark'</span>]
        );
    }, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">data</span>);
}

<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Another with local variable $i</span>
<span style="color: #51afef;">function</span> <span style="color: #c678dd;">test_array_map_use_local</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">data</span>){
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span> = 0;
    <span style="color: #51afef;">return</span> array_map(<span style="color: #51afef;">function</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>) <span style="color: #51afef;">use</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span>) {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span>++;
        <span style="color: #51afef;">return</span> <span style="color: #51afef;">array</span>(
            <span style="color: #98be65;">'productId'</span> =&gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'id'</span>] + <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span>,
            <span style="color: #98be65;">'productName'</span> =&gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'name'</span>],
            <span style="color: #98be65;">'desc'</span> =&gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'remark'</span>]
        );
    }, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">data</span>);
}

<span style="color: #5B6268;">// </span><span style="color: #5B6268;">test a simple foreach in the real world</span>
<span style="color: #51afef;">function</span> <span style="color: #c678dd;">test_foreach</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">data</span>){
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span> = <span style="color: #51afef;">array</span>();
    <span style="color: #51afef;">foreach</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">data</span> <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>) {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tmp</span> = <span style="color: #51afef;">array</span>();
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tmp</span>[<span style="color: #98be65;">'productId'</span>] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'id'</span>] + 1;
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tmp</span>[<span style="color: #98be65;">'productName'</span>] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'name'</span>];
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tmp</span>[<span style="color: #98be65;">'desc'</span>] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'remark'</span>];
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span>[] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tmp</span>;
    }
    <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span>;
}

<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Another with local variable $i</span>
<span style="color: #51afef;">function</span> <span style="color: #c678dd;">test_foreach_use_local</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">data</span>){
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span> = <span style="color: #51afef;">array</span>();
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span> = 0;
    <span style="color: #51afef;">foreach</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">data</span> <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>) {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span>++;
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tmp</span> = <span style="color: #51afef;">array</span>();
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tmp</span>[<span style="color: #98be65;">'productId'</span>] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'id'</span>] + <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span>;
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tmp</span>[<span style="color: #98be65;">'productName'</span>] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'name'</span>];
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tmp</span>[<span style="color: #98be65;">'desc'</span>] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">row</span>[<span style="color: #98be65;">'remark'</span>];
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span>[] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tmp</span>;
    }
    <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">result</span>;
}

<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">data</span> = array_fill(0, 10000, <span style="color: #51afef;">array</span>(
    <span style="color: #98be65;">'id'</span> =&gt; 1,
    <span style="color: #98be65;">'name'</span> =&gt; <span style="color: #98be65;">'test'</span>,
    <span style="color: #98be65;">'remark'</span> =&gt; <span style="color: #98be65;">'ok'</span>
));

<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tests</span> = <span style="color: #51afef;">array</span>(
    <span style="color: #98be65;">'array_map'</span> =&gt; <span style="color: #51afef;">array</span>(),
    <span style="color: #98be65;">'foreach'</span> =&gt; <span style="color: #51afef;">array</span>(),
    <span style="color: #98be65;">'array_map_use_local'</span> =&gt; <span style="color: #51afef;">array</span>(),
    <span style="color: #98be65;">'foreach_use_local'</span> =&gt; <span style="color: #51afef;">array</span>(),
);

<span style="color: #51afef;">for</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span> = 0; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span> &lt; 100; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span>++){
    <span style="color: #51afef;">foreach</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tests</span> <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">testName</span> =&gt; &amp;<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">records</span>) {
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">start</span> = microtime(<span style="color: #a9a1e1;">true</span>);
        call_user_func(<span style="color: #98be65;">"test_</span><span style="color: #dcaeea;">$testName</span><span style="color: #98be65;">"</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">data</span>);
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">delta</span> = microtime(<span style="color: #a9a1e1;">true</span>) - <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">start</span>;
        <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">records</span>[] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">delta</span>;
    }
}

<span style="color: #5B6268;">// </span><span style="color: #5B6268;">output result:</span>
<span style="color: #51afef;">foreach</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">tests</span> <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span> =&gt; &amp;<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">records</span>) {
    printf(<span style="color: #98be65;">'%.4f : %s '</span>.<span style="color: #a9a1e1;">PHP_EOL</span>, 
           array_sum(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">records</span>) / count(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">records</span>), <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">name</span>);
}
</pre>
</div>
<p>
<a href="https://3v4l.org/lon7l#output">https://3v4l.org/lon7l#output</a>
</p>
</div>
</div>
<div id="outline-container-org7f377af" class="outline-3">
<h3 id="org7f377af"><span class="section-number-3">20.5</span> create an array</h3>
<div class="outline-text-3" id="text-20-5">
<div class="org-src-container">
<pre class="src src-php">range(1,10);
</pre>
</div>
</div>
</div>
<div id="outline-container-orged823e9" class="outline-3">
<h3 id="orged823e9"><span class="section-number-3">20.6</span> foreach</h3>
<div class="outline-text-3" id="text-20-6">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">foreach</span> (range(1, 100) <span style="color: #51afef;">as</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">i</span>) 
</pre>
</div>
</div>
</div>
<div id="outline-container-org1e44301" class="outline-3">
<h3 id="org1e44301"><span class="section-number-3">20.7</span> array</h3>
<div class="outline-text-3" id="text-20-7">
</div>
<div id="outline-container-org9865d38" class="outline-4">
<h4 id="org9865d38"><span class="section-number-4">20.7.1</span> flatten</h4>
<div class="outline-text-4" id="text-20-7-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #51afef;">public</span> <span style="color: #51afef;">function</span> <span style="color: #c678dd;">flatten</span>(<span style="color: #ECBE7B;">array</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">array</span>) {
    <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">return</span> = <span style="color: #51afef;">array</span>();
    array_walk_recursive(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">array</span>, <span style="color: #51afef;">function</span>(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">a</span>) <span style="color: #51afef;">use</span> (&amp;<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">return</span>) { <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">return</span>[] = <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">a</span>; });
    <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">return</span>;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org73cf0c3" class="outline-4">
<h4 id="org73cf0c3"><span class="section-number-4">20.7.2</span> sort by value of a given key</h4>
<div class="outline-text-4" id="text-20-7-2">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #5B6268;">//</span><span style="color: #5B6268;">ascending</span>
usort(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">inventory</span>, <span style="color: #51afef;">function</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">item1</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">item2</span>) {
    <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">item1</span>[<span style="color: #98be65;">'price'</span>] &lt;=&gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">item2</span>[<span style="color: #98be65;">'price'</span>];
});

<span style="color: #5B6268;">//</span><span style="color: #5B6268;">descending</span>
usort(<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">inventory</span>, <span style="color: #51afef;">function</span> (<span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">item1</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">item2</span>) {
    <span style="color: #51afef;">return</span> <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">item2</span>[<span style="color: #98be65;">'price'</span>] &lt;=&gt; <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">item1</span>[<span style="color: #98be65;">'price'</span>];
});
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf0edae2" class="outline-2">
<h2 id="orgf0edae2"><span class="section-number-2">21</span> Links</h2>
<div class="outline-text-2" id="text-21">
<ol class="org-ol">
<li><a href="https://www.tomasvotruba.cz/">Tomas Votruba</a></li>
<li><a href="https://dantleech.com/">https://dantleech.com/</a> Phpactor</li>
<li><a href="https://24daysindecember.net/2018/12/15/php-and-the-secrets-of-emergent-architecture/">PHP and the secrets of emergent architecture</a></li>
</ol>
</div>
</div>
<div id="outline-container-orgef7262a" class="outline-2">
<h2 id="orgef7262a"><span class="section-number-2">22</span> Problems</h2>
<div class="outline-text-2" id="text-22">
</div>
<div id="outline-container-orgdf49bc8" class="outline-3">
<h3 id="orgdf49bc8"><span class="section-number-3">22.1</span> PHP Add comma to every item but last one</h3>
<div class="outline-text-3" id="text-22-1">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">comma_separated</span> = implode(<span style="color: #98be65;">", "</span>, <span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">vars</span>);
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org55c4f7e" class="outline-2">
<h2 id="org55c4f7e"><span class="section-number-2">23</span> Quirks</h2>
<div class="outline-text-2" id="text-23">
</div>
<div id="outline-container-org7f14dbb" class="outline-3">
<h3 id="org7f14dbb"><span class="section-number-3">23.1</span> More parameter than expected: no error in PHP?</h3>
<div class="outline-text-3" id="text-23-1">
<p>
<a href="https://bugs.php.net/bug.php?id=13892&amp;fbclid=IwAR0r2lrYMJ5cuE9o9sygoCORtmQ9R-dca76OfmRoadijMjqHoVzMpQXHl9c">https://bugs.php.net/bug.php?id=13892&amp;fbclid=IwAR0r2lrYMJ5cuE9o9sygoCORtmQ9R-dca76OfmRoadijMjqHoVzMpQXHl9c</a>
</p>
</div>
</div>
<div id="outline-container-orgf18c563" class="outline-3">
<h3 id="orgf18c563"><span class="section-number-3">23.2</span> Adding float numbers</h3>
<div class="outline-text-3" id="text-23-2">
<div class="org-src-container">
<pre class="src src-php">var_dump(0.1 + 0.2 - 0.3);
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org21eef4d" class="outline-2">
<h2 id="org21eef4d"><span class="section-number-2">24</span> Security</h2>
<div class="outline-text-2" id="text-24">
</div>
<div id="outline-container-org58acb22" class="outline-3">
<h3 id="org58acb22"><span class="section-number-3">24.1</span> Cross-Site Request Forgery CSRF</h3>
<div class="outline-text-3" id="text-24-1">
<p>
also known as XSRF, Sea Surf or Session Riding
is an attack that forces an end user to execute unwanted actions on a web application in which they're currently autheniticated.
</p>
</div>
<div id="outline-container-org8d84051" class="outline-4">
<h4 id="org8d84051"><span class="section-number-4">24.1.1</span> GET</h4>
<div class="outline-text-4" id="text-24-1-1">
<p>
GET <a href="http://bank.com/transer.do?to=Attacker&amp;amount=100">http://bank.com/transer.do?to=Attacker&amp;amount=100</a> HTTP/1.1
&lt;a href="<a href="http://bank.com/transer.do?to=Attacker&amp;amount=100">http://bank.com/transer.do?to=Attacker&amp;amount=100</a>"&gt; View my picture! &lt;/a&gt;
&lt;img src="<a href="http://bank.com/transer.do?to=Attacker&amp;amount=100">http://bank.com/transer.do?to=Attacker&amp;amount=100</a>" witdth="0", height="0", border="0"&gt;
</p>

<p>
Next, he can distribute the hyperlink via email to a large number of bank customers. Those who click on the link while logged into their bank account will unintentionally initiate the $100 transfer.
</p>

<p>
Note that if the bank’s website is only using POST requests, it’s impossible to frame malicious requests using a &lt;a&gt; href tag. However, the attack could be delivered in a &lt;form&gt; tag with automatic execution of the embedded JavaScript.
This is how such a form may look like:
</p>
</div>
</div>
<div id="outline-container-org0355eca" class="outline-4">
<h4 id="org0355eca"><span class="section-number-4">24.1.2</span> POST</h4>
<div class="outline-text-4" id="text-24-1-2">
<p>
POST <a href="http://bank.com/transer.do">http://bank.com/transer.do</a> HTTP/1.1
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">body</span> <span style="color: #dcaeea;">onload</span>=<span style="color: #98be65;">"document.forms[0].submit()"</span>&gt;
  &lt;<span style="color: #c678dd;">form</span> <span style="color: #dcaeea;">action</span>=<span style="color: #98be65;">"http://netbank.com/transfer.do"</span> <span style="color: #dcaeea;">method</span>=<span style="color: #98be65;">"POST"</span>&gt;
    &lt;<span style="color: #c678dd;">input</span> <span style="color: #dcaeea;">type</span>=<span style="color: #98be65;">"hidden"</span> <span style="color: #dcaeea;">name</span>=<span style="color: #98be65;">"acct"</span> <span style="color: #dcaeea;">value</span>=<span style="color: #98be65;">"Attacker"</span>/&gt;
    &lt;<span style="color: #c678dd;">input</span> <span style="color: #dcaeea;">type</span>=<span style="color: #98be65;">"hidden"</span> <span style="color: #dcaeea;">name</span>=<span style="color: #98be65;">"amount"</span> <span style="color: #dcaeea;">value</span>=<span style="color: #98be65;">"$100"</span>/&gt;
    &lt;<span style="color: #c678dd;">input</span> <span style="color: #dcaeea;">type</span>=<span style="color: #98be65;">"submit"</span> <span style="color: #dcaeea;">value</span>=<span style="color: #98be65;">"View my pictures!"</span>/&gt;
  &lt;/<span style="color: #c678dd;">form</span>&gt;
&lt;/<span style="color: #c678dd;">body</span>&gt;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org6186dde" class="outline-3">
<h3 id="org6186dde"><span class="section-number-3">24.2</span> Cross-Site Scripting (XSS)</h3>
<div class="outline-text-3" id="text-24-2">
<p>
XSS enables attackers to inject client-side scripts into web pages viewed by other users.
</p>
</div>
</div>
<div id="outline-container-org58d492c" class="outline-3">
<h3 id="org58d492c"><span class="section-number-3">24.3</span> Links</h3>
<div class="outline-text-3" id="text-24-3">
<p>
<a href="https://arstechnica.com/information-technology/2015/08/cracking-all-hacked-ashley-madison-passwords-could-take-a-lifetime/">https://arstechnica.com/information-technology/2015/08/cracking-all-hacked-ashley-madison-passwords-could-take-a-lifetime/</a>
</p>

<p>
<a href="https://www.rdegges.com/2018/please-stop-using-local-storage/">https://www.rdegges.com/2018/please-stop-using-local-storage/</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org0dbf947" class="outline-2">
<h2 id="org0dbf947"><span class="section-number-2">25</span> Interface and User Experience</h2>
<div class="outline-text-2" id="text-25">
</div>
<div id="outline-container-org7592c22" class="outline-3">
<h3 id="org7592c22"><span class="section-number-3">25.1</span> <a href="https://en.wikipedia.org/wiki/Post/Redirect/Get">Redirect after a POST</a> if that POST was successful, to prevent a refresh from submitting again.</h3>
</div>
</div>
<div id="outline-container-org3dd8860" class="outline-2">
<h2 id="org3dd8860"><span class="section-number-2">26</span> Topics</h2>
<div class="outline-text-2" id="text-26">
</div>
<div id="outline-container-org5c07370" class="outline-3">
<h3 id="org5c07370"><span class="section-number-3">26.1</span> Rewrite</h3>
<div class="outline-text-3" id="text-26-1">
<ul class="org-ul">
<li><a href="https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/">Things You Should Never Do, Part I</a></li>
</ul>
</div>
</div>
<div id="outline-container-org65dc57e" class="outline-3">
<h3 id="org65dc57e"><span class="section-number-3">26.2</span> Crawler</h3>
<div class="outline-text-3" id="text-26-2">
<ul class="org-ul">
<li><a href="https://vegibit.com/php-simple-html-dom-parser-vs-friendsofphp-goutte/">PHP Simple HTML DOM Parser vs FriendsOfPHP Goutte</a></li>
<li><a href="http://www.michaelnielsen.org/ddi/how-to-crawl-a-quarter-billion-webpages-in-40-hours/">How to crawl a quarter billion webpages in 40 hours</a></li>
<li></li>
</ul>
</div>
</div>
<div id="outline-container-org3a8c2b9" class="outline-3">
<h3 id="org3a8c2b9"><span class="section-number-3">26.3</span> Namespace</h3>
<div class="outline-text-3" id="text-26-3">
<p>
<a href="https://www.oligriffiths.com/2015/06/30/namespacing-in-PHP-and-how-we-broke-it/">https://www.oligriffiths.com/2015/06/30/namespacing-in-PHP-and-how-we-broke-it/</a>
<a href="http://e-wojtowicz.pl/tag/spl_autoload_register/">http://e-wojtowicz.pl/tag/spl_autoload_register/</a>
</p>
</div>
</div>
<div id="outline-container-orgc4631bf" class="outline-3">
<h3 id="orgc4631bf"><span class="section-number-3">26.4</span> ReactPHP</h3>
<div class="outline-text-3" id="text-26-4">
<p>
<a href="https://www.youtube.com/channel/UC3EThWvNp4EabJD7PyCOzGw">https://www.youtube.com/channel/UC3EThWvNp4EabJD7PyCOzGw</a>
<a href="https://sergeyzhuk.me">https://sergeyzhuk.me</a>
</p>
</div>
</div>
<div id="outline-container-orge6af391" class="outline-3">
<h3 id="orge6af391"><span class="section-number-3">26.5</span> PHP FPM</h3>
<div class="outline-text-3" id="text-26-5">
<p>
<a href="https://www.basezap.com/difference-php-cgi-php-fpm/">https://www.basezap.com/difference-php-cgi-php-fpm/</a>
</p>
</div>
</div>
<div id="outline-container-orgb16236f" class="outline-3">
<h3 id="orgb16236f"><span class="section-number-3">26.6</span> Nginx</h3>
<div class="outline-text-3" id="text-26-6">
<p>
server {
listen 80 default<sub>server</sub>;
listen [::]:80 default<sub>server</sub>;
</p>

<p>
root /var/www/html;
index index.html;
</p>

<p>
server<sub>name</sub> culturevein.com;
</p>

<p>
location / {
try<sub>files</sub> $uri $uri/ /index.html;
}
</p>

<p>
location <i>api</i> {
try<sub>files</sub> $uri $uri/ /index.php;
}
</p>

<p>
location ~ \.php$ {
include snippets/fastcgi-php.conf;
fastcgi<sub>pass</sub> unix:/run/php/php7.4-fpm.sock;
}
}
</p>
</div>
</div>
</div>
<div id="outline-container-org0af3f9c" class="outline-2">
<h2 id="org0af3f9c"><span class="section-number-2">27</span> Performance</h2>
<div class="outline-text-2" id="text-27">
<p>
<a href="https://github.com/JoeDog/siege">https://github.com/JoeDog/siege</a> - have to compile
<a href="http://www.phpbenchmarks.com">http://www.phpbenchmarks.com</a>
<a href="https://blobfolio.com/2017/09/25-easy-php7-micro-optimizations/">https://blobfolio.com/2017/09/25-easy-php7-micro-optimizations/</a>
</p>
</div>
<div id="outline-container-org3c8930c" class="outline-3">
<h3 id="org3c8930c"><span class="section-number-3">27.1</span> Apache Bench</h3>
<div class="outline-text-3" id="text-27-1">
<p>
sudo apt-get install apache2-utils
</p>
</div>
</div>

<div id="outline-container-org449c9d4" class="outline-3">
<h3 id="org449c9d4"><span class="section-number-3">27.2</span> Baseline Performance</h3>
<div class="outline-text-3" id="text-27-2">
</div>
<div id="outline-container-org55dac41" class="outline-4">
<h4 id="org55dac41"><span class="section-number-4">27.2.1</span> Stock install (Amazon EC2 Large, Ubuntu, Apache, PHP, MySQL)</h4>
</div>
<div id="outline-container-org645afb3" class="outline-4">
<h4 id="org645afb3"><span class="section-number-4">27.2.2</span> Static index.html (Hello World!)</h4>
</div>
<div id="outline-container-orgea86984" class="outline-4">
<h4 id="orgea86984"><span class="section-number-4">27.2.3</span> Dynamic index.php (&lt;?php echo 'Hello World!';)</h4>
</div>
<div id="outline-container-org13621a0" class="outline-4">
<h4 id="org13621a0"><span class="section-number-4">27.2.4</span> Database connect (PDO)</h4>
<div class="outline-text-4" id="text-27-2-4">
<div class="org-src-container">
<pre class="src src-php"><span style="color: #bbc2cf; background-color: #282c34;">$</span><span style="color: #dcaeea;">pdo</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">PDO</span>(<span style="color: #98be65;">'mysql:host=host;dbname=dbname'</span>, <span style="color: #98be65;">'user, '</span>pass<span style="color: #98be65;">');</span>
<span style="color: #98be65;">   echo '</span><span style="color: #a9a1e1;">PDO</span> Connect<span style="color: #51afef; font-weight: bold;">!</span><span style="color: #98be65;">';</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1adc86e" class="outline-4">
<h4 id="org1adc86e"><span class="section-number-4">27.2.5</span> Database connect, query, and fetch (PDO)</h4>
</div>

<div id="outline-container-org7131383" class="outline-4">
<h4 id="org7131383"><span class="section-number-4">27.2.6</span> Table</h4>
<div class="outline-text-4" id="text-27-2-6">
<p>
5 runs of 10 users for 60 sec, avg
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">relative</th>
<th scope="col" class="org-left">req/s</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">html</td>
<td class="org-left">1,25</td>
<td class="org-left">2 726</td>
</tr>

<tr>
<td class="org-left">php</td>
<td class="org-left">1</td>
<td class="org-left">2 178</td>
</tr>

<tr>
<td class="org-left">pdo connect</td>
<td class="org-left">0,83</td>
<td class="org-left">1 818</td>
</tr>

<tr>
<td class="org-left">pdo connect, query, fetch</td>
<td class="org-left">0,73</td>
<td class="org-left">1 611</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org417e5f2" class="outline-3">
<h3 id="org417e5f2"><span class="section-number-3">27.3</span> CRUD vs. BREAD</h3>
</div>
<div id="outline-container-orgb8962fe" class="outline-3">
<h3 id="orgb8962fe"><span class="section-number-3">27.4</span> N+1 Problem</h3>
<div class="outline-text-3" id="text-27-4">
</div>
<div id="outline-container-org007b80d" class="outline-4">
<h4 id="org007b80d"><span class="section-number-4">27.4.1</span> Single-Query Solution</h4>
<div class="outline-text-4" id="text-27-4-1">
<p>
select all results, including relationships in a single query
</p>
</div>
</div>
<div id="outline-container-org0ce3f93" class="outline-4">
<h4 id="org0ce3f93"><span class="section-number-4">27.4.2</span> Query-and-Stitch Solution</h4>
</div>
</div>
<div id="outline-container-orgee5331c" class="outline-3">
<h3 id="orgee5331c"><span class="section-number-3">27.5</span> Array vs. StdClass</h3>
<div class="outline-text-3" id="text-27-5">
<p>
<a href="https://steemit.com/php/@crell/php-use-associative-arrays-basically-never">https://steemit.com/php/@crell/php-use-associative-arrays-basically-never</a>
<a href="https://blog.fox21.at/2018/11/21/avoid-dynamic-data-structures-in-php.html">https://blog.fox21.at/2018/11/21/avoid-dynamic-data-structures-in-php.html</a>
</p>
</div>
</div>
<div id="outline-container-orga25df3f" class="outline-3">
<h3 id="orga25df3f"><span class="section-number-3">27.6</span> Benchmark</h3>
<div class="outline-text-3" id="text-27-6">
<p>
<a href="https://3v4l.org/UYaFY">https://3v4l.org/UYaFY</a>
</p>
</div>
<div id="outline-container-org9b35db0" class="outline-4">
<h4 id="org9b35db0"><span class="section-number-4">27.6.1</span> Fastest way to insert new records where one doesn’t already exist</h4>
<div class="outline-text-4" id="text-27-6-1">
<p>
<a href="http://cc.davelozinski.com/sql/fastest-way-to-insert-new-records-where-one-doesnt-already-exist">http://cc.davelozinski.com/sql/fastest-way-to-insert-new-records-where-one-doesnt-already-exist</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgb4b95b3" class="outline-3">
<h3 id="orgb4b95b3"><span class="section-number-3">27.7</span> micro</h3>
<div class="outline-text-3" id="text-27-7">
<p>
<a href="https://veewee.github.io/blog/optimizing-php-performance-by-fq-function-calls/?fbclid=IwAR2EW0FMAUX_LkCy_Kjo94-WxGyIwllSUQwNxIx6EwTkROp4kKlyZgkDlTQ">Optimizing PHP performance by using fully-qualified function calls</a>
</p>
</div>
</div>
<div id="outline-container-org620aec0" class="outline-3">
<h3 id="org620aec0"><span class="section-number-3">27.8</span> questions</h3>
<div class="outline-text-3" id="text-27-8">
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/2617672/how-important-is-it-to-unset-variables-in-php">How important is it to unset variables in PHP?</a></li>
<li><a href="https://stackoverflow.com/questions/584960/whats-better-at-freeing-memory-with-php-unset-or-var-null">What's better at freeing memory with PHP: unset() or $var = null</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgd41ab1c" class="outline-3">
<h3 id="orgd41ab1c"><span class="section-number-3">27.9</span> PHP 7.4 Preload</h3>
<div class="outline-text-3" id="text-27-9">
<p>
<a href="https://stitcher.io/blog/php-preload-benchmarks">https://stitcher.io/blog/php-preload-benchmarks</a>
</p>
</div>
</div>
<div id="outline-container-org78d7013" class="outline-3">
<h3 id="org78d7013"><span class="section-number-3">27.10</span> Tools</h3>
<div class="outline-text-3" id="text-27-10">
<ul class="org-ul">
<li><a href="https://github.com/krakjoe/nocheq">https://github.com/krakjoe/nocheq</a> - Sick of pesky type checking making your code too slow (and correct) ?</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orge77a572" class="outline-2">
<h2 id="orge77a572"><span class="section-number-2">28</span> About</h2>
<div class="outline-text-2" id="text-28">
<p>
It's a simple site about refactoring in PHP.
</p>

<p>
You can contact me at slawomir.grochowski@gmail.com, <a href="https://twitter.com/s_grochowski">https://twitter.com/s_grochowski</a>, <a href="https://www.facebook.com/SlawomirGrochowski">https://www.facebook.com/SlawomirGrochowski</a>
You can support this site: send some BitCoins 1D8xeRkxssTTLESfGZtPVoqVJDq7MJSqNx , send/buy one of the books I would like to read or just say Hello!
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: slk500</p>
<p class="date">Created: 2020-03-04 Wed 12:52</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
